var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(f,a,b){if(f==Array.prototype||f==Object.prototype)return f;f[a]=b.value;return f};
$jscomp.getGlobal=function(f){f=["object"==typeof globalThis&&globalThis,f,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var a=0;a<f.length;++a){var b=f[a];if(b&&b.Math==Math)return b}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(f,a){var b=$jscomp.propertyToPolyfillSymbol[a];if(null==b)return f[a];b=f[b];return void 0!==b?b:f[a]};$jscomp.polyfill=function(f,a,b,d){a&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(f,a,b,d):$jscomp.polyfillUnisolated(f,a,b,d))};
$jscomp.polyfillUnisolated=function(f,a,b,d){b=$jscomp.global;f=f.split(".");for(d=0;d<f.length-1;d++){var c=f[d];if(!(c in b))return;b=b[c]}f=f[f.length-1];d=b[f];a=a(d);a!=d&&null!=a&&$jscomp.defineProperty(b,f,{configurable:!0,writable:!0,value:a})};
$jscomp.polyfillIsolated=function(f,a,b,d){var c=f.split(".");f=1===c.length;d=c[0];d=!f&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var e=0;e<c.length-1;e++){var g=c[e];if(!(g in d))return;d=d[g]}c=c[c.length-1];b=$jscomp.IS_SYMBOL_NATIVE&&"es6"===b?d[c]:null;a=a(b);null!=a&&(f?$jscomp.defineProperty($jscomp.polyfills,c,{configurable:!0,writable:!0,value:a}):a!==b&&($jscomp.propertyToPolyfillSymbol[c]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(c):$jscomp.POLYFILL_PREFIX+c,c=
$jscomp.propertyToPolyfillSymbol[c],$jscomp.defineProperty(d,c,{configurable:!0,writable:!0,value:a})))};$jscomp.polyfill("Math.log2",function(f){return f?f:function(a){return Math.log(a)/Math.LN2}},"es6","es3");$jscomp.polyfill("Object.is",function(f){return f?f:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(f){return f?f:function(a,b){var d=this;d instanceof String&&(d=String(d));var c=d.length;b=b||0;for(0>b&&(b=Math.max(b+c,0));b<c;b++){var e=d[b];if(e===a||Object.is(e,a))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(f,a,b){if(null==f)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return f+""};$jscomp.polyfill("String.prototype.includes",function(f){return f?f:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");
function BlitControls(f,a){var b=this;a=a||{};var d=document.getElementById(f),c=d.my_stage||new createjs.Stage(d);c.enableMouseOver(0);c.tickChildren=!1;c.tickEnabled=!1;c.needUpdate=!1;c.snapToPixelsEnabled=!0;c.actives=[];c.activeTweens=[];c.enableDOMEvents(!1);c.forget=!1;platform.isMobile?(createjs.Touch.enable(c),c.enableDOMEvents(!1)):(c.enableDOMEvents(!0),c.enableMouseOver(20));d.my_stage=c;b.mouse_is_over=!1;b.my_scale=1;d.onmouseover=function(){b.mouse_is_over=!0};d.onmouseout=function(){b.mouse_is_over=
!1};c.removeAllChildren();var e=c.addChild(new lib.scene_mute_panel);f=document.documentElement;f=f.requestFullscreen||f.msRequestFullscreen||f.mozRequestFullScreen||f.webkitRequestFullscreen?!0:!1;a.hide_fullscreen&&(f=!1);f?(e.b_fullscreen.visible=!0,e.b_fullscreen.helper=new __utils.ButtonHelper(c,e.b_fullscreen,"norm","over"),e.b_fullscreen.helper.setSounds({mousedown:"snd_click",rollover:"snd_rollover"}),e.b_fullscreen.addEventListener("click",function(g){oSTAGE.is_fullscreen?(BlitWindow.doFullScreenOff(),
e.b_fullscreen.mc_on.visible=!1,e.b_fullscreen.mc_off.visible=!0):(BlitWindow.doFullScreenOn(),e.b_fullscreen.mc_on.visible=!0,e.b_fullscreen.mc_off.visible=!1);c.needUpdate=!0},!1),oSTAGE.is_fullscreen?(e.b_fullscreen.mc_on.visible=!0,e.b_fullscreen.mc_off.visible=!1):(e.b_fullscreen.mc_on.visible=!1,e.b_fullscreen.mc_off.visible=!0)):e.b_fullscreen.visible=!1;0==__snds.isMute()?e.b_mute.mc_mutelines.visible=!0:e.b_mute.mc_mutelines.visible=!1;e.b_mute.visible=!1;e.b_mute.helper=new __utils.ButtonHelper(c,
e.b_mute,"norm","over");e.b_mute.helper.setSounds({mousedown:"snd_click",rollover:"snd_rollover"});e.b_mute.addEventListener("click",function(g){0==__snds.toggleMute()?(e.b_mute.mc_mutelines.visible=!0,c.needUpdate=!0,oUSER.is_mute=!1,b.onUnMute()):(e.b_mute.mc_mutelines.visible=!1,c.needUpdate=!0,oUSER.is_mute=!0,b.onMute());BlitSaver.doSaveData("user",oUSER)},!1);e.b_pause.helper=new __utils.ButtonHelper(c,e.b_pause,"norm","over");e.b_pause.helper.setSounds({mousedown:"snd_click",rollover:"snd_rollover"});
e.b_pause.addEventListener("click",function(g){if(g.currentTarget.helper.enabled){if(b.isPaused)b.onResume();else b.onPause();c.needUpdate=!0}});e.b_fullscreen.x=7.5;e.b_mute.x=7.5;e.b_pause.x=7.5;f?(e.b_fullscreen.y=6.5,e.b_mute.y=66.5,e.b_pause.y=126.5):(e.b_mute.y=6.5,e.b_pause.y=66.5);e.b_pause.alpha=0;c.needUpdate=!0;this.onPause=function(){};this.onUnPause=function(){};this.onMute=function(){};this.onUnMute=function(){};this.doUpdateMute=function(){0==__snds.isMute()?e.b_mute.mc_mutelines.visible=
!0:e.b_mute.mc_mutelines.visible=!1;c.needUpdate=!0};this.doUpdateFullScreen=function(){BlitWindow.doCheckFullScreen()?(e.b_fullscreen.mc_on.visible=!0,e.b_fullscreen.mc_off.visible=!1):(e.b_fullscreen.mc_on.visible=!1,e.b_fullscreen.mc_off.visible=!0);c.needUpdate=!0};this.doResizeUpdate=function(){var g=oSTAGE.scale;d.style.top=0*g+"px";d.style.width=64*g+"px";d.style.height=180*g+"px";d.width=64*g*__utils.getPixelRatio();d.height=180*g*__utils.getPixelRatio();e.my_scale=g;b.my_scale=g;c.scale=
g*__utils.getPixelRatio();c.needUpdate=!0};this.doShowPause=function(){e.b_pause.helper.setEnabled(!0);e.b_pause.visible=!0;platform.isMobile?(e.b_pause.alpha=1,c.needUpdate=!0):(createjs.Tween.get(e.b_pause).to({alpha:1},250),c.activeTweens.push(e.b_pause))};this.doHidePause=function(){e.b_pause.helper.setEnabled(!1);platform.isMobile?(e.b_pause.visible=!1,c.needUpdate=!0):(createjs.Tween.get(e.b_pause).to({alpha:0},250),c.activeTweens.push(e.b_pause))};b.doResizeUpdate();update_queue.push({doResizeUpdate:b.doResizeUpdate});
active_stages.push(c);(function(){actives.push({forget:!1,doUpdate:function(){"running"==createjs.Sound.activePlugin.context.state&&(e.b_mute.visible=!0,this.forget=e.stage.needUpdate=!0)}})})();d.style.display="block"};function LoaderScreen(f,a){f=void 0===f?null:f;a=void 0===a?{}:a;var b=this;trace("LoaderScreen()");var d=(f?document.getElementById(f):document.body).appendChild(document.createElement("div"));d.className="loading_screen";d.style.display="none";var c=d.appendChild(document.createElement("div"));c.className="loading_block";a.logo?(f=c.appendChild(document.createElement("img")),f.className="loading_logo",c.appendChild(document.createElement("br")),f.onload=function(){trace("image loaded");d.style.display=
"block";b.doResizeUpdate()},f.src=a.logo):d.style.display="block";a.msg&&(f=c.appendChild(document.createElement("div")),f.className="loading_msg",f.innerHTML=a.msg,c.appendChild(document.createElement("br")));a=c.appendChild(document.createElement("div"));a.className="loading_bar";var e=a.appendChild(document.createElement("div"));e.className="loading_bar_fill";a.appendChild(document.createElement("div")).className="loading_bar_frame";this.doResizeUpdate=function(){scale=Math.min(document.body.offsetWidth/
640,document.body.offsetHeight/640,1);c.style.top=.5*document.body.offsetHeight+"px";c.style.left=.5*document.body.offsetWidth+"px";c.style.transform="scale("+scale+")";c.style.marginTop=-(.5*c.clientHeight)+"px";c.style.marginLeft=-(.5*c.clientWidth)+"px"};this.doUpdateBar=function(g){e.style.width=Math.max(9,Math.min(100,100*g))+"%"};this.doDestroy=function(){window.removeEventListener("resize",b.doResizeUpdate);window.removeEventListener("orientationchange",b.doResizeUpdate);d.parentNode.removeChild(d);
LOADER=null};window.addEventListener("resize",b.doResizeUpdate);window.addEventListener("orientationchange",b.doResizeUpdate);b.doResizeUpdate()};function BlitPause(f){var a=this;__snds.forceMute();__snds.setPause("music",!0);var b=document.getElementById(f),d=b.my_stage||new createjs.Stage(b);d.enableMouseOver(0);d.tickChildren=!1;d.tickEnabled=!1;d.needUpdate=!1;d.snapToPixelsEnabled=!0;d.actives=[];d.activeTweens=[];d.enableDOMEvents(!1);d.forget=!1;platform.isMobile?(createjs.Touch.enable(d),d.enableDOMEvents(!1)):(d.enableDOMEvents(!0),d.enableMouseOver(20));b.my_stage=d;d.removeAllChildren();var c=d.addChild(new lib.popup_pause);c.my_scale=
null;c.b_exit.helper=new __utils.ButtonHelper(d,c.b_exit,"norm","over");c.b_exit.helper.setSounds({mousedown:"snd_click",rollover:"snd_rollover"});__utils.doText(c.b_exit.txt,oLANG.exit_game,{verticalAlign:"middle"});c.b_exit.addEventListener("click",function(g){a.doDestroy();__snds.setPause("music",!1);__snds.unforceMute();MyGame.doQuit()});c.b_resume.helper=new __utils.ButtonHelper(d,c.b_resume,"norm","over");c.b_resume.helper.setSounds({mousedown:"snd_click",rollover:"snd_rollover"});__utils.doText(c.b_resume.txt,
oLANG.resume_game,{verticalAlign:"middle"});c.b_resume.addEventListener("click",function(g){__snds.setPause("music",!1);__snds.unforceMute();a.doDestroy();MyGame.doResume()});c.b_help.helper=new __utils.ButtonHelper(d,c.b_help,"norm","over");c.b_help.helper.setSounds({mousedown:"snd_click",rollover:"snd_rollover"});__utils.doText(c.b_help.txt,oLANG.help,{verticalAlign:"middle"});c.b_help.addEventListener("click",function(g){e.forget=!0;d.forget=!0;d.enableMouseOver(0);d.removeAllChildren();d.needUpdate=
!0;b.style.backgroundColor="rgba(0,0,0,0)";b.style.display="none";MyGame.doHelp()});MyGame.isReplay&&(c.b_help.visible=!1,c.b_help.mouseEnabled=!1);d.needUpdate=!0;this.doResizeUpdate=function(){b.style.left="0px";b.style.top="0px";b.style.width=oSTAGE.wrapper_width+"px";b.style.height=oSTAGE.wrapper_height+"px";b.width=oSTAGE.wrapper_width*oSTAGE.pixel_ratio;b.height=oSTAGE.wrapper_height*oSTAGE.pixel_ratio;c.x=.5*oSTAGE.game_width|0;c.y=.5*oSTAGE.game_height|0;c.my_scale=oSTAGE.scale;d.scale=oSTAGE.scale*
oSTAGE.pixel_ratio;d.needUpdate=!0};this.doDestroy=function(){oUSER.is_mute||(createjs.Sound.muted=!1);e.forget=!0;d.forget=!0;d.enableMouseOver(0);d.removeAllChildren();d.needUpdate=!0;b.style.backgroundColor="rgba(0,0,0,0)";b.style.display="none"};a.doResizeUpdate();var e={doResizeUpdate:a.doResizeUpdate};update_queue.push(e);active_stages.push(d);b.style.display="block";b.style.backgroundColor="rgba(0,0,0,0.4)"};var debug_line=1;function trace(f,a){if(oCONFIG.debug_trace){try{console.log(f)}catch(d){}if(oCONFIG.debug_panel){var b=document.getElementById("debug");b&&(b.style.display="block",b.innerHTML="error"==a?'<li class="debug_error">'+f+b.innerHTML:"<li>"+f+b.innerHTML)}}}window.onerror=function(f,a,b){oCONFIG.debug_panel&&trace("onerror: "+f+" src:"+a+" @"+b,"error")};
function doFindLinks(f){for(var a=f.text.split(" "),b=f.original_font_size,d=[],c=0;c<a.length;c++){var e=a[c];"http"==e.substring(0,4)&&(e={url:e},d.push(e),a[c]="\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0")}a=a.join(" ");f.text=a;var g=f.getMetrics().lines,h=0;for(c=0;c<g.length;c++){f.text="";for(var l=g[c].split(" "),n=0;n<l.length;n++){e=l[n];if("\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0"==e){var k=f.getBounds();d[h].y=f.y+c*f.lineHeight+.5*b;d[h].x=f.x+k.width+b;h++}f.text+=e;c<l.length&&(f.text+=" ")}}f.text=
a;for(c=0;c<d.length;c++)e=d[c],a=new lib.link_icon,f.parent.addChild(a),a.url=e.url,a.x=e.x,a.y=e.y,a.scaleX=a.scaleY=1.5*b/40,a.helper=new __utils.ButtonHelper(a.stage,a,"norm","over"),a.addEventListener("click",function(m){window.open(m.currentTarget.url)})}var myNav=navigator.userAgent.toLowerCase();
function doGetBrowser(){var f=navigator.userAgent,a=f.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(a[1])){var b=/\brv[ :]+(\d+)/g.exec(f)||[];return{name:"IE",version:b[1]||""}}if("Chrome"===a[1]&&(b=f.match(/\bOPR|Edge\/(\d+)/),null!=b))return{name:"Opera",version:b[1]};a=a[2]?[a[1],a[2]]:[navigator.appName,navigator.appVersion,"-?"];null!=(b=f.match(/version\/(\d+)/i))&&a.splice(1,1,b[1]);return{name:a[0],version:a[1]}}
function is_touch_device(){return"ontouchstart"in window||0<navigator.MaxTouchPoints||0<navigator.msMaxTouchPoints}
var platform={isAndroid:navigator.userAgent.match(/Android/i),isBlackBerry:navigator.userAgent.match(/BlackBerry/i),isiOS:navigator.userAgent.match(/iPhone|iPad|iPod/i),isMobileOpera:navigator.userAgent.match(/Opera Mini/i),isMobileWindows:navigator.userAgent.match(/IEMobile/i),isTouchDevice:is_touch_device(),isMobile:navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/Opera Mini/i)||navigator.userAgent.match(/IEMobile/i),
isSamsungBrowser:navigator.userAgent.match(/SamsungBrowser/i),isIE:-1!=myNav.indexOf("msie")||"Microsoft Internet Explorer"==navigator.appName||"Netscape"==navigator.appName&&null!=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent),isFirefox:navigator.userAgent.match(/Firefox/i),isWindows:-1!=window.navigator.platform.indexOf("Win"),isIE11:!!window.MSInputMethodContext&&!!document.documentMode,isChrome:/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),isSafari:/Safari/.test(navigator.userAgent)&&
/Apple Computer/.test(navigator.vendor)},support={gzip:!1,canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var f=document.createElement("canvas");return!(!window.WebGLRenderingContext||!f.getContext("webgl")&&!f.getContext("experimental-webgl"))}catch(a){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,clamped_array:window.Uint8ClampedArray,zoom:""===document.createElement("detect").style.zoom};
function doPrep(){trace("doPrep()");doFixCompatibilityIssues();doCheckBrowser()?doInit():doBrowserAlert()}
function doFixCompatibilityIssues(){0=="console"in window&&(console={log:function(){},error:function(){}});Math.log2=Math.log2||function(f){return Math.log(f)*Math.LOG2E};window.DOMParser||"undefined"!=typeof window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM");String.prototype.includes||(String.prototype.includes=function(f,a){"number"!==typeof a&&(a=0);return a+f.length>this.length?!1:-1!==this.indexOf(f,a)});Date.now=Date.now||function(){return(new Date).getTime()};0=="performance"in
window&&(window.performance={offset:Date.now(),now:function(){return Date.now()-this.offset}});my_performance={offset:Date.now(),now:function(){return Date.now()-this.offset}};window.requestAnimationFrame||(window.requestAnimationFrame=function(f,a){var b=(new Date).getTime(),d=Math.max(0,16-(b-lastTime));a=window.setTimeout(function(){f(b+d)},d);lastTime=b+d;return a})}
function doCheckBrowser(){var f=!0;support.clamped_array||(f=!1);platform.isIE11&&oCONFIG.blockIE11&&(f=!1);platform.isSamsungBrowser&&(f=!1);oCONFIG.support_checks&&(oCONFIG.support_checks.canvas&&!support.canvas&&(f=!1),oCONFIG.support_checks.webgl&&!support.webgl&&(f=!1));support.canvas&&support.webgl&&support.clamped_array||(f=!1);return f}
function doBrowserAlert(){trace("doBrowserAlert()");var f=document.getElementById("div_errors");f.innerHTML='<table border="0" width="100%" height="100%" cellpadding="40"><tr><td align="center" valign="middle">'+(oLANG.browser_alert.value+'<p><a href="https://www.google.com/chrome/browser/"><img border="0" src="media/browser_icons/icon_chrome.png" width="64" height="64" alt="Chrome"/></a><a href="http://www.mozilla.org/firefox/new/"><img border="0" src="media/browser_icons/icon_firefox.png" width="64" height="64" alt="Firefox"/></a><a href="https://www.microsoft.com/microsoft-edge"><img border="0" src="media/browser_icons/icon_edge.png" width="64" height="64" alt="Edge"/></a><a href="http://www.apple.com/safari/"><img border="0" src="media/browser_icons/icon_safari.png" width="64" height="64" alt="Safari"/></a><a href="http://www.opera.com/"><img border="0" src="media/browser_icons/icon_opera.png" width="64" height="64" alt="Opera"/></a></td></tr></table>');
f.style.display="inline-block"};var BlitStage=function(f,a){if(f.stage){var b=f.stage;b.removeAllChildren();b.actives=[];b.activeTweens=[];b.forget=!1;b.enableMouseOver(0);return b}a.webgl?(b=new createjs.StageGL(f,{transparent:!0,antialias:!0,premultiply:!0}),b.webgl=!0):(b=new createjs.Stage(f),b.webgl=!1);b.actives=[];b.activeTweens=[];b.tickChildren=!1;b.tickEnabled=!1;b.needUpdate=!1;b.forget=!1;b.snapToPixelsEnabled=!1;b.enableDOMEvents(!1);b.enableMouseOver(0);platform.isMobile?(createjs.Touch.enable(b),b.enableDOMEvents(!1)):
(b.enableDOMEvents(!0),b.enableMouseOver(20));b.doResizeUpdate=function(){f.style.left="0px";f.style.top="0px";f.style.width=oSTAGE.wrapper_width+"px";f.style.height=oSTAGE.wrapper_height+"px";f.width=oSTAGE.wrapper_width*oSTAGE.pixel_ratio;f.height=oSTAGE.wrapper_height*oSTAGE.pixel_ratio;this.scale=oSTAGE.scale*oSTAGE.pixel_ratio;this.webgl&&this.updateViewport(f.width,f.height);b.needUpdate=!0};update_queue.push(b);active_stages.push(b);return b};function BlitTimer(f){var a=this;a.is_paused=!0;a.pause_time=0;a.start_time=0;a.game_time=1E3*f.seconds_on_clock;a.time_left=a.game_time;a.current_seconds=0;this.doStart=function(){a.pause_time=0;a.start_time=performance.now();a.game_time=1E3*f.seconds_on_clock;a.time_left=a.game_time;a.current_seconds=0;a.is_paused=!1;a.forget=!1;a.is_active=!0;GameWorld.actives.push(a)};this.doUpdate=function(){a.is_active&&!a.is_paused&&(a.time_left=Math.max(0,a.start_time+a.game_time-performance.now()),Math.ceil(.001*
a.time_left)!=a.current_seconds&&f.callback_update&&f.callback_update(a.time_left,a.time_left/a.game_time),0>=a.time_left&&(a.is_active=!1,a.giving_bonus?(a.giving_bonus=!1,__snds.stopSound("timer"),f.callback_bonuscomplete&&f.callback_bonuscomplete()):f.callback_outoftime&&f.callback_outoftime()))};this.doStop=function(){a.forget=!0;a.is_active=!1};this.doPause=function(){a.pause_time=performance.now();a.is_paused=!0};this.doAddTime=function(b){a.clock_frames+=60*b;a.start_time+=1E3*b};this.doResume=
function(){a.start_time+=performance.now()-a.pause_time;a.is_paused=!1};this.doDestroy=function(){a.forget=!0;a.is_active=!1}};var oTOUCHES=[],_BlitInputs=function(f){var a=this,b=document.getElementById(f.target)||document.documentElement;a.has_tilt=!1;a.using_tilt=!1;a.still_frames=0;a.beta=0;a.lastbeta=0;a.alpha=0;a.lastalpha=0;a.tilt_x=0;a.tilt_y=0;a.allow_key_defaults=f.allowKeyDefaults;a.has_touch=!1;a.touching=!1;a.mouse_is_down=!1;a.mouse_start_x=0;a.mouse_start_y=0;a.start_x=0;a.start_y=0;a.mouse_x=0;a.mouse_y=0;a.frames_down=0;a.using_keyboard=!1;a.right=!1;a.left=!1;a.up=!1;a.dn=!1;a.z=!1;a.x=!1;a.c=!1;a.v=!1;
a.b=!1;a.space=!1;a.keys_down=[];a.propagation_prevention=f.propagationLevel;this.doSetPropagationPrevention=function(k){a.propagation_prevention=k};this.doGetTouches=function(){return oTOUCHES};f=function(k){trace("doMouseDown");a.mouse_is_down||(a.frames_down=0,a.mouse_is_down=!0,a.click_pending=!0,a.mouse_x=(k.clientX-b.offsetLeft)*oSTAGE.scale_inv|0,a.mouse_y=(k.clientY-b.offsetTop)*oSTAGE.scale_inv|0,a.mouse_start_x=a.mouse_x,a.mouse_start_y=a.mouse_y,a.start_x=a.mouse_x,a.start_y=a.mouse_y,
a.speed_x=0,a.speed_y=0,a.client_mouse_x=(k.clientX-b.offsetLeft)*oSTAGE.scale_inv|0,a.client_mouse_y=(k.clientY-b.offsetTop)*oSTAGE.scale_inv|0,a.client_mouse_start_x=a.client_mouse_x,a.client_mouse_start_y=a.client_mouse_y)};var d=function(k){a.client_mouse_x=(k.clientX-b.offsetLeft)*oSTAGE.scale_inv|0;a.client_mouse_y=(k.clientY-b.offsetTop)*oSTAGE.scale_inv|0;a.speed_x=a.client_mouse_x-a.mouse_x;a.speed_y=a.client_mouse_y-a.mouse_y;a.mouse_x=(k.clientX-b.offsetLeft)*oSTAGE.scale_inv|0;a.mouse_y=
(k.clientY-b.offsetTop)*oSTAGE.scale_inv|0},c=function(k){a.mouse_is_down=!1;a.release_pending=!0;a.frames_down=0},e=-1,g=function(k){for(var m=0;m<oTOUCHES.length;m++)if(oTOUCHES[m].id===k)return m;return-1},h=function(k){trace("doTouchStart");var m=k.touches;k.touches?m=k.touches:k.targetTouches?m=k.targetTouches:k.pageX&&(m=[k]);for(var q=0;q<m.length;q++){var r=m[q],u=g(r.identifier),t=(r.clientX-b.offsetLeft)*oSTAGE.scale_inv,v=(r.clientY-b.offsetTop)*oSTAGE.scale_inv;-1==u&&(oTOUCHES.push({id:r.identifier,
frames_down:0,mouse_is_down:!0,click_pending:!0,release_pending:!1,my_x:t,my_y:v,speed_x:0,speed_y:0,start_x:t,start_y:v}),1==oTOUCHES.length&&(e=r.identifier,a.touching=!0,a.frames_down=0,a.mouse_is_down=!0,a.click_pending=!0,a.release_pending=!1,a.mouse_x=t,a.mouse_y=v,a.speed_x=0,a.speed_y=0,a.mouse_start_x=t,a.mouse_start_y=v))}r.target.prohibit_touch&&k.preventDefault();for(m=r.target;m&&m!==document;){if(m.id&&(-1!=m.id.indexOf("_evidon")||-1!=m.id.indexOf("_evh"))){r.target.allow_touch=!0;
break}m=m.parentNode}platform.isTouchDevice&&!r.target.allow_touch&&2<=a.propagation_prevention&&k.preventDefault()},l=function(k){var m;k.changedTouches?m=k.changedTouches:k.targetTouches?m=k.targetTouches:k.pageX&&(m=[k]);for(var q=0;q<m.length;q++){var r=m[q],u=r.identifier,t=g(u),v=(r.clientX-b.offsetLeft)*oSTAGE.scale_inv,w=(r.clientY-b.offsetTop)*oSTAGE.scale_inv,x=v-oTOUCHES[t].my_x,y=w-oTOUCHES[t].my_y;oTOUCHES[t].speed_x=x;oTOUCHES[t].speed_y=y;oTOUCHES[t].my_x=v;oTOUCHES[t].my_y=w;u==e&&
(a.mouse_x=v,a.mouse_y=w,a.speed_x=x,a.speed_y=y)}for(m=r.target;m&&m!==document;){if(m.id&&(-1!=m.id.indexOf("_evidon")||-1!=m.id.indexOf("_evh"))){r.target.allow_touch=!0;break}m=m.parentNode}r.target.prohibit_touch_scroll&&Math.abs(oTOUCHES[0].speed_x)>Math.abs(oTOUCHES[0].speed_y)&&k.preventDefault();r.target.prohibit_touch&&k.preventDefault();(r.target.prohibit_touchmove||platform.isTouchDevice&&!r.target.allow_touch&&1<=a.propagation_prevention)&&k.preventDefault()},n=function(k){switch(k.type){case "touchend":case "touchcancel":case "MSPointerUp":var m;
k.changedTouches?m=k.changedTouches:k.targetTouches?m=k.targetTouches:k.pageX&&(m=[k]);for(k=0;k<m.length;k++){var q=m[k].identifier,r=g(q);q==e&&a.mouse_is_down&&(a.mouse_is_down=!1,a.release_pending=!0,a.frames_down=0,a.touching=!1);-1!=r&&oTOUCHES.splice(r,1)}}};window.onkeydown=function(k){var m=k.which||k.keyCode||k.key;a.allow_key_defaults||(k.preventDefault(),k.stopPropagation());if(!(0<=a.keys_down.indexOf(m)))switch(a.keys_down.push(m),a.using_keyboard=!0,m){case 39:a.right=!0;a.right_pending=
!0;break;case 37:a.left=!0;a.left_pending=!0;break;case 32:a.space=!0;a.space_pending=!0;break;case 38:a.up=!0;a.up_pending=!0;break;case 40:a.dn=!0;a.dn_pending=!0;break;case 90:a.z=!0;a.z_pending=!0;break;case 88:a.x=!0;a.x_pending=!0;break;case 67:a.c=!0;a.c_pending=!0;break;case 86:a.v=!0;a.v_pending=!0;break;case 66:a.b=!0,a.b_pending=!0}};window.onkeyup=function(k){var m=k.which||k.keyCode||k.key;a.allow_key_defaults||(k.preventDefault(),k.stopPropagation());var q=a.keys_down.indexOf(m);0<=
q&&a.keys_down.splice(q,1);switch(m){case 39:a.right=!1;break;case 37:a.left=!1;break;case 32:a.space=!1;a.space_rel_pending=!0;break;case 38:a.up=!1;break;case 40:a.dn=!1;break;case 90:a.z=!1;break;case 88:a.x=!1;break;case 67:a.c=!1;break;case 86:a.v=!1;break;case 66:a.b=!1}a.allow_key_defaults||(k.preventDefault(),k.stopPropagation())};platform.isTouchDevice?window.navigator.msPointerEnabled?(window.addEventListener("MSPointerDown",h,{passive:!1,capture:!1}),window.addEventListener("MSPointerUp",
n,{passive:!1,capture:!1})):(window.addEventListener("touchstart",h,{passive:!1,capture:!1}),window.addEventListener("touchend",n,{passive:!1,capture:!1}),window.addEventListener("touchmove",l,{passive:!1,capture:!1})):(window.onmouseup=document.onblur=c,b.onmousedown=f,b.onmousemove=d)};var _BlitSaver=function(f){window.localStorageAlias=window.localStorage;this.useCookies=!1;window.localStorage&&"undefined"!=window.localStorage||(window.localStorageAlias={},window.localStorageAlias.removeItem=function(){});this.doSaveData=function(a,b){try{a=f.game_key+"_"+a,window.localStorageAlias[a]=JSON.stringify(b)}catch(d){}};this.doGetData=function(a){try{a=f.game_key+"_"+a;var b=window.localStorageAlias[a];return b?""!=b?JSON.parse(b):null:null}catch(d){}};this.doClearData=function(a){a=
f.game_key+"_"+a;window.localStorageAlias.removeItem(a)}};var MaterialsLibrary={};function ButtonHelper(f,a,b,d,c,e,g,h){a.addEventListener&&(this.target=a,this.snds={},this.my_stage=f,this.normLabel=null==b?"norm":b,this.overLabel=null==d?"over":d,this.downLabel=null==c?"over":c,this.play=e,this._enabled=this._isOver=this._isPressed=!1,a.mouseChildren=!1,this.enabled=!0,g&&(h&&(g.actionsEnabled=!1,g.gotoAndStop&&g.gotoAndStop(h)),a.hitArea=g))}var p=ButtonHelper.prototype;p.setParams=function(f){for(var a in f)this[a]=f[a]};
p.setSounds=function(f){for(var a in f)this.snds[a]=f[a]};
p.setEnabled=function(f){if(f!=this._enabled){var a=this.target;(this._enabled=f)?(a.cursor="pointer",a.addEventListener("rollover",this),a.addEventListener("rollout",this),a.addEventListener("mousedown",this),a.addEventListener("pressup",this)):(a.cursor=null,a.removeEventListener("rollover",this),a.removeEventListener("rollout",this),a.removeEventListener("mousedown",this),a.removeEventListener("pressup",this));this._isOver=this._isPressed=!1}};p.getEnabled=function(){return this._enabled};
try{Object.defineProperties(p,{enabled:{get:p.getEnabled,set:p.setEnabled}})}catch(f){}p.toString=function(){return"[ButtonHelper]"};
p.handleEvent=function(f){var a=this.target;f=f.type;this._enabled&&("mousedown"==f?(this._isPressed=!0,f=this.downLabel,this.snds.mousedown&&__snds.playSound(this.snds.mousedown,"interface")):"pressup"==f?(this._isPressed=!1,f=this._isOver?this.overLabel:this.normLabel):"rollover"==f?(this._isOver=!0,f=this._isPressed?this.downLabel:this.overLabel,this.snds.rollover&&__snds.playSound(this.snds.rollover,"interface")):(this._isOver=!1,f=this._isPressed?this.overLabel:this.normLabel),this.play?a.gotoAndPlay&&
a.gotoAndPlay(f):a.gotoAndStop&&a.gotoAndStop(f),a.cacheID&&!this.ignore_cache&&__utils.doCache(a,oSTAGE.cache_scale),this.my_stage&&(this.my_stage.needUpdate=!0))};
var BlitTools=function(){var f=this;f.firefox_font_shift=.1;this.doInitResizer=function(a){var b=document.createElement("div");b.id="resizer";b.w=null;b.h=null;b.scroll=null;b.keep=!0;b.doUpdate=function(){if(this.w!=window.innerWidth||this.h!=window.innerHeight||this.scroll!=document.documentElement.scrollTop)this.w=window.innerWidth,this.h=window.innerHeight,this.scroll=document.documentElement.scrollTop,window.scrollTo(0,0),a(),platform.isMobile&&setTimeout(function(){window.scrollTo(0,0);a()},
250)};actives.push(b);window.addEventListener("orientationchange",function(){b.w=0;b.h=0})};this.doInitFocusManager=function(a,b){var d=!1,c=function(){d||(a&&a(),d=!0)},e=function(){d&&(b&&b(),d=!1)},g=f.doGetHiddenProp();if(g){var h=g.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(h,function(l){document[g]?c():e()})}window.addEventListener("blur",c);window.addEventListener("focus",e)};this.doGetHiddenProp=function(){var a=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";
for(var b=0;b<a.length;b++)if(a[b]+"Hidden"in document)return a[b]+"Hidden";return null};this.ButtonHelper=ButtonHelper;this.doUpdateCreateJsStage=function(a,b){if(a.needUpdate||0<a.activeTweens.length||0<a.actives.length||0<a.updateFrames){a.updateFrames=Math.max(0,a.updateFrames-1);for(var d=a.actives.length-1;0<=d;d--){var c=a.actives[d];if(!c.me||a.contains(c.me)&&!c.need_destroy)c.need_purged?a.actives.splice(d,1):c.update_function?c.update_function(c):c.doUpdate&&c.doUpdate();else{try{c.me.parent.removeChild(c.me)}catch(e){}a.actives.splice(d,
1)}}for(d=a.activeTweens.length-1;0<=d;d--)createjs.Tween.hasActiveTweens(a.activeTweens[d])||a.activeTweens.splice(d,1);b?a.update(b):a.update();a.needUpdate=!1}};this.createCORSRequest=function(a,b){var d=new XMLHttpRequest;"withCredentials"in d?d.open(a,b,!0):"undefined"!=typeof XDomainRequest?(d=new XDomainRequest,d.open(a,b)):d=null;return d};this.doLoad3dAssets=function(a,b){if(0==a.manifest.length)a.progress=1,a.complete=!0;else if(!a.started){a.started=!0;var d=a.manifest,c=new THREE.LoadingManager;
c.onLoad=function(){c.doCheckLoading()};c.onError=function(){trace("load error")};c.onProgress=function(n,k,m){a.progress=Math.max(a.progress,k/m);for(var q=0;q<d.length;q++)if(d[q].src==n){d.splice(q,1);break}k==m&&c.doCheckLoading()};c.doCheckLoading=function(){a.loaded||0!=c.items_to_process||0!=d.length||(a.progress=1,a.loaded=!0)};c.items_to_process=d.length;for(var e=0;e<d.length;e++){var g=d[e];switch(g.type){case "json":var h=f.createCORSRequest("GET",g.src);if(!h)return;h.onload=function(){var n=
JSON.parse(h.responseText);b[this.name]=n}.bind({name:g.name});h.onerror=function(){trace("error loading data")};h.send();break;case "animated_fbx":var l=new THREE.FBXLoader(c);l.load(g.src,function(n){var k=this.data;n.traverse(function(m){m.isMesh&&(k.flat_shading?m.material=new THREE.MeshBasicMaterial({toneMapped:!1,map:m.material.map,blending:THREE.NoBlending,fog:!1,side:THREE.FrontSide,vertexColors:k.vertexColors}):(m.material.side=THREE.FrontSide,m.material.vertexColors=k.vertexColors),m.material.needsUpdate=
!0)});b[k.id]=n;c.items_to_process--;c.doCheckLoading()}.bind({data:g}));break;case "static_fbx":l=new THREE.FBXLoader(c);l.load(g.src,function(n){for(var k=this.data,m=0;m<n.children.length;m++){var q=n.children[m];q.name&&(q.traverse(function(r){if(r instanceof THREE.Mesh&&r.material.map){r.material.map.wrapS=THREE.RepeatWrapping;r.material.map.wrapT=THREE.RepeatWrapping;r.material.map.encoding=THREE.LinearEncoding;k.pixelated?(r.material.map.minFilter=THREE.NearestFilter,r.material.map.magFilter=
THREE.NearestFilter):(r.material.map.minFilter=platform.isMobile?THREE.NearestMipMapNearestFilter:THREE.LinearMipMapNearestFilter,r.material.map.magFilter=THREE.LinearFilter);if(k.flat_shading){var u=r.material.map.uuid;MaterialsLibrary[u]||(MaterialsLibrary[u]=new THREE.MeshBasicMaterial({map:r.material.map,blending:THREE.NoBlending,transparent:!1,opacity:1,fog:!1,side:THREE.FrontSide}));r.material=MaterialsLibrary[u]}r.material.needsUpdate=!0}}),b[q.name]=q)}c.items_to_process--;c.doCheckLoading()}.bind({data:g}));
break;case "static":l=new THREE.ObjectLoader(c);l.load(g.src,function(n){for(var k=this.data,m=0;m<n.children.length;m++){var q=n.children[m];if(q.name)if(q.name.includes(".DAE")||q.name.includes("ROOT"))for(var r=0;r<q.children.length;r++){var u=q.children[r];b[u.name]=u}else q.traverse(function(t){t instanceof THREE.Mesh&&t.material.map&&(t.material.map.wrapS=THREE.RepeatWrapping,t.material.map.wrapT=THREE.RepeatWrapping,k.pixelated?(t.material.map.minFilter=THREE.NearestFilter,t.material.map.magFilter=
THREE.NearestFilter):platform.isMobile?(t.material.map.minFilter=THREE.NearestMipMapNearestFilter,t.material.map.magFilter=THREE.NearestFilter):(t.material.map.minFilter=THREE.LinearMipMapNearestFilter,t.material.map.magFilter=THREE.LinearFilter))}),b[q.name]=q}c.items_to_process--;c.doCheckLoading()}.bind({name:g.name}));break;case "animated_json":100>THREE.REVISION?(l=new THREE.JSONLoader(c),l.load(g.src,function(n,k){my_data.pixelated?(k[0].map.minFilter=THREE.NearestFilter,k[0].map.magFilter=
THREE.NearestFilter):platform.isMobile?(k[0].map.minFilter=THREE.NearestMipMapNearestFilter,k[0].map.magFilter=THREE.NearestFilter):(k[0].map.minFilter=THREE.NearestMipMapNearestFilter,k[0].map.minFilter=THREE.LinearFilter);k[0].map.wrapS=THREE.ClampToEdgeWrapping;k[0].map.wrapT=THREE.ClampToEdgeWrapping;k=new THREE.MeshBasicMaterial({map:k[0].map});k.skinning=!0;b[this.name]=new THREE.SkinnedMesh(n,k);c.items_to_process--;c.doCheckLoading()}.bind({name:g.name}))):(l=new THREE.LegacyJSONLoader(c),
l.load(g.src,function(n,k){my_data.pixelated?(k[0].map.minFilter=THREE.NearestFilter,k[0].map.magFilter=THREE.NearestFilter):platform.isMobile?(k[0].map.minFilter=THREE.NearestMipMapNearestFilter,k[0].map.magFilter=THREE.NearestFilter):(k[0].map.minFilter=THREE.NearestMipMapNearestFilter,k[0].map.minFilter=THREE.LinearFilter);k[0].map.wrapS=THREE.ClampToEdgeWrapping;k[0].map.wrapT=THREE.ClampToEdgeWrapping;k=new THREE.MeshBasicMaterial({map:k[0].map});k.skinning=!0;n=(new THREE.BufferGeometry).fromGeometry(n);
b[this.name]=new THREE.SkinnedMesh(n,k);c.items_to_process--;c.doCheckLoading()}.bind({name:g.name})));break;case "font":l=new THREE.FontLoader(c);l.load(g.src,function(n){b[this.name]=n;c.items_to_process--;c.doCheckLoading()}.bind({name:g.name}));break;case "sprite":l=new THREE.TextureLoader(c);l.load(g.src,function(n){n=new THREE.SpriteMaterial({map:n,color:16777215,transparent:!0});n=new THREE.Sprite(n);b[this.name]=n;c.items_to_process--;c.doCheckLoading()}.bind({name:g.name}));break;case "texture":l=
new THREE.TextureLoader(c);l.load(g.src,function(n){var k=this.data;k.wrapping&&(n.wrapS=THREE.RepeatWrapping,n.wrapT=THREE.RepeatWrapping);b[k.name]=n;c.items_to_process--;c.doCheckLoading()}.bind({data:g}));break;case "skybox":l=new THREE.CubeTextureLoader(c),l.setPath("media/models/skyboxes/"+g.name+"/"),l.load("right.jpg left.jpg up.jpg down.jpg front.jpg back.jpg".split(" "),function(n){platform.isMobile?(n.magFilter=THREE.NearestFilter,n.minFilter=THREE.NearestMipMapNearestFilter):n.minFilter=
THREE.LinearFilter;b[this.name]=n;c.items_to_process--;c.doCheckLoading()}.bind({name:g.name}))}}}};this.doLoadAssets=function(a){var b=this;if(0==a.manifest.length)a.progress=1,a.complete=!0;else if(!a.started){a.started=!0;for(var d=0;d<a.manifest.length;d++)try{for(var c=a.manifest[d].data.audioSprite,e=0;e<c.length;e++)c[e].duration-=c[e].startTime}catch(l){}images=images||{};var g=document.documentElement.appendChild(document.createElement("div"));g.className="loader_dummy";g.id="loader_dummy";
var h=new createjs.LoadQueue(!1);h.installPlugin(createjs.Sound);h.removeEventListener("fileload",b.onFileLoad);h.removeEventListener("progress",b.onProgress);h.removeEventListener("complete",b.onComplete);h.removeEventListener("error",b.onError);this.onFileLoad=function(l){if("javascript"==l.item.type){var n=document.createElement("script");n.setAttribute("type","text/javascript");n.setAttribute("src",l.item.src);document.getElementsByTagName("head")[0].appendChild(n)}else"image"==l.item.type||"svg"==
l.item.type?images[l.item.id]=l.result:"text"==l.item.type&&(n=g.appendChild(document.createElement("div")),n.className="general_absolute",n.style.fontFamily=l.item.id,n.style.color="white",n.style.visibility="hidden",n.innerHTML="-")};this.onError=function(l){trace(l.title+": "+l.data.src);try{assets_retry.manifest.push({src:l.data.src,id:l.data.id})}catch(n){}};this.onProgress=function(l){a.progress=l.loaded};this.onComplete=function(l){a.progress=1;a.loaded=!0;a.loadTime=window.performance.now();
h.removeEventListener("fileload",b.onFileLoad);h.removeEventListener("progress",b.onProgress);h.removeEventListener("complete",b.onComplete);h.removeEventListener("error",b.onError);__utils.doDestroyElement(document.getElementById("loader_dummy"))};h.addEventListener("fileload",b.onFileLoad);h.addEventListener("progress",b.onProgress);h.addEventListener("complete",b.onComplete);h.addEventListener("error",b.onError);h.loadManifest(a.manifest)}};this.doFade=function(a,b,d,c){a.my_opacity=Number(a.style.opacity);
a.to_opacity=b;a.step=(b-a.my_opacity)/(60*d);a.forget=!1;a.doUpdate=function(){this.my_opacity=0<this.step?Math.min(this.to_opacity,this.my_opacity+this.step):Math.max(this.to_opacity,this.my_opacity+this.step);this.style.opacity=this.my_opacity;this.my_opacity==this.to_opacity&&(this.forget=!0,c&&c())};actives.push(a)};this.doFadeTo=function(a,b){a.style.display="block";a.style.opacity=0;a.mode=1;a.my_opacity=0;a.doUpdate=function(){switch(this.mode){case 1:this.my_opacity+=.05;this.style.opacity=
Math.min(1,Math.max(0,this.my_opacity));1<=this.my_opacity&&(this.mode=2,b&&b());break;case 2:this.my_opacity-=.05,this.style.opacity=Math.max(0,Math.min(1,this.my_opacity)),0>=this.my_opacity&&(this.purge=!0,this.style.display="none")}};actives.push(a)};this.NewPulse=function(a,b){var d=this;b=b||{};var c=b.seed||0,e=b.ease||1,g=b.ease_speed||1;d.value=0;d.value_normal=0;this.reset=function(h){d.value=Math.sin(__utils.radFromDeg(h.seed||0));d.value_normal=.5+.5*d.value};this.update=function(){c+=
a;360<=c&&(c-=360);d.value=Math.sin(__utils.radFromDeg(c))*e;d.value_normal=.5+.5*d.value*e;e=Math.min(1,e+g)}};this.dataURItoBlob=function(a){var b=-1!==a.split(",")[0].indexOf("base64")?atob(a.split(",")[1]):decodeURI(a.split(",")[1]);a=a.split(",")[0].split(":")[1].split(";")[0];for(var d=[],c=0;c<b.length;c++)d[c]=b.charCodeAt(c);return new Blob([new Uint8Array(d)],{type:a})};this.ordinal_suffix_of=function(a){var b=a%10;a%=100;return 1==b&&11!=a?"st":2==b&&12!=a?"nd":3==b&&13!=a?"rd":"th"};this.doFader=
function(){fader.style.display="inline-block";fader.style.opacity=1;updateQueue.push({keep:!0,opacity:1.5,update_function:function(){this.opacity-=.1;fader.style.opacity=Math.max(0,Math.min(1,this.opacity));0>=this.opacity&&(this.keep=!1,fader.style.display="none")}})};this.doGetBrowser=function(){var a=navigator.userAgent,b=a.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(b[1])){var d=/\brv[ :]+(\d+)/g.exec(a)||[];return"IE "+(d[1]||"")}if("Chrome"===
b[1]&&(d=a.match(/\bOPR\/(\d+)/),null!=d))return"Opera "+d[1];b=b[2]?[b[1],b[2]]:[navigator.appName,navigator.appVersion,"-?"];null!=(d=a.match(/version\/(\d+)/i))&&b.splice(1,1,d[1]);return b.join(" ")};this.getCSSPPI=function(){var a=document.createElement("div");a.style.width="1in";var b=document.getElementsByTagName("body")[0];b.appendChild(a);var d=a.offsetWidth;b.removeChild(a);return parseFloat(d)};this.getPPI=function(){var a=document.createElement("div");a.style.width="1in";var b=document.getElementsByTagName("body")[0];
b.appendChild(a);var d=a.offsetWidth*(window.devicePixelRatio||1);b.removeChild(a);return parseFloat(d)};this.getPixelRatio=function(){var a=document.createElement("canvas").getContext("2d");return(window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1)};this.doGetLanguage=function(){var a;navigator&&navigator.userAgent&&(a=navigator.userAgent.match(/android.*\W(\w\w)-(\w\w)\W/i))&&
(a=a[1]);!a&&navigator&&(navigator.language?a=navigator.language:navigator.browserLanguage?a=navigator.browserLanguage:navigator.systemLanguage?a=navigator.systemLanguage:navigator.userLanguage&&(a=navigator.userLanguage),a=a.substr(0,2));return a};this.getQueryString=function(){var a={},b=window.location.search.substring(1);1>b.length&&null!=window.location.toString().split("%3F")[1]&&(b=window.location.toString().split("%3F")[1]);b=b.split("&");for(var d=0;d<b.length;d++){var c=b[d].split("=");
"undefined"===typeof a[c[0]]?a[c[0]]=c[1]:"string"===typeof a[c[0]]?a[c[0]]=[a[c[0]],c[1]]:a[c[0]].push(c[1])}return a};this.s4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};this.guid=function(){return this.s4()+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+this.s4()+this.s4()};this.formatDate=function(a,b,d){function c(r,u){r+="";for(u=u||2;r.length<u;)r="0"+r;return r}var e="\x00 January February March April May June July August September October November December".split(" "),
g="\u0001 Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),h="\u0002 Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),l="\u0003 Sun Mon Tue Wed Thu Fri Sat".split(" "),n=d?a.getUTCFullYear():a.getFullYear();b=b.replace(/(^|[^\\])yyyy+/g,"$1"+n);b=b.replace(/(^|[^\\])yy/g,"$1"+n.toString().substr(2,2));b=b.replace(/(^|[^\\])y/g,"$1"+n);n=(d?a.getUTCMonth():a.getMonth())+1;b=b.replace(/(^|[^\\])MMMM+/g,"$1"+e[0]);b=b.replace(/(^|[^\\])MMM/g,"$1"+g[0]);b=b.replace(/(^|[^\\])MM/g,
"$1"+c(n));b=b.replace(/(^|[^\\])M/g,"$1"+n);var k=d?a.getUTCDate():a.getDate();b=b.replace(/(^|[^\\])dddd+/g,"$1"+h[0]);b=b.replace(/(^|[^\\])ddd/g,"$1"+l[0]);b=b.replace(/(^|[^\\])dd/g,"$1"+c(k));b=b.replace(/(^|[^\\])d/g,"$1"+k);k=d?a.getUTCHours():a.getHours();b=b.replace(/(^|[^\\])HH+/g,"$1"+c(k));b=b.replace(/(^|[^\\])H/g,"$1"+k);var m=12<k?k-12:0==k?12:k;b=b.replace(/(^|[^\\])hh+/g,"$1"+c(m));b=b.replace(/(^|[^\\])h/g,"$1"+m);m=d?a.getUTCMinutes():a.getMinutes();b=b.replace(/(^|[^\\])mm+/g,
"$1"+c(m));b=b.replace(/(^|[^\\])m/g,"$1"+m);m=d?a.getUTCSeconds():a.getSeconds();b=b.replace(/(^|[^\\])ss+/g,"$1"+c(m));b=b.replace(/(^|[^\\])s/g,"$1"+m);m=d?a.getUTCMilliseconds():a.getMilliseconds();b=b.replace(/(^|[^\\])fff+/g,"$1"+c(m,3));m=Math.round(m/10);b=b.replace(/(^|[^\\])ff/g,"$1"+c(m));m=Math.round(m/10);b=b.replace(/(^|[^\\])f/g,"$1"+m);k=12>k?"AM":"PM";b=b.replace(/(^|[^\\])TT+/g,"$1"+k);b=b.replace(/(^|[^\\])T/g,"$1"+k.charAt(0));k=k.toLowerCase();b=b.replace(/(^|[^\\])tt+/g,"$1"+
k);b=b.replace(/(^|[^\\])t/g,"$1"+k.charAt(0));k=-a.getTimezoneOffset();m=d||!k?"Z":0<k?"+":"-";if(!d){k=Math.abs(k);var q=k%60;m+=c(Math.floor(k/60))+":"+c(q)}b=b.replace(/(^|[^\\])K/g,"$1"+m);a=(d?a.getUTCDay():a.getDay())+1;b=b.replace(new RegExp(h[0],"g"),h[a]);b=b.replace(new RegExp(l[0],"g"),l[a]);b=b.replace(new RegExp(e[0],"g"),e[n]);b=b.replace(new RegExp(g[0],"g"),g[n]);return b=b.replace(/\\(.)/g,"$1")};this.getDayNumber=function(){var a=new Date(2014,0,1);a=(new Date).getTime()-a.getTime();
return Math.ceil(a/864E5)};this.doGoFullScreen=function(){var a=document.documentElement;(a.requestFullScreen||a.webkitRequestFullScreen||a.mozRequestFullScreen).call(a)};this.doCheckFullScreen=function(){trace("doCheckFullScreen");return document.fullscreenEnabled||document.mozFullscreenEnabled||document.webkitIsFullScreen?!0:!1};this.doFullScreenOn=function(){var a=document.documentElement;a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?
a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen();oSTAGE.is_fullscreen=!0};this.doFullScreenOff=function(){document.exitFullscreen?document.exitFullscreen():document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();oSTAGE.is_fullscreen=!1};this.doFadeandDestroy=function(a){a=a.currentTarget;a.alpha-=
.1;0>=a.alpha&&a.parent.removeChild(a)};this.doGetPOT=function(a){return Math.pow(2,Math.ceil(Math.log(a)/Math.log(2)))};this.doCache=function(a,b){b||(b=oSTAGE.cache_scale||oSTAGE.scale);a.regX|=0;a.regY|=0;a.x|=0;a.y|=0;a.uncache();var d=a.getBounds(),c=a.nominalBounds,e={};if(a.force_bounds)e.x=a.force_bounds.x,e.y=a.force_bounds.y,e.width=a.force_bounds.width,e.height=a.force_bounds.height;else if(!a.force_bounds&&d&&c)e.x=Math.min(c.x,d.x),e.y=Math.min(c.y,d.y),e.width=Math.max(c.width,d.width),
e.height=Math.max(c.height,d.height);else if(d)e=d;else if(c)e=c;else return;d=!1;a.stage&&a.stage._webGLContext&&(d=!0);d?a.cache(e.x,e.y,__utils.doGetPOT(e.width),__utils.doGetPOT(e.height),b):a.cache(e.x,e.y,Math.ceil(e.width),Math.ceil(e.height),b)};this.doLerp=function(a,b,d){return a+d*(b-a)};this.doRound=function(a,b){return Number(Math.round(a+"e"+b)+"e-"+b)};this.doGetIntersect=function(a,b,d,c,e,g,h,l){if(a===d&&b===c||e===h&&g===l)return!1;var n=(l-g)*(d-a)-(h-e)*(c-b);if(0===n)return!1;
h=((h-e)*(b-g)-(l-g)*(a-e))/n;e=((d-a)*(b-g)-(c-b)*(a-e))/n;return 0>h||1<h||0>e||1<e?!1:{x:a+h*(d-a),y:b+h*(c-b)}};this.doGetDistance=function(a,b,d,c){a-=d;b-=c;return Math.sqrt(a*a+b*b)};this.doGetAngle=function(a,b,d,c){a=Math.atan2(c-b,d-a);return a*=180/Math.PI};this.degFromRad=function(a){return 180/Math.PI*a};this.radFromDeg=function(a){return Math.PI/180*a};this.getRandomArbitrary=function(a,b){return Math.random()*(b-a)+a};this.getRandomInt=function(a,b){return Math.floor(Math.random()*
(b-a+1))+a};this.doLerp=function(a,b,d){return(1-d)*a+d*b};this.doRandomizeArray=function(a){a=a.slice();for(var b=[];0<a.length;){var d=Math.floor(Math.random()*a.length),c=a[d];a.splice(d,1);b.push(c)}return b};this.doClearTimeouts=function(){for(var a=0;a<timeouts.length;a++)clearTimeout(timeouts[a]);timeouts=[]};this.getPointInBetweenByPerc=function(a,b,d){b=b.clone().sub(a);var c=b.length();b=b.normalize().multiplyScalar(c*d);return a.clone().add(b)};this.doText=function(a,b,d){d=d||{};if(a.my_origin)a.x=
a.my_origin.x,a.y=a.my_origin.y;else{var c=a.getBounds()||{height:0};a.my_origin={x:a.x,y:a.y,h:c.height,lineHeight:a.lineHeight,center:a.y+.5*c.height}}if("object"!==typeof b||null===b)b={value:b};c=b.value||b.txt;var e=platform.isMobile?b.overrides_mobile:b.overrides_desktop;if(e)for(var g in e)switch(g){case "adjustX":b.regX=-e[g];break;case "adjustY":b.regY=-e[g];break;default:b[g]=e[g]}for(g in b)"value"!=g&&(a[g]=b[g]);c||0==c||""==c||(c="MISSING TEXT",a.color="#FF0000");var h=a.font,l=h.indexOf("'"),
n=h.lastIndexOf("'");a.original_font_family||(a.original_font_family=h.slice(l+1,n));g=a.original_font_family;var k=0,m=h.indexOf("px");for(e=m;0<=e;e--)if(" "==h[e]){k=e;break}a.original_font_size||(a.original_font_size=Number(h.slice(k,m)));e=a.original_font_size;h=h.substring(0,k)+h.substring(m+2,l)+h.substring(n,h.length-1);h=h.split(" ").join("");a.original_font_weight||(a.original_font_weight=h);h=a.original_font_weight;a.fontFamily&&(g=a.fontFamily);a.fontWeight&&(h=a.fontWeight);b.fontSize&&
(-1!=b.fontSize.indexOf("px")?e=b.fontSize.split("px")[0]:-1!=b.fontSize.indexOf("%")&&(l=.01*b.fontSize.split("%")[0],e*=l,a.lineHeight=a.my_origin.lineHeight*l));b.lineHeight&&(-1!=String(b.lineHeight).indexOf("%")?(b=Number(.01*String(b.lineHeight).split("%")[0]),a.lineHeight=a.my_origin.lineHeight*b):a.lineHeight=Number(b.lineHeight));a.font_size=e;a.font=1<=h.length?h+" "+e+"px '"+g+"'":e+"px '"+g+"'";c=String(c);b=/<br>/g;c=c.replace(b,"\n");b=/\{\*br\*\}/g;c=c.replace(b,"\n");b=/\{\*p\*\}/g;
c=c.replace(b,"\n\n");b=/<p>/g;c=c.replace(b,"\n\n");a.text=c;c=a.getMetrics().lines.length;switch(d.verticalAlign){case "top":a.textBaseline="top";break;case "bottom":a.textBaseline="top";a.y-=Math.max(0,c)*a.lineHeight;break;case "true_middle":a.textBaseline="top";a.y-=Math.max(0,c)*a.lineHeight*.5;break;case "middle":case void 0:case null:a.textBaseline="middle",a.y+=.5*a.lineHeight-Math.max(0,c-1)*a.lineHeight*.5}a.x|=0;a.y|=0};this.doSubText=function(a,b,d){a=String(a);return a=a.replace(new RegExp(b,
"g"),d)};this.doSubValue=function(a,b){a=String(a);return a=a.replace(/\{\*var\*\}/g,b)};this.doSubValue2=function(a,b){a=String(a);return a=a.replace(/\{\*var2\*\}/g,b)};this.doHTMLText=function(a,b,d){if("object"!==typeof b||null===b)b={value:b};var c=b.value,e=a.my_computed_style||window.getComputedStyle(a,null)||a.style;a.my_fontsize=parseFloat(e["font-size"]||e.fontSize);for(var g in b)"value"!=g&&("fontSize"==g?(b[g].indexOf("%"),a.style.fontSize=b[g]):a.style[g]=b[g]);c||0==c||(c="MISSING TEXT",
a.style.color="#FF0000");e="";b.icon&&(e+='<i class="'+b.icon+'"></i> ');a.innerHTML=d?a.innerHTML+(e+c):e+c};this.doFormatCurrency=function(a){var b=oLANG.comma.value,d=oLANG.currency.value;a=__utils.doRound(a,2);a=String(a).split(".");for(var c=a[0],e="",g=0,h=c.length-1;0<=h;h--)e=c.charAt(h)+e,g++,3==g&&(g=0,e=b+e);e.charAt(0)==b&&(e=e.substring(1,e.length));e=d+e;1<a.length&&(e+="."+a[1]);return e};this.doFormatNumber=function(a,b){b="undefined"!==typeof b?b:oLANG.comma;a=Math.floor(a);a=String(a);
for(var d="",c=0,e=a.length-1;0<=e;e--)d=a.charAt(e)+d,c++,3==c&&(c=0,d=b+d);d.charAt(0)==b&&(d=d.substring(1,d.length));return""+d};this.doFormatTime=function(a){var b=Math.floor(.001*a),d=Math.floor(b/60);return{m:d,s:b-60*d,h:Math.floor(.1*(a-1E3*b))}};this.doCreateTextArea=function(a,b,d,c,e,g,h,l,n,k,m){var q=document.createElement("div");q.setAttribute("id",a);null!=b&&"body"!=b?document.getElementById(b).appendChild(q):document.body.appendChild(q);n||(h+=";-webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;cursor:default;");
q.setAttribute("style",h);q.style.position="absolute";q.style.zIndex="99999";k?(a=function(){q.style.width=e*window.innerWidth+"px";q.style.height=g*window.innerHeight+"px";q.style.left=d*window.innerWidth+"px";q.style.top=c*window.innerHeight+"px"},a(),window.addEventListener("resize",a)):(q.style.width=e+"px",q.style.height=g+"px",q.style.left=d+"px",q.style.top=c+"px");q.style.overflowY=l?"auto":"hidden";q.innerHTML=m;return q};this.doChangeElement=function(a,b,d,c,e,g){a=null!=a?a:document.getElementById(b);
a.style.width=e+"px";a.style.height=g+"px";a.style.marginLeft=d+"px";a.style.marginTop=c+"px"};this.doDestroyElement=function(a){"string"==typeof a&&(a=document.getElementById(a));a&&(this.doDestroyAllChildren(a),a.parentNode.removeChild(a))};this.doDestroyAllChildren=function(a){if(a)for(;0<a.childNodes.length;)a.removeChild(a.childNodes[0])};this.addDomObject=function(a,b,d,c,e,g){var h=doWrappertoScreen(b,d);a.style.left=h.x+"px";a.style.top=h.y+"px";0!=c&&(a.style.width=c*oSTAGE.scale+"px");0!=
e&&(a.style.height=e*oSTAGE.scale+"px");h={};h.obj=a;h.x=b;h.y=d;h.w=c;h.h=e;h.font_size=g;dom_objects.push(h)};this.doClearEventListeners=function(a){for(var b=0;b<a.length;b++)a[b].removeAllEventListeners()};this.addSourceToVideo=function(a,b,d){var c=document.createElement("source");c.src=b;c.type=d;a.appendChild(c)};this.canPlayVideoInline=function(){return navigator.userAgent.match(/(iPhone|iPod)/g)?"playsInline"in document.createElement("video"):!0}};var RESIZER,_BlitFader=function(f){f=void 0===f?{}:f;var a=document.getElementById(f.div_name);a.style.display="none";a.style.opacity=0;this.doTransitionTo=function(b,d,c,e){callbackMid=d||function(){};e=e||function(){};a.style.display="block";a.style.opacity=0;createjs.Tween.get(a.style,{override:!0}).to({opacity:1},b).call(callbackMid).to({opacity:0},c).call(function(){e();a.style.opacity=1;a.style.display="none"})};this.doFadeSet=function(b){a.style.display=0==b?"none":"block";a.style.opacity=
b};this.doFadeIn=function(b,d){d=d||function(){};createjs.Tween.get(a,{override:!0}).to({opacity:0},b).call(function(){a.style.display="none";d()})};this.doFadeOut=function(b,d){d=d||function(){};a.style.display="block";a.style.opacity=0;createjs.Tween.get(a,{override:!0}).to({opacity:1},b).call(d)};this.doFadeTo=function(b,d,c){c=c||function(){};a.style.display="block";createjs.Tween.get(a,{override:!0}).to({opacity:b},d).call(function(){c();a.style.opacity=1;a.style.display=0!=b?"block":"none"})}},
_BlitWindow=function(f){var a=this;document.addEventListener("gesturestart",function(b){b.preventDefault()});this.doInitResizer=function(b){RESIZER={id:"resizer",w:null,h:null,scroll:null,keep:!0,was_fullscreen:!1,is_fullscreen:!1,repeat_frame:0,needUpdate:!1,stable_frames:0,skip_cover:!1,update_when_stable:!1,doUpdate:function(){var d=!1;if(this.w!=window.innerWidth||this.h!=window.innerHeight||this.scroll!=document.documentElement.scrollTop){this.stable_frames=0;this.update_when_stable=!0;if(this.w!=
window.innerWidth||this.h!=window.innerHeight)if(RESIZER.skip_cover)RESIZER.skip_cover=!1;else try{document.getElementById("cover").style.display="block"}catch(c){}this.w=window.innerWidth;this.h=window.innerHeight;this.scroll=document.documentElement.scrollTop}else this.update_when_stable&&(this.stable_frames++,10<this.stable_frames&&(this.update_when_stable=!1,this.repeat_frame=5,d=!0));if(this.needUpdate||d||0<this.repeat_frame){this.stable_frames=0;this.needUpdate=!1;this.repeat_frame=Math.max(0,
this.repeat_frame-1);this.w=window.innerWidth;this.h=window.innerHeight;this.is_fullscreen=a.doCheckFullScreen();this.scroll=document.documentElement.scrollTop;if(0==this.repeat_frame)try{document.getElementById("cover").style.display="none"}catch(c){}document.body.style.height=window.innerHeight+"px";this.was_fullscreen!=this.is_fullscreen&&ControlsPanel&&(ControlsPanel.doUpdateFullScreen(),this.was_fullscreen=this.is_fullscreen,oSTAGE.is_fullscreen=this.is_fullscreen);b()}}};actives.push(RESIZER);
window.addEventListener("fullscreenchange",function(){RESIZER.needUpdate=!0});window.addEventListener("orientationchange",function(){RESIZER.needUpdate=!0})};this.doInitFocusManager=function(b,d){var c=!1;window.addEventListener("blur",function(){c||(b&&b(),c=!0,BlitInputs.click_pending=!1)});window.addEventListener("focus",function(){c&&(d&&d(),c=!1,RESIZER.needUpdate=!0,BlitInputs.click_pending=!1)})};this.doGetHiddenProp=function(){var b=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";
for(var d=0;d<b.length;d++)if(b[d]+"Hidden"in document)return b[d]+"Hidden";return null};this.doWindowResize=function(){var b=document.getElementById("wrapper"),d=lib.properties.height,c=lib.properties.width,e=document.body.offsetWidth,g=document.body.offsetHeight;oSTAGE.is_landscape=e>=g?!0:!1;oSTAGE.pixel_ratio=__utils.getPixelRatio();var h=document.getElementById("orientation_overlay");h&&(platform.isMobile&&"landscape"==oCONFIG.game_orientation&&!oSTAGE.is_landscape?(h.style.backgroundImage="url('media/images/landscape_only.gif')",
h.style.display="block",__snds.forceMute()):platform.isMobile&&"portrait"==oCONFIG.game_orientation&&oSTAGE.is_landscape?(h.style.backgroundImage="url('media/images/portrait_only.gif')",h.style.display="block",__snds.forceMute()):(h.style.display="none",__snds.unforceMute()));h=0;try{FOOTER.doResizeUpdate();var l=document.getElementById("footer");l&&(h="none"==l.style.display?0:l.getBoundingClientRect().height)}catch(n){}oSTAGE.window_width=oSTAGE.screen_width=e;oSTAGE.window_height=oSTAGE.screen_height=
g-h;g=oSTAGE.screen_width/oSTAGE.screen_height;l=Math.min(Math.max(g,oCONFIG.game_ratio.min),oCONFIG.game_ratio.max);l>g?(oSTAGE.wrapper_width=Math.ceil(oSTAGE.window_width)+1,oSTAGE.wrapper_height=Math.ceil(oSTAGE.window_width/l)):(oSTAGE.wrapper_height=Math.ceil(oSTAGE.window_height),oSTAGE.wrapper_width=Math.ceil(oSTAGE.window_height*l)+1);oSTAGE.scale=Math.min(oSTAGE.wrapper_height/d,oSTAGE.wrapper_width/c);oSTAGE.scale_inv=1/oSTAGE.scale;oSTAGE.cache_scale=oSTAGE.scale*oSTAGE.pixel_ratio;oSTAGE.game_width=
Math.ceil(oSTAGE.wrapper_width*oSTAGE.scale_inv);oSTAGE.game_height=Math.ceil(oSTAGE.wrapper_height*oSTAGE.scale_inv);oSTAGE.game_native_width=c;oSTAGE.game_native_height=d;oSTAGE.game_width_margins=.5*(oSTAGE.game_width-c)|0;oSTAGE.game_height_margins=.5*(oSTAGE.game_height-d)|0;oSTAGE.game_top=-oSTAGE.game_height_margins;oSTAGE.game_bottom=oSTAGE.game_height-oSTAGE.game_height_margins;oSTAGE.game_left=-oSTAGE.game_width_margins;oSTAGE.game_right=oSTAGE.game_width-oSTAGE.game_width_margins;oSTAGE.game_center_x=
.5*c;oSTAGE.game_center_y=.5*d;oSTAGE.game_size={left:-oSTAGE.game_width_margins,top:-oSTAGE.game_height_margins,width:oSTAGE.game_width,height:oSTAGE.game_height,right:oSTAGE.game_width-oSTAGE.game_width_margins,bottom:oSTAGE.game_height-oSTAGE.game_height_margins,center_x:.5*c,center_y:.5*d,native_height:lib.properties.height,native_width:lib.properties.width};b.style.width=oSTAGE.wrapper_width+"px";b.style.height=oSTAGE.wrapper_height+"px";b.style.top="0px";b.style.left=Math.floor(.5*(e-b.clientWidth))+
"px";for(b=update_queue.length-1;0<=b;b--)update_queue[b].forget?update_queue.splice(b,1):update_queue[b].doResizeUpdate?update_queue[b].doResizeUpdate():update_queue.splice(b,1)};this.doCheckFullScreen=function(){return document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen||document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement};this.doFullScreenOn=function(){if(!oSTAGE.is_fullscreen){var b=document.documentElement;
b.requestFullscreen?b.requestFullscreen():b.msRequestFullscreen?b.msRequestFullscreen():b.mozRequestFullScreen?b.mozRequestFullScreen():b.webkitRequestFullscreen&&b.webkitRequestFullscreen();RESIZER.needUpdate=!0}};this.doFullScreenOff=function(){if(oSTAGE.is_fullscreen){var b=document;b.exitFullscreen?b.exitFullscreen():b.cancelFullScreen?b.cancelFullScreen():b.mozCancelFullScreen?b.mozCancelFullScreen():b.msExitFullscreen?b.msExitFullscreen():b.webkitExitFullscreen&&b.webkitExitFullscreen();RESIZER.needUpdate=
!0}}};this.myNameSpace=this.myNameSpace||{};
(function(){function f(){}var a={};f.prototype={initialized:!1,snd_queue:{},snd_counter:0,systemMute:!1,init:function(b){if(0==this.initialized)return this.initialized=!0,this.mute=!1,createjs.Sound.muted=0==this.mute?!1:!0,window.addEventListener("mousedown",__snds.enableSounds),createjs.Sound.initializeDefaultPlugins()},enableSounds:function(){createjs.Sound.activePlugin.context&&"running"!=createjs.Sound.activePlugin.context.state&&createjs.Sound.activePlugin.context.resume();try{window.removeEventListener("mousedown",
__snds.enableSounds)}catch(b){}},nextSound:function(b){b=b.target.channel;if(0<__snds.snd_queue[b].length){var d=__snds.snd_queue[b].shift();__snds.playSound(d.id,b,d.loop,d.volume,d.onComplete)}},stopSound:function(b){a[b]&&(a[b].stop(),delete a[b])},setPause:function(b,d){a[b]&&(a[b].paused=d)},queueSound:function(b,d,c,e,g){d||(d="general_"+this.snd_counter,this.snd_counter++,5<this.snd_counter&&(this.snd_counter=0));var h={};h.id=b;h.loop=void 0===c?0:c;h.volume=void 0===e?1:e;h.channel=d;h.onComplete=
void 0===g?function(){}:g;__snds.snd_queue[d].push(h)},getNowPlaying:function(b){return a[b]?a[b].clip_id:null},setSystemMute:function(b){for(var d in a)b?(a[d].saveVolume=a[d].volume,a[d].volume=0,this.systemMute=!0):(isNaN(a[d].saveVolume)||(a[d].volume=a[d].saveVolume),this.systemMute=!1)},stopAllSounds:function(){for(var b in a)try{a[b].stop()}catch(d){}},playSound:function(b,d,c,e,g){c=void 0===c?0:c;e=void 0===e?1:e;g=void 0===g?function(){}:g;createjs.Sound.activePlugin.context&&"running"!=
createjs.Sound.activePlugin.context.state&&createjs.Sound.activePlugin.context.resume();0==this.initialized&&this.init();d?a[d]&&a[d].stop():(d="general_"+this.snd_counter,this.snd_counter++,5<this.snd_counter&&(this.snd_counter=0));__snds.snd_queue[d]=[];var h={};h.interrupt=createjs.Sound.INTERRUPT_EARLY;e&&(h.volume=e);c&&(h.loop=c);this.systemMute&&(h.volume=0);"string"!==typeof b&&(b=b[__utils.getRandomInt(0,b.length-1)]);c=createjs.Sound.play(b,h);c.channel=d;c.clip_id=b;c.addEventListener("complete",
function(l){g();__snds.nextSound(l)});return a[d]=c},toggleMute:function(){0==this.mute?(this.mute=1,createjs.Sound.muted=!0):(this.mute=0,createjs.Sound.muted=!1);return oUSER.is_mute=this.mute},forceMute:function(){createjs.Sound.muted=!0},isMute:function(){return this.mute},unforceMute:function(){0==this.mute&&(createjs.Sound.muted=!1)},mute:0};myNameSpace.BlitSounds=f})();var delta,frame_delta;
function BlitGameWorld(f){var a=this,b;a.animation_frame=0;a.is_paused=!1;a.actives=[];var d=document.getElementById(f);d.renderer=d.renderer||new THREE.WebGLRenderer({canvas:d,antialias:!0});d.renderer.shadowMap.enabled=!1;d.renderer.shadowMap.autoUpdate=!1;a.renderer=d.renderer;a.renderer.setClearColor(0,1);a.scene=new THREE.Scene;a.scene.background=new THREE.Color(0);a.camera=new THREE.PerspectiveCamera(50,oSTAGE.screen_width/oSTAGE.screen_height,.1,300);a.scene.add(a.camera);a.cam_target=new THREE.Vector3(0,
0,0);a.cam_pos=new THREE.Vector3(0,10,30);a.camera.position.set(a.cam_pos.x,a.cam_pos.y,a.cam_pos.z);a.camera.lookAt(a.cam_target.x,a.cam_target.y,a.cam_target.z);a.cam_dist=a.camera.position.distanceTo(a.cam_target);a.min_focus_width=0;a.min_focus_height=0;a.max_focus_width=Infinity;a.max_focus_height=Infinity;a.background_type=null;this.doInit=function(){window.focus();a.renderer.render(a.scene,a.camera);d.style.display="block";a.doResizeUpdate();a.doResizeUpdate();b={doResizeUpdate:a.doResizeUpdate};
update_queue.push(b);clock.start();frame_delta=0};this.doResizeUpdate=function(){a.camera.aspect=oSTAGE.wrapper_width/oSTAGE.wrapper_height;a.camera.updateProjectionMatrix();a.renderer.setSize(oSTAGE.wrapper_width,oSTAGE.wrapper_height);a.renderer.setPixelRatio(__utils.getPixelRatio());var c=new THREE.Vector2;a.renderer.getSize(c);c=c.width/c.height;try{GameGUI.doResize()}catch(e){}a.cam_dist=a.camera.position.distanceTo(a.cam_target);a.camera.fov=Math.max(180/Math.PI*Math.atan(Math.max(a.min_focus_height,
a.min_focus_width/c)/(2*a.cam_dist))*2,Math.min(180/Math.PI*Math.atan(Math.max(a.max_focus_height,a.max_focus_width/c)/(2*a.cam_dist))*2,50));a.camera.updateProjectionMatrix();switch(a.background_type){case "pattern":c=oSTAGE.screen_width/oSTAGE.screen_height*(GameWorld.scene.background.image.naturalHeight/GameWorld.scene.background.image.naturalWidth),background_texture.wrapS=THREE.RepeatWrapping,background_texture.repeat=new THREE.Vector2(c,1),background_texture.offset.x=0,background_texture.offset.y=
0}a.is_paused&&a.renderer.render(a.scene,a.camera)};this.doSetBackground=function(c){a.background_type=c.type;background_texture=c.asset;c.asset.wrapS=THREE.RepeatWrapping;GameWorld.scene.background=c.asset};this.doUpdate=function(){frame_delta=clock.getDelta();if(!a.is_paused){for(var c=a.actives.length-1;0<=c;c--)a.actives[c]?(a.actives[c].doUpdate(a.actives[c]),a.actives[c].need_destroy?(a.scene.remove(a.actives[c]),a.actives.splice(c,1)):a.actives[c].forget&&a.actives.splice(c,1)):a.actives.splice(c,
1);a.renderer.render(a.scene,a.camera)}};actives.push(this);this.doPause=function(){};this.doResume=function(){};this.doClearAll=function(){if(a.scene)for(;0<a.scene.children.length;)a.scene.remove(a.scene.children[0])};this.doClearObjects=function(){if(a.scene)for(var c=a.scene.children.length-1;0<=c;c--)if(a.scene.children[c]!=a.camera){var e=a.scene.children[c];try{e.me.doDestroy()}catch(g){}null!=e.parent&&e.parent.remove(e)}};this.doDestroy=function(){d.style.display="none";a.forget=!0;a.actives=
[];this.forget=b.forget=!0;clock.stop();if(a.scene)for(;0<a.scene.children.length;)a.scene.remove(a.scene.children[0]);a.scene=null};this.doHide=function(){d.style.display="none"}};var oLANG,oLANG_IMAGES,oLANG_FONTS,BlitLanguage=new function(){var f=this,a,b;this.doLoadLanguage=function(d,c,e){a=d;b=c;switch(a.split(".").pop().toLowerCase()){case "json":f.doLoadLanguageJSON();break;case "xml":f.doLoadLanguageXML()}};this.doLoadLanguageJSON=function(){var d=new XMLHttpRequest;d.open("GET",a,!0);d.setRequestHeader("Content-Type","application/json");d.onreadystatechange=function(){if(4==d.readyState&&200==d.status){var c=JSON.parse(d.responseText);oLANG={};oLANG_IMAGES={};oLANG_FONTS=
{};var e=c.txt;if(e)for(var g=0;g<e.length;g++){var h=e[g];if(h.id){var l={},n;for(n in h)l[n]=h[n];l.value=h.value||"";l.spaced&&(l.value=l.value.split("").join("\u00a0"));oLANG[l.id]=l}}if(e=c.img)for(g=0;g<e.length;g++)if(h=e[g],h.id){l={};for(n in h)l[n]=h[n];l.value=h.value||"";oLANG_IMAGES[l.id]=l}if(c=c.config)for(g=0;g<c.length;g++)if(h=c[g],h.id){l={};for(n in h)l[n]=h[n];l.value=h.value||"";oCONFIG[l.id]=l.value}b()}};d.send(null)};this.doLoadLanguageXML=function(){trace("doLoadLanguageXML()");
var d=new XMLHttpRequest;d.open("GET",a,!0);d.onreadystatechange=function(){if(4==d.readyState&&200==d.status){var c=(d.responseXML||parseXml(d.responseText)).documentElement;oLANG={};oLANG_IMAGES={};oLANG_FONTS={};var e=c.getElementsByTagName("txt");if(e)for(var g=0;g<e.length;g++){var h=e[g],l={};l.id=h.getAttribute("id");for(var n=0;n<h.attributes.length;n++){var k=h.attributes[n];k.specified&&(l[k.name]=k.value)}l.value=h.childNodes[0]?h.childNodes[0].nodeValue:"";oLANG[l.id]=l}if(l=c.getElementsByTagName("img"))for(g=
0;g<l.length;g++)h=l[g],e=h.getAttribute("id"),h=h.childNodes[0].nodeValue,oLANG_IMAGES[e]=h;if(c=c.getElementsByTagName("config"))for(g=0;g<c.length;g++)h=c[g],e=h.getAttribute("id"),h=h.childNodes[0].nodeValue,"true"==h&&(h=!0),"false"==h&&(h=!1),oCONFIG[e]=h;b()}};d.send(null)}};
function FontLoader(){var f=document.body.appendChild(document.createElement("canvas"));f.style.width="100px";f.style.height="100px";f.style.position="absolute";f.style.display="none";var a=new createjs.Stage(f);a.enableMouseOver(0);a.tickChildren=!0;a.tickEnabled=!0;a.needUpdate=!1;a.enableDOMEvents(!1);a.forget=!1;var b=a.addChild(new lib.font_loader);this.doDestroy=function(){a.update();a.removeAllChildren();__utils.doDestroyElement(f)};this.doAddFont=function(d,c){""!=c&&(c+=" ");b.addChild(new createjs.Text("Hello World",
c+"20px "+d,"#ff7700"))};a.update()};
