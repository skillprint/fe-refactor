var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(f,c,a){if(f==Array.prototype||f==Object.prototype)return f;f[c]=a.value;return f};
$jscomp.getGlobal=function(f){f=["object"==typeof globalThis&&globalThis,f,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var c=0;c<f.length;++c){var a=f[c];if(a&&a.Math==Math)return a}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(f,c){var a=$jscomp.propertyToPolyfillSymbol[c];if(null==a)return f[c];a=f[a];return void 0!==a?a:f[c]};$jscomp.polyfill=function(f,c,a,b){c&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(f,c,a,b):$jscomp.polyfillUnisolated(f,c,a,b))};
$jscomp.polyfillUnisolated=function(f,c,a,b){a=$jscomp.global;f=f.split(".");for(b=0;b<f.length-1;b++){var d=f[b];if(!(d in a))return;a=a[d]}f=f[f.length-1];b=a[f];c=c(b);c!=b&&null!=c&&$jscomp.defineProperty(a,f,{configurable:!0,writable:!0,value:c})};
$jscomp.polyfillIsolated=function(f,c,a,b){var d=f.split(".");f=1===d.length;b=d[0];b=!f&&b in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var e=0;e<d.length-1;e++){var h=d[e];if(!(h in b))return;b=b[h]}d=d[d.length-1];a=$jscomp.IS_SYMBOL_NATIVE&&"es6"===a?b[d]:null;c=c(a);null!=c&&(f?$jscomp.defineProperty($jscomp.polyfills,d,{configurable:!0,writable:!0,value:c}):c!==a&&($jscomp.propertyToPolyfillSymbol[d]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(d):$jscomp.POLYFILL_PREFIX+d,d=
$jscomp.propertyToPolyfillSymbol[d],$jscomp.defineProperty(b,d,{configurable:!0,writable:!0,value:c})))};$jscomp.polyfill("Math.log2",function(f){return f?f:function(c){return Math.log(c)/Math.LN2}},"es6","es3");$jscomp.polyfill("Object.is",function(f){return f?f:function(c,a){return c===a?0!==c||1/c===1/a:c!==c&&a!==a}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(f){return f?f:function(c,a){var b=this;b instanceof String&&(b=String(b));var d=b.length;a=a||0;for(0>a&&(a=Math.max(a+d,0));a<d;a++){var e=b[a];if(e===c||Object.is(e,c))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(f,c,a){if(null==f)throw new TypeError("The 'this' value for String.prototype."+a+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+a+" must not be a regular expression");return f+""};$jscomp.polyfill("String.prototype.includes",function(f){return f?f:function(c,a){return-1!==$jscomp.checkStringArgs(this,c,"includes").indexOf(c,a||0)}},"es6","es3");
function BlitControls(f,c){var a=this;c=c||{};var b=document.getElementById(f),d=b.my_stage||new createjs.Stage(b);d.enableMouseOver(0);d.tickChildren=!1;d.tickEnabled=!1;d.needUpdate=!1;d.snapToPixelsEnabled=!0;d.actives=[];d.activeTweens=[];d.enableDOMEvents(!1);d.forget=!1;platform.isMobile?(createjs.Touch.enable(d),d.enableDOMEvents(!1)):(d.enableDOMEvents(!0),d.enableMouseOver(20));b.my_stage=d;a.mouse_is_over=!1;a.my_scale=1;b.onmouseover=function(){a.mouse_is_over=!0};b.onmouseout=function(){a.mouse_is_over=
!1};d.removeAllChildren();var e=d.addChild(new lib.scene_mute_panel);e.b_pause.visible=!1;f=document.documentElement;var h=f.requestFullscreen||f.msRequestFullscreen||f.mozRequestFullScreen||f.webkitRequestFullscreen?!0:!1;c.hide_fullscreen&&(h=!1);h?(e.b_fullscreen.visible=!0,e.b_fullscreen.helper=new __utils.ButtonHelper(d,e.b_fullscreen,"norm","over"),e.b_fullscreen.helper.setSounds({mousedown:"snd_click",rollover:"snd_rollover"}),e.b_fullscreen.addEventListener("click",function(g){oSTAGE.is_fullscreen?
(BlitWindow.doFullScreenOff(),e.b_fullscreen.mc_on.visible=!1,e.b_fullscreen.mc_off.visible=!0):(BlitWindow.doFullScreenOn(),e.b_fullscreen.mc_on.visible=!0,e.b_fullscreen.mc_off.visible=!1);d.needUpdate=!0},!1),oSTAGE.is_fullscreen?(e.b_fullscreen.mc_on.visible=!0,e.b_fullscreen.mc_off.visible=!1):(e.b_fullscreen.mc_on.visible=!1,e.b_fullscreen.mc_off.visible=!0)):e.b_fullscreen.visible=!1;0==__snds.isMute()?e.b_mute.mc_mutelines.visible=!0:e.b_mute.mc_mutelines.visible=!1;e.b_mute.visible=!1;e.b_mute.helper=
new __utils.ButtonHelper(d,e.b_mute,"norm","over");e.b_mute.helper.setSounds({mousedown:"snd_click",rollover:"snd_rollover"});e.b_mute.addEventListener("click",function(g){0==__snds.toggleMute()?(e.b_mute.mc_mutelines.visible=!0,d.needUpdate=!0,oUSER.is_mute=!1,a.onUnMute()):(e.b_mute.mc_mutelines.visible=!1,d.needUpdate=!0,oUSER.is_mute=!0,a.onMute());BlitSaver.doSaveData("user",oUSER)},!1);e.b_pause.helper=new __utils.ButtonHelper(d,e.b_pause,"norm","over");e.b_pause.helper.setSounds({mousedown:"snd_click",
rollover:"snd_rollover"});e.b_pause.addEventListener("click",function(g){if(g.currentTarget.helper.enabled){if(a.isPaused)a.onResume();else a.onPause();d.needUpdate=!0}});e.b_fullscreen.x=7.5;e.b_mute.x=7.5;e.b_pause.x=7.5;h?(e.b_fullscreen.y=6.5,e.b_mute.y=66.5,e.b_pause.y=126.5):(e.b_mute.y=6.5,e.b_pause.y=66.5);e.b_pause.alpha=0;d.needUpdate=!0;this.onPause=function(){};this.onUnPause=function(){};this.onMute=function(){};this.onUnMute=function(){};this.doUpdateMute=function(){0==__snds.isMute()?
e.b_mute.mc_mutelines.visible=!0:e.b_mute.mc_mutelines.visible=!1;d.needUpdate=!0};this.doUpdateFullScreen=function(){BlitWindow.doCheckFullScreen()?(e.b_fullscreen.mc_on.visible=!0,e.b_fullscreen.mc_off.visible=!1):(e.b_fullscreen.mc_on.visible=!1,e.b_fullscreen.mc_off.visible=!0);d.needUpdate=!0};this.doResizeUpdate=function(){var g=oSTAGE.scale;var m=64+(h?64:0);m+=e.b_pause.visible?64:0;b.style.top=0*g+"px";b.style.width=64*g+"px";b.style.height=m*g+"px";b.width=64*g*__utils.getPixelRatio();b.height=
m*g*__utils.getPixelRatio();e.my_scale=g;a.my_scale=g;d.scale=g*__utils.getPixelRatio();d.needUpdate=!0};this.doShowPause=function(){e.b_pause.helper.setEnabled(!0);e.b_pause.visible=!0;platform.isMobile?(e.b_pause.alpha=1,d.needUpdate=!0):(createjs.Tween.get(e.b_pause).to({alpha:1},250),d.activeTweens.push(e.b_pause))};this.doHidePause=function(){e.b_pause.helper.setEnabled(!1);platform.isMobile?(e.b_pause.visible=!1,d.needUpdate=!0):(createjs.Tween.get(e.b_pause).to({alpha:0},250),d.activeTweens.push(e.b_pause))};
a.doResizeUpdate();update_queue.push({doResizeUpdate:a.doResizeUpdate});active_stages.push(d);(function(){actives.push({forget:!1,doUpdate:function(){"running"==createjs.Sound.activePlugin.context.state&&(e.b_mute.visible=!0,this.forget=e.stage.needUpdate=!0)}})})();b.style.display="block"};function LoaderScreen(f,c){f=void 0===f?null:f;c=void 0===c?{}:c;var a=this;trace("LoaderScreen()");var b=(f?document.getElementById(f):document.body).appendChild(document.createElement("div"));b.className="loading_screen";b.style.display="none";var d=b.appendChild(document.createElement("div"));d.className="loading_block";c.logo?(f=d.appendChild(document.createElement("img")),f.className="loading_logo",d.appendChild(document.createElement("br")),f.onload=function(){trace("image loaded");b.style.display=
"block";a.doResizeUpdate()},f.src=c.logo):b.style.display="block";c.msg&&(f=d.appendChild(document.createElement("div")),f.className="loading_msg",f.innerHTML=c.msg,d.appendChild(document.createElement("br")));c=d.appendChild(document.createElement("div"));c.className="loading_bar";var e=c.appendChild(document.createElement("div"));e.className="loading_bar_fill";c.appendChild(document.createElement("div")).className="loading_bar_frame";this.doResizeUpdate=function(){scale=Math.min(document.body.offsetWidth/
640,document.body.offsetHeight/640,1);d.style.top=.5*document.body.offsetHeight+"px";d.style.left=.5*document.body.offsetWidth+"px";d.style.transform="scale("+scale+")";d.style.marginTop=-(.5*d.clientHeight)+"px";d.style.marginLeft=-(.5*d.clientWidth)+"px"};this.doUpdateBar=function(h){e.style.width=Math.max(9,Math.min(100,100*h))+"%"};this.doDestroy=function(){window.removeEventListener("resize",a.doResizeUpdate);window.removeEventListener("orientationchange",a.doResizeUpdate);b.parentNode.removeChild(b);
LOADER=null};window.addEventListener("resize",a.doResizeUpdate);window.addEventListener("orientationchange",a.doResizeUpdate);a.doResizeUpdate()};function BlitPause(f){var c=this;__snds.forceMute();__snds.setPause("music",!0);var a=document.getElementById(f),b=a.my_stage||new createjs.Stage(a);b.enableMouseOver(0);b.tickChildren=!1;b.tickEnabled=!1;b.needUpdate=!1;b.snapToPixelsEnabled=!0;b.actives=[];b.activeTweens=[];b.enableDOMEvents(!1);b.forget=!1;platform.isMobile?(createjs.Touch.enable(b),b.enableDOMEvents(!1)):(b.enableDOMEvents(!0),b.enableMouseOver(20));a.my_stage=b;b.removeAllChildren();var d=b.addChild(new lib.popup_pause);d.my_scale=
null;d.b_exit.helper=new __utils.ButtonHelper(b,d.b_exit,"norm","over");d.b_exit.helper.setSounds({mousedown:"snd_click",rollover:"snd_rollover"});__utils.doText(d.b_exit.txt,oLANG.exit_game,{verticalAlign:"middle"});d.b_exit.addEventListener("click",function(h){c.doDestroy();__snds.setPause("music",!1);__snds.unforceMute();MyGame.doQuit()});d.b_resume.helper=new __utils.ButtonHelper(b,d.b_resume,"norm","over");d.b_resume.helper.setSounds({mousedown:"snd_click",rollover:"snd_rollover"});__utils.doText(d.b_resume.txt,
oLANG.resume_game,{verticalAlign:"middle"});d.b_resume.addEventListener("click",function(h){__snds.setPause("music",!1);__snds.unforceMute();c.doDestroy();MyGame.doResume()});d.b_help.helper=new __utils.ButtonHelper(b,d.b_help,"norm","over");d.b_help.helper.setSounds({mousedown:"snd_click",rollover:"snd_rollover"});__utils.doText(d.b_help.txt,oLANG.help,{verticalAlign:"middle"});d.b_help.addEventListener("click",function(h){e.forget=!0;b.forget=!0;b.enableMouseOver(0);b.removeAllChildren();b.needUpdate=
!0;a.style.backgroundColor="rgba(0,0,0,0)";a.style.display="none";MyGame.doHelp()});MyGame.isReplay&&(d.b_help.visible=!1,d.b_help.mouseEnabled=!1);b.needUpdate=!0;this.doResizeUpdate=function(){a.style.left="0px";a.style.top="0px";a.style.width=oSTAGE.wrapper_width+"px";a.style.height=oSTAGE.wrapper_height+"px";a.width=oSTAGE.wrapper_width*oSTAGE.pixel_ratio;a.height=oSTAGE.wrapper_height*oSTAGE.pixel_ratio;d.x=.5*oSTAGE.game_width|0;d.y=.5*oSTAGE.game_height|0;d.my_scale=oSTAGE.scale;b.scale=oSTAGE.scale*
oSTAGE.pixel_ratio;b.needUpdate=!0};this.doDestroy=function(){oUSER.is_mute||(createjs.Sound.muted=!1);e.forget=!0;b.forget=!0;b.enableMouseOver(0);b.removeAllChildren();b.needUpdate=!0;a.style.backgroundColor="rgba(0,0,0,0)";a.style.display="none"};c.doResizeUpdate();var e={doResizeUpdate:c.doResizeUpdate};update_queue.push(e);active_stages.push(b);a.style.display="block";a.style.backgroundColor="rgba(0,0,0,0.4)"};var debug_line=1;function trace(f,c){var a="localhost"===location.hostname||"127.0.0.1"===location.hostname;if(oCONFIG.debug_trace||a){try{console.log(f)}catch(b){}oCONFIG.debug_panel&&(a=document.getElementById("debug"))&&(a.style.display="block",a.innerHTML="error"==c?'<li class="debug_error">'+f+a.innerHTML:"<li>"+f+a.innerHTML)}}Image.prototype.load=function(f){var c=new XMLHttpRequest;c.thisImg=this;c.open("GET",f,!0);c.responseType="arraybuffer";return c};
Image.prototype.completedPercentage=0;window.onerror=function(f,c,a){oCONFIG.debug_panel&&trace("onerror: "+f+" src:"+c+" @"+a,"error")};
function doFindLinks(f){for(var c=f.text.split(" "),a=f.original_font_size,b=[],d=0;d<c.length;d++){var e=c[d];"http"==e.substring(0,4)&&(e={url:e},b.push(e),c[d]="\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0")}c=c.join(" ");f.text=c;var h=f.getMetrics().lines,g=0;for(d=0;d<h.length;d++){f.text="";for(var m=h[d].split(" "),n=0;n<m.length;n++){e=m[n];if("\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0"==e){var k=f.getBounds();b[g].y=f.y+d*f.lineHeight+.5*a;b[g].x=f.x+k.width+a;g++}f.text+=e;d<m.length&&(f.text+=" ")}}f.text=
c;for(d=0;d<b.length;d++)e=b[d],c=new lib.link_icon,f.parent.addChild(c),c.url=e.url,c.x=e.x,c.y=e.y,c.scaleX=c.scaleY=1.5*a/40,c.helper=new __utils.ButtonHelper(c.stage,c,"norm","over"),c.addEventListener("click",function(l){window.open(l.currentTarget.url)})}var myNav=navigator.userAgent.toLowerCase();
function doGetBrowser(){var f=navigator.userAgent,c=f.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(c[1])){var a=/\brv[ :]+(\d+)/g.exec(f)||[];return{name:"IE",version:a[1]||""}}if("Chrome"===c[1]&&(a=f.match(/\bOPR|Edge\/(\d+)/),null!=a))return{name:"Opera",version:a[1]};c=c[2]?[c[1],c[2]]:[navigator.appName,navigator.appVersion,"-?"];null!=(a=f.match(/version\/(\d+)/i))&&c.splice(1,1,a[1]);return{name:c[0],version:c[1]}}
function is_touch_device(){return"ontouchstart"in window||0<navigator.MaxTouchPoints||0<navigator.msMaxTouchPoints}
var platform={isAndroid:navigator.userAgent.match(/Android/i),isBlackBerry:navigator.userAgent.match(/BlackBerry/i),isiOS:navigator.userAgent.match(/iPhone|iPad|iPod/i),isMobileOpera:navigator.userAgent.match(/Opera Mini/i),isMobileWindows:navigator.userAgent.match(/IEMobile/i),isTouchDevice:is_touch_device(),isMobile:navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/Opera Mini/i)||navigator.userAgent.match(/IEMobile/i),
isSamsungBrowser:navigator.userAgent.match(/SamsungBrowser/i),isIE:-1!=myNav.indexOf("msie")||"Microsoft Internet Explorer"==navigator.appName||"Netscape"==navigator.appName&&null!=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent),isFirefox:navigator.userAgent.match(/Firefox/i),isWindows:-1!=window.navigator.platform.indexOf("Win"),isIE11:!!window.MSInputMethodContext&&!!document.documentMode,isChrome:/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),isSafari:/Safari/.test(navigator.userAgent)&&
/Apple Computer/.test(navigator.vendor)},support={gzip:!1,canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var f=document.createElement("canvas");return!(!window.WebGLRenderingContext||!f.getContext("webgl")&&!f.getContext("experimental-webgl"))}catch(c){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,clamped_array:window.Uint8ClampedArray,zoom:""===document.createElement("detect").style.zoom};
function doPrep(){trace(".doPrep()");doFixCompatibilityIssues();doCheckBrowser()?doInit2():doBrowserAlert()}
function doFixCompatibilityIssues(){trace("doFixCompatibilityIssues()");0=="console"in window&&(console={log:function(){},error:function(){}});Math.log2=Math.log2||function(c){return Math.log(c)*Math.LOG2E};var f=window.DOMParser?function(c){return(new window.DOMParser).parseFromString(c,"text/xml")}:"undefined"!=typeof window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM")?function(c){var a=new window.ActiveXObject("Microsoft.XMLDOM");a.async="false";a.loadXML(c);return a}:function(){return null};
window.parseXml=f;String.prototype.includes||(String.prototype.includes=function(c,a){"number"!==typeof a&&(a=0);return a+c.length>this.length?!1:-1!==this.indexOf(c,a)});Date.now=Date.now||function(){return(new Date).getTime()};0=="performance"in window&&(window.performance={offset:Date.now(),now:function(){return Date.now()-this.offset}});my_performance={offset:Date.now(),now:function(){return Date.now()-this.offset}};window.requestAnimationFrame||(window.requestAnimationFrame=function(c,a){var b=
(new Date).getTime(),d=Math.max(0,16-(b-lastTime));a=window.setTimeout(function(){c(b+d)},d);lastTime=b+d;return a})}function doCheckBrowser(){trace("doCheckBrowser()");var f=!0;support.clamped_array||(f=!1);platform.isIE11&&(f=!1);platform.isSamsungBrowser&&(f=!1);oCONFIG.support_checks&&(oCONFIG.support_checks.canvas&&!support.canvas&&(f=!1),oCONFIG.support_checks.webgl&&!support.webgl&&(f=!1));support.canvas&&support.webgl&&support.clamped_array||(f=!1);return f}
function doBrowserAlert(){trace("doBrowserAlert()");var f=document.getElementById("div_errors");var c='<table border="0" class="div_errors_table" cellpadding="40"><tr><td align="center" valign="middle"><img border="0" class="div_errors_logo" src="'+(oLANG_IMAGES.logo.value+'" alt="'+oLANG_IMAGES.logo.alt+'"/><p>');c+=oLANG.browser_alert.value+"<p>";f.innerHTML=c+'<a href="https://www.google.com/chrome/browser/"><img border="0" src="media/browser_icons/icon_chrome.png" width="64" height="64" alt="Chrome"/></a><a href="http://www.mozilla.org/firefox/new/"><img border="0" src="media/browser_icons/icon_firefox.png" width="64" height="64" alt="Firefox"/></a><a href="https://www.microsoft.com/microsoft-edge"><img border="0" src="media/browser_icons/icon_edge.png" width="64" height="64" alt="Edge"/></a><a href="http://www.apple.com/safari/"><img border="0" src="media/browser_icons/icon_safari.png" width="64" height="64" alt="Safari"/></a></td></tr></table>';
f.style.display="block";trace(f)};var BlitStage=function(f,c){if(f.stage){var a=f.stage;a.removeAllChildren();a.actives=[];a.activeTweens=[];a.forget=!1;a.enableMouseOver(0);return a}c.webgl?(a=new createjs.StageGL(f,{transparent:!1,antialias:!0,premultiply:!0}),a.webgl=!0):(a=new createjs.Stage(f),a.webgl=!1);a.actives=[];a.activeTweens=[];a.tickChildren=!1;a.tickEnabled=!1;a.needUpdate=!1;a.forget=!1;a.snapToPixelsEnabled=!1;a.enableDOMEvents(!1);a.enableMouseOver(0);platform.isMobile?(createjs.Touch.enable(a),a.enableDOMEvents(!1)):
(a.enableDOMEvents(!0),a.enableMouseOver(20));c.no_resize||(a.doResizeUpdate=function(){f.style.left="0px";f.style.top="0px";f.style.width=oSTAGE.wrapper_width+"px";f.style.height=oSTAGE.wrapper_height+"px";f.width=oSTAGE.wrapper_width*oSTAGE.pixel_ratio;f.height=oSTAGE.wrapper_height*oSTAGE.pixel_ratio;this.scale=oSTAGE.scale*oSTAGE.pixel_ratio;this.webgl&&this.updateViewport(f.width,f.height);a.needUpdate=!0},update_queue.push(a),active_stages.push(a));return a};function BlitTimer(f){var c=this;c.direction=f.direction||-1;c.is_paused=!0;c.pause_time=0;c.start_time=0;c.game_time=1E3*f.seconds_on_clock;c.time_left=c.game_time;c.time_used=0;c.current_seconds=0;c.percent_left=1;c.giving_bonus=!1;this.doStart=function(){c.pause_time=0;c.start_time=performance.now();c.game_time=1E3*f.seconds_on_clock;c.time_left=c.game_time;c.current_seconds=0;c.is_paused=!1;c.forget=!1;c.is_active=!0;GameWorld.actives.push(c)};this.doFirstUpdate=function(){var a=Math.ceil(.001*
c.game_time);c.percent_left=c.time_left/c.game_time;var b=a;a=Math.floor(b/60);b-=60*a;if(10>b)var d=0;else d=Math.floor(b/10),b-=10*d;f.callback_update&&f.callback_update(c.time_left,c.percent_left,{m:a.toString(),ss:d.toString()+b.toString()})};this.doUpdate=function(){if(c.is_active&&!c.is_paused){c.giving_bonus?(c.time_left=Math.max(0,c.time_left-500),c.time_used=Math.max(c.game_time,c.game_time-c.time_left)):-1==c.direction?(c.time_left=Math.max(0,c.start_time+c.game_time-performance.now()),
c.time_used=Math.max(c.game_time,c.game_time-c.time_left)):(c.time_left=Math.max(0,performance.now()-c.start_time),c.time_used=c.time_left);var a=Math.ceil(.001*c.time_left);c.percent_left=c.time_left/c.game_time;if(a!=c.current_seconds){var b=a;a=Math.floor(b/60);b-=60*a;if(10>b)var d=0;else d=Math.floor(b/10),b-=10*d;f.callback_update&&f.callback_update(c.time_left,c.percent_left,{m:a.toString(),ss:d.toString()+b.toString()})}-1==c.direction&&0>=c.time_left&&(f.callback_update&&f.callback_update(c.time_left,
c.percent_left,{m:"0",ss:"00"}),c.is_active=!1,c.giving_bonus?(c.giving_bonus=!1,__snds.stopSound("timer"),f.callback_bonuscomplete&&f.callback_bonuscomplete()):f.callback_outoftime&&f.callback_outoftime())}};this.doStartBonus=function(){c.giving_bonus=!0;c.is_paused=!1;c.forget=!1;c.is_active=!0;GameWorld.actives.push(c)};this.doStop=function(){c.forget=!0;c.is_active=!1};this.doPause=function(){c.pause_time=performance.now();c.is_paused=!0};this.doAddTime=function(a){c.clock_frames+=60*a;c.start_time+=
1E3*a};this.doResume=function(){c.start_time+=performance.now()-c.pause_time;c.is_paused=!1};this.doDestroy=function(){c.forget=!0;c.is_active=!1}};var oTOUCHES=[],_BlitInputs=function(f){var c=this,a=document.getElementById(f.target)||document.documentElement;c.has_tilt=!1;c.using_tilt=!1;c.still_frames=0;c.beta=0;c.lastbeta=0;c.alpha=0;c.lastalpha=0;c.tilt_x=0;c.tilt_y=0;c.allow_key_defaults=f.allowKeyDefaults;c.click_pending=!1;c.has_touch=!1;c.touching=!1;c.mouse_is_down=!1;c.mouse_start_x=0;c.mouse_start_y=0;c.start_x=0;c.start_y=0;c.mouse_x=0;c.mouse_y=0;c.frames_down=0;c.using_keyboard=!1;c.right=!1;c.left=!1;c.up=!1;c.dn=!1;c.z=!1;c.x=
!1;c.c=!1;c.v=!1;c.b=!1;c.space=!1;c.keys_down=[];c.propagation_prevention=f.propagationLevel;this.doSetPropagationPrevention=function(k){c.propagation_prevention=k};this.doGetTouches=function(){return oTOUCHES};f=function(k){c.mouse_is_down||(c.frames_down=0,c.mouse_is_down=!0,c.click_pending=!0,c.mouse_x=(k.clientX-a.offsetLeft)*oSTAGE.scale_inv|0,c.mouse_y=(k.clientY-a.offsetTop)*oSTAGE.scale_inv|0,c.mouse_start_x=c.mouse_x,c.mouse_start_y=c.mouse_y,c.start_x=c.mouse_x,c.start_y=c.mouse_y,c.speed_x=
0,c.speed_y=0,c.client_mouse_x=(k.clientX-a.offsetLeft)*oSTAGE.scale_inv|0,c.client_mouse_y=(k.clientY-a.offsetTop)*oSTAGE.scale_inv|0,c.client_mouse_start_x=c.client_mouse_x,c.client_mouse_start_y=c.client_mouse_y)};var b=function(k){c.client_mouse_x=(k.clientX-a.offsetLeft)*oSTAGE.scale_inv|0;c.client_mouse_y=(k.clientY-a.offsetTop)*oSTAGE.scale_inv|0;c.speed_x=c.client_mouse_x-c.mouse_x;c.speed_y=c.client_mouse_y-c.mouse_y;c.mouse_x=(k.clientX-a.offsetLeft)*oSTAGE.scale_inv|0;c.mouse_y=(k.clientY-
a.offsetTop)*oSTAGE.scale_inv|0},d=function(k){c.mouse_is_down=!1;c.release_pending=!0;c.frames_down=0},e=-1,h=function(k){for(var l=0;l<oTOUCHES.length;l++)if(oTOUCHES[l].id===k)return l;return-1},g=function(k){trace("doTouchStart");var l=k.touches;k.touches?l=k.touches:k.targetTouches?l=k.targetTouches:k.pageX&&(l=[k]);for(var r=0;r<l.length;r++){var q=l[r],t=h(q.identifier),u=(q.clientX-a.offsetLeft)*oSTAGE.scale_inv,v=(q.clientY-a.offsetTop)*oSTAGE.scale_inv;-1==t&&(oTOUCHES.push({id:q.identifier,
frames_down:0,mouse_is_down:!0,click_pending:!0,release_pending:!1,my_x:u,my_y:v,speed_x:0,speed_y:0,start_x:u,start_y:v}),1==oTOUCHES.length&&(e=q.identifier,c.touching=!0,c.frames_down=0,c.mouse_is_down=!0,c.click_pending=!0,c.release_pending=!1,c.mouse_x=u,c.mouse_y=v,c.speed_x=0,c.speed_y=0,c.start_x=u,c.start_y=v,c.mouse_start_x=u,c.mouse_start_y=v))}q.target.prohibit_touch&&k.preventDefault();for(l=q.target;l&&l!==document;){if(l.id&&(-1!=l.id.indexOf("_evidon")||-1!=l.id.indexOf("_evh"))){q.target.allow_touch=
!0;break}l=l.parentNode}platform.isTouchDevice&&!q.target.allow_touch&&2<=c.propagation_prevention&&k.preventDefault()},m=function(k){var l;k.changedTouches?l=k.changedTouches:k.targetTouches?l=k.targetTouches:k.pageX&&(l=[k]);for(var r=0;r<l.length;r++){var q=l[r],t=q.identifier,u=h(t),v=(q.clientX-a.offsetLeft)*oSTAGE.scale_inv,w=(q.clientY-a.offsetTop)*oSTAGE.scale_inv,x=v-oTOUCHES[u].my_x,y=w-oTOUCHES[u].my_y;oTOUCHES[u].speed_x=x;oTOUCHES[u].speed_y=y;oTOUCHES[u].my_x=v;oTOUCHES[u].my_y=w;t==
e&&(c.mouse_x=v,c.mouse_y=w,c.speed_x=x,c.speed_y=y)}for(l=q.target;l&&l!==document;){if(l.id&&(-1!=l.id.indexOf("_evidon")||-1!=l.id.indexOf("_evh"))){q.target.allow_touch=!0;break}l=l.parentNode}q.target.prohibit_touch_scroll&&Math.abs(oTOUCHES[0].speed_x)>Math.abs(oTOUCHES[0].speed_y)&&k.preventDefault();q.target.prohibit_touch&&k.preventDefault();(q.target.prohibit_touchmove||platform.isTouchDevice&&!q.target.allow_touch&&1<=c.propagation_prevention)&&k.preventDefault()},n=function(k){switch(k.type){case "touchend":case "touchcancel":case "MSPointerUp":var l;
k.changedTouches?l=k.changedTouches:k.targetTouches?l=k.targetTouches:k.pageX&&(l=[k]);for(k=0;k<l.length;k++){var r=l[k].identifier,q=h(r);r==e&&c.mouse_is_down&&(c.mouse_is_down=!1,c.release_pending=!0,c.frames_down=0,c.touching=!1);-1!=q&&oTOUCHES.splice(q,1)}}};window.onkeydown=function(k){var l=k.which||k.keyCode||k.key;c.allow_key_defaults||(k.preventDefault(),k.stopPropagation());if(!(0<=c.keys_down.indexOf(l)))switch(c.keys_down.push(l),c.using_keyboard=!0,l){case 39:c.right=!0;c.right_pending=
!0;break;case 37:c.left=!0;c.left_pending=!0;break;case 32:c.space=!0;c.space_pending=!0;break;case 38:c.up=!0;c.up_pending=!0;break;case 40:c.dn=!0;c.dn_pending=!0;break;case 90:c.z=!0;c.z_pending=!0;break;case 88:c.x=!0;c.x_pending=!0;break;case 67:c.c=!0;c.c_pending=!0;break;case 86:c.v=!0;c.v_pending=!0;break;case 66:c.b=!0,c.b_pending=!0}};window.onkeyup=function(k){var l=k.which||k.keyCode||k.key;c.allow_key_defaults||(k.preventDefault(),k.stopPropagation());var r=c.keys_down.indexOf(l);0<=
r&&c.keys_down.splice(r,1);switch(l){case 39:c.right=!1;break;case 37:c.left=!1;break;case 32:c.space=!1;c.space_rel_pending=!0;break;case 38:c.up=!1;break;case 40:c.dn=!1;break;case 90:c.z=!1;break;case 88:c.x=!1;break;case 67:c.c=!1;break;case 86:c.v=!1;break;case 66:c.b=!1}c.allow_key_defaults||(k.preventDefault(),k.stopPropagation())};platform.isTouchDevice?window.navigator.msPointerEnabled?(window.addEventListener("MSPointerDown",g,{passive:!1,capture:!1}),window.addEventListener("MSPointerUp",
n,{passive:!1,capture:!1})):(window.addEventListener("touchstart",g,{passive:!1,capture:!1}),window.addEventListener("touchend",n,{passive:!1,capture:!1}),window.addEventListener("touchmove",m,{passive:!1,capture:!1})):(window.onmouseup=document.onblur=d,a.onmousedown=f,a.onmousemove=b)};var _BlitSaver=function(f){window.localStorageAlias=window.localStorage;this.useCookies=!1;window.localStorage&&"undefined"!=window.localStorage||(window.localStorageAlias={},window.localStorageAlias.removeItem=function(){});this.doSaveData=function(c,a){try{c=f.game_key+"_"+c,window.localStorageAlias[c]=JSON.stringify(a)}catch(b){}};this.doGetData=function(c){try{c=f.game_key+"_"+c;var a=window.localStorageAlias[c];return a?""!=a?JSON.parse(a):null:null}catch(b){}};this.doClearData=function(c){c=
f.game_key+"_"+c;window.localStorageAlias.removeItem(c)}};var MaterialsLibrary={};function ButtonHelper(f,c,a,b,d,e,h,g){c.addEventListener&&(this.target=c,this.snds={},this.my_stage=f,this.normLabel=null==a?"norm":a,this.overLabel=null==b?"over":b,this.downLabel=null==d?"over":d,this.play=e,this._enabled=this._isOver=this._isPressed=!1,c.mouseChildren=!1,this.enabled=!0,h&&(g&&(h.actionsEnabled=!1,h.gotoAndStop&&h.gotoAndStop(g)),c.hitArea=h))}var p=ButtonHelper.prototype;p.setParams=function(f){for(var c in f)this[c]=f[c]};
p.setSounds=function(f){for(var c in f)this.snds[c]=f[c]};
p.setEnabled=function(f){if(f!=this._enabled){var c=this.target;(this._enabled=f)?(c.cursor="pointer",c.addEventListener("rollover",this),c.addEventListener("rollout",this),c.addEventListener("mousedown",this),c.addEventListener("pressup",this)):(c.cursor=null,c.removeEventListener("rollover",this),c.removeEventListener("rollout",this),c.removeEventListener("mousedown",this),c.removeEventListener("pressup",this));this._isOver=this._isPressed=!1}};p.getEnabled=function(){return this._enabled};
try{Object.defineProperties(p,{enabled:{get:p.getEnabled,set:p.setEnabled}})}catch(f){}p.toString=function(){return"[ButtonHelper]"};
p.handleEvent=function(f){var c=this.target;f=f.type;this._enabled&&("mousedown"==f?(this._isPressed=!0,f=this.downLabel,this.snds.mousedown&&__snds.playSound(this.snds.mousedown,"interface")):"pressup"==f?(this._isPressed=!1,f=this._isOver?this.overLabel:this.normLabel):"rollover"==f?(this._isOver=!0,f=this._isPressed?this.downLabel:this.overLabel,this.snds.rollover&&__snds.playSound(this.snds.rollover,"interface")):(this._isOver=!1,f=this._isPressed?this.overLabel:this.normLabel),this.play?c.gotoAndPlay&&
c.gotoAndPlay(f):c.gotoAndStop&&c.gotoAndStop(f),c.cacheID&&!this.ignore_cache&&__utils.doCache(c,oSTAGE.cache_scale),this.my_stage&&(this.my_stage.needUpdate=!0))};
var BlitTools=function(){var f=this,c=this;c.firefox_font_shift=.1;this.doInitResizer=function(a){var b=document.createElement("div");b.id="resizer";b.w=null;b.h=null;b.scroll=null;b.keep=!0;b.doUpdate=function(){if(this.w!=window.innerWidth||this.h!=window.innerHeight||this.scroll!=document.documentElement.scrollTop)this.w=window.innerWidth,this.h=window.innerHeight,this.scroll=document.documentElement.scrollTop,window.scrollTo(0,0),a(),platform.isMobile&&setTimeout(function(){window.scrollTo(0,
0);a()},250)};actives.push(b);window.addEventListener("orientationchange",function(){b.w=0;b.h=0})};this.doInitFocusManager=function(a,b){var d=!1,e=function(){d||(a&&a(),d=!0)},h=function(){d&&(b&&b(),d=!1)},g=c.doGetHiddenProp();if(g){var m=g.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(m,function(n){document[g]?e():h()})}window.addEventListener("blur",e);window.addEventListener("focus",h)};this.doGetHiddenProp=function(){var a=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";
for(var b=0;b<a.length;b++)if(a[b]+"Hidden"in document)return a[b]+"Hidden";return null};this.ButtonHelper=ButtonHelper;this.doUpdateCreateJsStage=function(a,b){if(a.needUpdate||0<a.activeTweens.length||0<a.actives.length||0<a.updateFrames){a.updateFrames=Math.max(0,a.updateFrames-1);for(var d=a.actives.length-1;0<=d;d--){var e=a.actives[d];if(!e.me||a.contains(e.me)&&!e.need_destroy)e.need_purged?a.actives.splice(d,1):e.update_function?e.update_function(e):e.doUpdate&&e.doUpdate();else{try{e.me.parent.removeChild(e.me)}catch(h){}a.actives.splice(d,
1)}}for(d=a.activeTweens.length-1;0<=d;d--)a.contains(a.activeTweens[d])?createjs.Tween.hasActiveTweens(a.activeTweens[d])||a.activeTweens.splice(d,1):a.activeTweens.splice(d,1);b?a.update(b):a.update();a.needUpdate=!1}};this.createCORSRequest=function(a,b){var d=new XMLHttpRequest;"withCredentials"in d?d.open(a,b,!0):"undefined"!=typeof XDomainRequest?(d=new XDomainRequest,d.open(a,b)):d=null;return d};this.doLoad3dAssets=function(a,b){if(0==a.manifest.length)a.progress=1,a.complete=!0;else if(!a.started){a.started=
!0;var d=a.manifest,e=new THREE.LoadingManager;e.onLoad=function(){e.doCheckLoading()};e.onError=function(){trace("load error")};e.onProgress=function(k,l,r){a.progress=Math.max(a.progress,l/r);for(var q=0;q<d.length;q++)if(d[q].src==k){d.splice(q,1);break}l==r&&e.doCheckLoading()};e.doCheckLoading=function(){a.loaded||0!=e.items_to_process||0!=d.length||(a.progress=1,a.loaded=!0)};e.items_to_process=d.length;for(var h=0;h<d.length;h++){var g=d[h];switch(g.type){case "json":var m=c.createCORSRequest("GET",
g.src);if(!m)return;m.onload=function(){var k=JSON.parse(m.responseText);b[this.name]=k}.bind({name:g.name});m.onerror=function(){trace("error loading data")};m.send();break;case "animated_fbx":var n=new THREE.FBXLoader(e);n.load(g.src,function(k){var l=this.data;k.traverse(function(r){r.isMesh&&(l.flat_shading?r.material=new THREE.MeshBasicMaterial({toneMapped:!1,map:r.material.map,blending:THREE.NoBlending,fog:!1,side:THREE.FrontSide,vertexColors:l.vertexColors}):(r.material.side=THREE.FrontSide,
r.material.vertexColors=l.vertexColors),r.material.needsUpdate=!0)});b[l.id]=k;e.items_to_process--;e.doCheckLoading()}.bind({data:g}));break;case "static_fbx":n=new THREE.FBXLoader(e);n.load(g.src,function(k){for(var l=this.data,r=0;r<k.children.length;r++){var q=k.children[r];q.name&&(q.traverse(function(t){if(t instanceof THREE.Mesh&&t.material.map){t.material.map.wrapS=THREE.RepeatWrapping;t.material.map.wrapT=THREE.RepeatWrapping;t.material.map.encoding=THREE.LinearEncoding;l.pixelated?(t.material.map.minFilter=
THREE.NearestFilter,t.material.map.magFilter=THREE.NearestFilter):(t.material.map.minFilter=platform.isMobile?THREE.NearestMipMapNearestFilter:THREE.LinearMipMapNearestFilter,t.material.map.magFilter=THREE.LinearFilter);if(l.flat_shading){var u=t.material.map.uuid;MaterialsLibrary[u]||(MaterialsLibrary[u]=new THREE.MeshBasicMaterial({map:t.material.map,blending:THREE.NoBlending,transparent:!1,opacity:1,fog:!1,side:THREE.FrontSide}));t.material=MaterialsLibrary[u]}t.material.needsUpdate=!0}}),b[q.name]=
q)}e.items_to_process--;e.doCheckLoading()}.bind({data:g}));break;case "static":n=new THREE.ObjectLoader(e);n.load(g.src,function(k){for(var l=this.data,r=0;r<k.children.length;r++){var q=k.children[r];if(q.name)if(q.name.includes(".DAE")||q.name.includes("ROOT"))for(var t=0;t<q.children.length;t++){var u=q.children[t];b[u.name]=u}else q.traverse(function(v){v instanceof THREE.Mesh&&v.material.map&&(v.material.map.wrapS=THREE.RepeatWrapping,v.material.map.wrapT=THREE.RepeatWrapping,l.pixelated?(v.material.map.minFilter=
THREE.NearestFilter,v.material.map.magFilter=THREE.NearestFilter):platform.isMobile?(v.material.map.minFilter=THREE.NearestMipMapNearestFilter,v.material.map.magFilter=THREE.NearestFilter):(v.material.map.minFilter=THREE.LinearMipMapNearestFilter,v.material.map.magFilter=THREE.LinearFilter))}),b[q.name]=q}e.items_to_process--;e.doCheckLoading()}.bind({name:g.name}));break;case "animated_json":100>THREE.REVISION?(n=new THREE.JSONLoader(e),n.load(g.src,function(k,l){my_data.pixelated?(l[0].map.minFilter=
THREE.NearestFilter,l[0].map.magFilter=THREE.NearestFilter):platform.isMobile?(l[0].map.minFilter=THREE.NearestMipMapNearestFilter,l[0].map.magFilter=THREE.NearestFilter):(l[0].map.minFilter=THREE.NearestMipMapNearestFilter,l[0].map.minFilter=THREE.LinearFilter);l[0].map.wrapS=THREE.ClampToEdgeWrapping;l[0].map.wrapT=THREE.ClampToEdgeWrapping;l=new THREE.MeshBasicMaterial({map:l[0].map});l.skinning=!0;b[this.name]=new THREE.SkinnedMesh(k,l);e.items_to_process--;e.doCheckLoading()}.bind({name:g.name}))):
(n=new THREE.LegacyJSONLoader(e),n.load(g.src,function(k,l){my_data.pixelated?(l[0].map.minFilter=THREE.NearestFilter,l[0].map.magFilter=THREE.NearestFilter):platform.isMobile?(l[0].map.minFilter=THREE.NearestMipMapNearestFilter,l[0].map.magFilter=THREE.NearestFilter):(l[0].map.minFilter=THREE.NearestMipMapNearestFilter,l[0].map.minFilter=THREE.LinearFilter);l[0].map.wrapS=THREE.ClampToEdgeWrapping;l[0].map.wrapT=THREE.ClampToEdgeWrapping;l=new THREE.MeshBasicMaterial({map:l[0].map});l.skinning=!0;
k=(new THREE.BufferGeometry).fromGeometry(k);b[this.name]=new THREE.SkinnedMesh(k,l);e.items_to_process--;e.doCheckLoading()}.bind({name:g.name})));break;case "font":n=new THREE.FontLoader(e);n.load(g.src,function(k){b[this.name]=k;e.items_to_process--;e.doCheckLoading()}.bind({name:g.name}));break;case "sprite":n=new THREE.TextureLoader(e);n.load(g.src,function(k){k=new THREE.SpriteMaterial({map:k,color:16777215,transparent:!0});k=new THREE.Sprite(k);b[this.name]=k;e.items_to_process--;e.doCheckLoading()}.bind({name:g.name}));
break;case "texture":n=new THREE.TextureLoader(e);n.load(g.src,function(k){var l=this.data;l.wrapping&&(k.wrapS=THREE.RepeatWrapping,k.wrapT=THREE.RepeatWrapping);b[l.name]=k;e.items_to_process--;e.doCheckLoading()}.bind({data:g}));break;case "skybox":n=new THREE.CubeTextureLoader(e),n.setPath("media/models/skyboxes/"+g.name+"/"),n.load("right.jpg left.jpg up.jpg down.jpg front.jpg back.jpg".split(" "),function(k){platform.isMobile?(k.magFilter=THREE.NearestFilter,k.minFilter=THREE.NearestMipMapNearestFilter):
k.minFilter=THREE.LinearFilter;b[this.name]=k;e.items_to_process--;e.doCheckLoading()}.bind({name:g.name}))}}}};this.doLoadAssets=function(a){var b=this;if(0==a.manifest.length)a.progress=1,a.complete=!0;else if(!a.started){a.started=!0;for(var d=0;d<a.manifest.length;d++)try{for(var e=a.manifest[d].data.audioSprite,h=0;h<e.length;h++)e[h].duration-=e[h].startTime}catch(n){}images=images||{};var g=document.documentElement.appendChild(document.createElement("div"));g.className="loader_dummy";g.id=
"loader_dummy";var m=new createjs.LoadQueue(!1);m.installPlugin(createjs.Sound);m.removeEventListener("fileload",b.onFileLoad);m.removeEventListener("progress",b.onProgress);m.removeEventListener("complete",b.onComplete);m.removeEventListener("error",b.onError);this.onFileLoad=function(n){if("javascript"==n.item.type){var k=document.createElement("script");k.setAttribute("type","text/javascript");k.setAttribute("src",n.item.src);document.getElementsByTagName("head")[0].appendChild(k)}else"image"==
n.item.type||"svg"==n.item.type?images[n.item.id]=n.result:"text"==n.item.type&&(k=g.appendChild(document.createElement("div")),k.className="general_absolute",k.style.fontFamily=n.item.id,k.style.color="white",k.style.visibility="hidden",k.innerHTML="-")};this.onError=function(n){trace(n.title+": "+n.data.src);try{assets_retry.manifest.push({src:n.data.src,id:n.data.id})}catch(k){}};this.onProgress=function(n){a.progress=n.loaded};this.onComplete=function(n){a.progress=1;a.loaded=!0;a.loadTime=window.performance.now();
m.removeEventListener("fileload",b.onFileLoad);m.removeEventListener("progress",b.onProgress);m.removeEventListener("complete",b.onComplete);m.removeEventListener("error",b.onError);__utils.doDestroyElement(document.getElementById("loader_dummy"))};m.addEventListener("fileload",b.onFileLoad);m.addEventListener("progress",b.onProgress);m.addEventListener("complete",b.onComplete);m.addEventListener("error",b.onError);m.loadManifest(a.manifest)}};this.doFade=function(a,b,d,e){a.my_opacity=Number(a.style.opacity);
a.to_opacity=b;a.step=(b-a.my_opacity)/(60*d);a.forget=!1;a.doUpdate=function(){this.my_opacity=0<this.step?Math.min(this.to_opacity,this.my_opacity+this.step):Math.max(this.to_opacity,this.my_opacity+this.step);this.style.opacity=this.my_opacity;this.my_opacity==this.to_opacity&&(this.forget=!0,e&&e())};actives.push(a)};this.doFadeTo=function(a,b){a.style.display="block";a.style.opacity=0;a.mode=1;a.my_opacity=0;a.doUpdate=function(){switch(this.mode){case 1:this.my_opacity+=.05;this.style.opacity=
Math.min(1,Math.max(0,this.my_opacity));1<=this.my_opacity&&(this.mode=2,b&&b());break;case 2:this.my_opacity-=.05,this.style.opacity=Math.max(0,Math.min(1,this.my_opacity)),0>=this.my_opacity&&(this.purge=!0,this.style.display="none")}};actives.push(a)};this.NewPulse=function(a,b){var d=this;b=b||{};var e=b.seed||0,h=b.ease||1,g=b.ease_speed||1;d.value=0;d.value_normal=0;this.reset=function(m){d.value=Math.sin(__utils.radFromDeg(m.seed||0));d.value_normal=.5+.5*d.value};this.update=function(){e+=
a;360<=e&&(e-=360);d.value=Math.sin(__utils.radFromDeg(e))*h;d.value_normal=.5+.5*d.value*h;h=Math.min(1,h+g)}};this.dataURItoBlob=function(a){var b=-1!==a.split(",")[0].indexOf("base64")?atob(a.split(",")[1]):decodeURI(a.split(",")[1]);a=a.split(",")[0].split(":")[1].split(";")[0];for(var d=[],e=0;e<b.length;e++)d[e]=b.charCodeAt(e);return new Blob([new Uint8Array(d)],{type:a})};this.ordinal_suffix_of=function(a){var b=a%10;a%=100;return 1==b&&11!=a?"st":2==b&&12!=a?"nd":3==b&&13!=a?"rd":"th"};this.doFader=
function(){fader.style.display="inline-block";fader.style.opacity=1;updateQueue.push({keep:!0,opacity:1.5,update_function:function(){this.opacity-=.1;fader.style.opacity=Math.max(0,Math.min(1,this.opacity));0>=this.opacity&&(this.keep=!1,fader.style.display="none")}})};this.doGetBrowser=function(){var a=navigator.userAgent,b=a.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(b[1])){var d=/\brv[ :]+(\d+)/g.exec(a)||[];return"IE "+(d[1]||"")}if("Chrome"===
b[1]&&(d=a.match(/\bOPR\/(\d+)/),null!=d))return"Opera "+d[1];b=b[2]?[b[1],b[2]]:[navigator.appName,navigator.appVersion,"-?"];null!=(d=a.match(/version\/(\d+)/i))&&b.splice(1,1,d[1]);return b.join(" ")};this.getCSSPPI=function(){var a=document.createElement("div");a.style.width="1in";var b=document.getElementsByTagName("body")[0];b.appendChild(a);var d=a.offsetWidth;b.removeChild(a);return parseFloat(d)};this.getPPI=function(){var a=document.createElement("div");a.style.width="1in";var b=document.getElementsByTagName("body")[0];
b.appendChild(a);var d=a.offsetWidth*(window.devicePixelRatio||1);b.removeChild(a);return parseFloat(d)};this.getPixelRatio=function(){var a=document.createElement("canvas").getContext("2d");return(window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1)};this.doGetLanguage=function(){var a;navigator&&navigator.userAgent&&(a=navigator.userAgent.match(/android.*\W(\w\w)-(\w\w)\W/i))&&
(a=a[1]);!a&&navigator&&(navigator.language?a=navigator.language:navigator.browserLanguage?a=navigator.browserLanguage:navigator.systemLanguage?a=navigator.systemLanguage:navigator.userLanguage&&(a=navigator.userLanguage),a=a.substr(0,2));return a};this.getQueryString=function(){var a={},b=window.location.search.substring(1);1>b.length&&null!=window.location.toString().split("%3F")[1]&&(b=window.location.toString().split("%3F")[1]);b=b.split("&");for(var d=0;d<b.length;d++){var e=b[d].split("=");
"undefined"===typeof a[e[0]]?a[e[0]]=e[1]:"string"===typeof a[e[0]]?a[e[0]]=[a[e[0]],e[1]]:a[e[0]].push(e[1])}return a};this.s4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};this.guid=function(){return this.s4()+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+this.s4()+this.s4()};this.formatDate=function(a,b,d){function e(t,u){t+="";for(u=u||2;t.length<u;)t="0"+t;return t}var h="\x00 January February March April May June July August September October November December".split(" "),
g="\u0001 Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),m="\u0002 Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),n="\u0003 Sun Mon Tue Wed Thu Fri Sat".split(" "),k=d?a.getUTCFullYear():a.getFullYear();b=b.replace(/(^|[^\\])yyyy+/g,"$1"+k);b=b.replace(/(^|[^\\])yy/g,"$1"+k.toString().substr(2,2));b=b.replace(/(^|[^\\])y/g,"$1"+k);k=(d?a.getUTCMonth():a.getMonth())+1;b=b.replace(/(^|[^\\])MMMM+/g,"$1"+h[0]);b=b.replace(/(^|[^\\])MMM/g,"$1"+g[0]);b=b.replace(/(^|[^\\])MM/g,
"$1"+e(k));b=b.replace(/(^|[^\\])M/g,"$1"+k);var l=d?a.getUTCDate():a.getDate();b=b.replace(/(^|[^\\])dddd+/g,"$1"+m[0]);b=b.replace(/(^|[^\\])ddd/g,"$1"+n[0]);b=b.replace(/(^|[^\\])dd/g,"$1"+e(l));b=b.replace(/(^|[^\\])d/g,"$1"+l);l=d?a.getUTCHours():a.getHours();b=b.replace(/(^|[^\\])HH+/g,"$1"+e(l));b=b.replace(/(^|[^\\])H/g,"$1"+l);var r=12<l?l-12:0==l?12:l;b=b.replace(/(^|[^\\])hh+/g,"$1"+e(r));b=b.replace(/(^|[^\\])h/g,"$1"+r);r=d?a.getUTCMinutes():a.getMinutes();b=b.replace(/(^|[^\\])mm+/g,
"$1"+e(r));b=b.replace(/(^|[^\\])m/g,"$1"+r);r=d?a.getUTCSeconds():a.getSeconds();b=b.replace(/(^|[^\\])ss+/g,"$1"+e(r));b=b.replace(/(^|[^\\])s/g,"$1"+r);r=d?a.getUTCMilliseconds():a.getMilliseconds();b=b.replace(/(^|[^\\])fff+/g,"$1"+e(r,3));r=Math.round(r/10);b=b.replace(/(^|[^\\])ff/g,"$1"+e(r));r=Math.round(r/10);b=b.replace(/(^|[^\\])f/g,"$1"+r);l=12>l?"AM":"PM";b=b.replace(/(^|[^\\])TT+/g,"$1"+l);b=b.replace(/(^|[^\\])T/g,"$1"+l.charAt(0));l=l.toLowerCase();b=b.replace(/(^|[^\\])tt+/g,"$1"+
l);b=b.replace(/(^|[^\\])t/g,"$1"+l.charAt(0));l=-a.getTimezoneOffset();r=d||!l?"Z":0<l?"+":"-";if(!d){l=Math.abs(l);var q=l%60;r+=e(Math.floor(l/60))+":"+e(q)}b=b.replace(/(^|[^\\])K/g,"$1"+r);a=(d?a.getUTCDay():a.getDay())+1;b=b.replace(new RegExp(m[0],"g"),m[a]);b=b.replace(new RegExp(n[0],"g"),n[a]);b=b.replace(new RegExp(h[0],"g"),h[k]);b=b.replace(new RegExp(g[0],"g"),g[k]);return b=b.replace(/\\(.)/g,"$1")};this.getDayNumber=function(){var a=new Date(2014,0,1);a=(new Date).getTime()-a.getTime();
return Math.ceil(a/864E5)};this.doGoFullScreen=function(){var a=document.documentElement;(a.requestFullScreen||a.webkitRequestFullScreen||a.mozRequestFullScreen).call(a)};this.doCheckFullScreen=function(){trace("doCheckFullScreen");return document.fullscreenEnabled||document.mozFullscreenEnabled||document.webkitIsFullScreen?!0:!1};this.doFullScreenOn=function(){var a=document.documentElement;a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?
a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen();oSTAGE.is_fullscreen=!0};this.doFullScreenOff=function(){document.exitFullscreen?document.exitFullscreen():document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();oSTAGE.is_fullscreen=!1};this.doFadeandDestroy=function(a){a=a.currentTarget;a.alpha-=
.1;0>=a.alpha&&a.parent.removeChild(a)};this.doGetPOT=function(a){return Math.pow(2,Math.ceil(Math.log(a)/Math.log(2)))};this.doCache=function(a,b){b||(b=oSTAGE.cache_scale||oSTAGE.scale);a.regX|=0;a.regY|=0;a.x|=0;a.y|=0;a.uncache();var d=a.getBounds(),e=a.nominalBounds,h={};if(a.force_bounds)h.x=a.force_bounds.x,h.y=a.force_bounds.y,h.width=a.force_bounds.width,h.height=a.force_bounds.height;else if(!a.force_bounds&&d&&e)h.x=Math.min(e.x,d.x),h.y=Math.min(e.y,d.y),h.width=Math.max(e.width,d.width),
h.height=Math.max(e.height,d.height);else if(d)h=d;else if(e)h=e;else return;d=!1;a.stage&&a.stage._webGLContext&&(d=!0);d?a.cache(h.x,h.y,__utils.doGetPOT(h.width),__utils.doGetPOT(h.height),b):a.cache(h.x,h.y,Math.ceil(h.width),Math.ceil(h.height),b)};this._doLerp=function(a,b,d){return a+d*(b-a)};this.doLerp=function(a,b,d){return a*(1-d)+b*d};this.doClamp=function(a,b,d){return Math.min(void 0===d?1:d,Math.max(void 0===b?0:b,a))};this.doInvlerp=function(a,b,d){return f.doClamp((d-a)/(b-a))};this.doRange=
function(a,b,d,e,h){return f.doLerp(d,e,f.doInvlerp(a,b,h))};this.doRound=function(a,b){return Number(Math.round(a+"e"+b)+"e-"+b)};this.doGetIntersect=function(a,b,d,e,h,g,m,n){if(a===d&&b===e||h===m&&g===n)return!1;var k=(n-g)*(d-a)-(m-h)*(e-b);if(0===k)return!1;m=((m-h)*(b-g)-(n-g)*(a-h))/k;h=((d-a)*(b-g)-(e-b)*(a-h))/k;return 0>m||1<m||0>h||1<h?!1:{x:a+m*(d-a),y:b+m*(e-b)}};this.doGetDistance=function(a,b,d,e){a-=d;b-=e;return Math.sqrt(a*a+b*b)};this.doGetAngle=function(a,b,d,e){a=Math.atan2(e-
b,d-a);return a*=180/Math.PI};this.degFromRad=function(a){return 180/Math.PI*a};this.radFromDeg=function(a){return Math.PI/180*a};this.getRandomArbitrary=function(a,b){return Math.random()*(b-a)+a};this.getRandomInt=function(a,b){return Math.floor(Math.random()*(b-a+1))+a};this.doLerp=function(a,b,d){return(1-d)*a+d*b};this.doRandomizeArray=function(a){a=a.slice();for(var b=[];0<a.length;){var d=Math.floor(Math.random()*a.length),e=a[d];a.splice(d,1);b.push(e)}return b};this.doClearTimeouts=function(){for(var a=
0;a<timeouts.length;a++)clearTimeout(timeouts[a]);timeouts=[]};this.getPointInBetweenByPerc=function(a,b,d){b=b.clone().sub(a);var e=b.length();b=b.normalize().multiplyScalar(e*d);return a.clone().add(b)};this.doText=function(a,b,d){d=d||{};if(a.my_origin)a.x=a.my_origin.x,a.y=a.my_origin.y;else{var e=a.getBounds()||{height:0};a.my_origin={x:a.x,y:a.y,h:e.height,lineHeight:a.lineHeight,center:a.y+.5*e.height}}if("object"!==typeof b||null===b)b={value:b};e=b.value||b.txt;var h=platform.isMobile?b.overrides_mobile:
b.overrides_desktop;if(h)for(var g in h)switch(g){case "adjustX":b.regX=-h[g];break;case "adjustY":b.regY=-h[g];break;default:b[g]=h[g]}for(g in b)"value"!=g&&(a[g]=b[g]);e||0==e||""==e||(e="MISSING TEXT",a.color="#FF0000");var m=a.font,n=m.indexOf("'"),k=m.lastIndexOf("'");a.original_font_family||(a.original_font_family=m.slice(n+1,k));g=a.original_font_family;var l=0,r=m.indexOf("px");for(h=r;0<=h;h--)if(" "==m[h]){l=h;break}a.original_font_size||(a.original_font_size=Number(m.slice(l,r)));h=a.original_font_size;
m=m.substring(0,l)+m.substring(r+2,n)+m.substring(k,m.length-1);m=m.split(" ").join("");a.original_font_weight||(a.original_font_weight=m);m=a.original_font_weight;a.fontFamily&&(g=a.fontFamily);a.fontWeight&&(m=a.fontWeight);b.fontSize&&(-1!=b.fontSize.indexOf("px")?h=b.fontSize.split("px")[0]:-1!=b.fontSize.indexOf("%")&&(n=.01*b.fontSize.split("%")[0],h*=n,a.lineHeight=a.my_origin.lineHeight*n));b.lineHeight&&(-1!=String(b.lineHeight).indexOf("%")?(b=Number(.01*String(b.lineHeight).split("%")[0]),
a.lineHeight=a.my_origin.lineHeight*b):a.lineHeight=Number(b.lineHeight));a.font_size=h;a.font=1<=m.length?m+" "+h+"px '"+g+"'":h+"px '"+g+"'";e=String(e);b=/<br>/g;e=e.replace(b,"\n");b=/\{\*br\*\}/g;e=e.replace(b,"\n");b=/\{\*p\*\}/g;e=e.replace(b,"\n\n");b=/<p>/g;e=e.replace(b,"\n\n");a.text=e;e=a.getMetrics().lines.length;b=d.text_height||a.lineHeight;switch(d.verticalAlign){case "top":a.textBaseline="top";break;case "bottom":a.textBaseline="top";a.y-=Math.max(0,e)*a.lineHeight;break;case "true_middle":a.textBaseline=
"top";a.y-=Math.max(0,e)*a.lineHeight*.5;break;case "center":a.textBaseline="top";a.y+=.5*b-.5*a.font_size;break;case "middle":case void 0:case null:a.textBaseline="middle",a.y+=.5*a.lineHeight-Math.max(0,e-1)*(d.text_height||a.lineHeight)*.5}a.x|=0;a.y|=0};this.doSubText=function(a,b,d){a=String(a);return a=a.replace(b,d)};this.doSubValue=function(a,b){a=String(a);return a=a.replace(/\{\*var\*\}/g,b)};this.doSubValue2=function(a,b){a=String(a);return a=a.replace(/\{\*var2\*\}/g,b)};this.doHTMLText=
function(a,b,d){if("object"!==typeof b||null===b)b={value:b};var e=b.value,h=a.my_computed_style||window.getComputedStyle(a,null)||a.style;a.my_fontsize=parseFloat(h["font-size"]||h.fontSize);if(h=platform.isMobile?b.overrides_mobile:b.overrides_desktop)for(var g in h)switch(g){case "adjustX":b.transform=b.transform?b.transform+"translateX("+h[g]+"px)":"translateX("+h[g]+"px)";break;case "adjustY":b.transform=b.transform?b.transform+"translateY("+h[g]+"px)":"translateY("+h[g]+"px)";break;default:b[g]=
h[g]}for(g in b)"value"!=g&&("fontSize"==g?(b[g].indexOf("%"),a.style.fontSize=b[g]):a.style[g]=b[g]);e||0==e||(e="MISSING TEXT",a.style.color="#FF0000");g="";b.icon&&(g+='<i class="'+b.icon+'"></i> ');a.innerHTML=d?a.innerHTML+(g+e):g+e};this.doFormatCurrency=function(a){var b=oLANG.comma.value,d=oLANG.currency.value;a=__utils.doRound(a,2);a=String(a).split(".");for(var e=a[0],h="",g=0,m=e.length-1;0<=m;m--)h=e.charAt(m)+h,g++,3==g&&(g=0,h=b+h);h.charAt(0)==b&&(h=h.substring(1,h.length));h=d+h;1<
a.length&&(h+="."+a[1]);return h};this.doFormatNumber=function(a,b){b="undefined"!==typeof b?b:oLANG.comma;a=Math.floor(a);a=String(a);for(var d="",e=0,h=a.length-1;0<=h;h--)d=a.charAt(h)+d,e++,3==e&&(e=0,d=b+d);d.charAt(0)==b&&(d=d.substring(1,d.length));return""+d};this.doFormatTime=function(a){var b=Math.floor(.001*a),d=Math.floor(b/60);return{m:d,s:b-60*d,h:Math.floor(.1*(a-1E3*b))}};this.doCreateTextArea=function(a,b,d,e,h,g,m,n,k,l,r){var q=document.createElement("div");q.setAttribute("id",
a);null!=b&&"body"!=b?document.getElementById(b).appendChild(q):document.body.appendChild(q);k||(m+=";-webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;cursor:default;");q.setAttribute("style",m);q.style.position="absolute";q.style.zIndex="99999";l?(a=function(){q.style.width=h*window.innerWidth+"px";q.style.height=g*window.innerHeight+"px";q.style.left=d*window.innerWidth+"px";q.style.top=e*window.innerHeight+"px"},a(),window.addEventListener("resize",a)):
(q.style.width=h+"px",q.style.height=g+"px",q.style.left=d+"px",q.style.top=e+"px");q.style.overflowY=n?"auto":"hidden";q.innerHTML=r;return q};this.doChangeElement=function(a,b,d,e,h,g){a=null!=a?a:document.getElementById(b);a.style.width=h+"px";a.style.height=g+"px";a.style.marginLeft=d+"px";a.style.marginTop=e+"px"};this.doDestroyElement=function(a){"string"==typeof a&&(a=document.getElementById(a));a&&(this.doDestroyAllChildren(a),a.parentNode.removeChild(a))};this.doDestroyAllChildren=function(a){if(a)for(;0<
a.childNodes.length;)a.removeChild(a.childNodes[0])};this.addDomObject=function(a,b,d,e,h,g){var m=doWrappertoScreen(b,d);a.style.left=m.x+"px";a.style.top=m.y+"px";0!=e&&(a.style.width=e*oSTAGE.scale+"px");0!=h&&(a.style.height=h*oSTAGE.scale+"px");m={};m.obj=a;m.x=b;m.y=d;m.w=e;m.h=h;m.font_size=g;dom_objects.push(m)};this.doClearEventListeners=function(a){for(var b=0;b<a.length;b++)a[b].removeAllEventListeners()};this.addSourceToVideo=function(a,b,d){var e=document.createElement("source");e.src=
b;e.type=d;a.appendChild(e)};this.canPlayVideoInline=function(){return navigator.userAgent.match(/(iPhone|iPod)/g)?"playsInline"in document.createElement("video"):!0}};var RESIZER,_BlitFader=function(f){f=void 0===f?{}:f;var c=document.getElementById(f.div_name);c.style.display="none";c.style.opacity=0;this.doTransitionTo=function(a,b,d,e){callbackMid=b||function(){};e=e||function(){};c.style.display="block";c.style.opacity=0;createjs.Tween.get(c.style,{override:!0}).to({opacity:1},a).call(callbackMid).to({opacity:0},d).call(function(){e();c.style.opacity=1;c.style.display="none"})};this.doFadeSet=function(a){c.style.display=0==a?"none":"block";c.style.opacity=
a};this.doFadeIn=function(a,b){b=b||function(){};createjs.Tween.get(c,{override:!0}).to({opacity:0},a).call(function(){c.style.display="none";b()})};this.doFadeOut=function(a,b){b=b||function(){};c.style.display="block";c.style.opacity=0;createjs.Tween.get(c,{override:!0}).to({opacity:1},a).call(b)};this.doFadeTo=function(a,b,d){d=d||function(){};c.style.display="block";createjs.Tween.get(c,{override:!0}).to({opacity:a},b).call(function(){d();c.style.opacity=1;c.style.display=0!=a?"block":"none"})}},
_BlitWindow=function(f){var c=this;document.addEventListener("gesturestart",function(a){a.preventDefault()});this.doInitResizer=function(a){RESIZER={id:"resizer",w:null,h:null,scroll:null,keep:!0,was_fullscreen:!1,is_fullscreen:!1,repeat_frame:0,needUpdate:!1,stable_frames:0,skip_cover:!1,update_when_stable:!1,doUpdateNow:function(){this.needUpdate=!0;this.doUpdate()},doUpdate:function(){var b=!1;if(this.w!=window.innerWidth||this.h!=window.innerHeight||this.scroll!=document.documentElement.scrollTop){this.stable_frames=
0;this.update_when_stable=!0;if(this.w!=window.innerWidth||this.h!=window.innerHeight)if(RESIZER.skip_cover)RESIZER.skip_cover=!1;else try{document.getElementById("cover").style.display="block"}catch(d){}this.w=window.innerWidth;this.h=window.innerHeight;this.scroll=document.documentElement.scrollTop}else this.update_when_stable&&(this.stable_frames++,10<this.stable_frames&&(this.update_when_stable=!1,this.repeat_frame=5,b=!0));if(this.needUpdate||b||0<this.repeat_frame){this.stable_frames=0;this.needUpdate=
!1;this.repeat_frame=Math.max(0,this.repeat_frame-1);this.w=window.innerWidth;this.h=window.innerHeight;this.is_fullscreen=c.doCheckFullScreen();this.scroll=document.documentElement.scrollTop;if(0==this.repeat_frame)try{document.getElementById("cover").style.display="none"}catch(d){}document.body.style.height=window.innerHeight+"px";this.was_fullscreen!=this.is_fullscreen&&ControlsPanel&&(ControlsPanel.doUpdateFullScreen(),this.was_fullscreen=this.is_fullscreen,oSTAGE.is_fullscreen=this.is_fullscreen);
a()}}};actives.push(RESIZER);window.addEventListener("fullscreenchange",function(){RESIZER.needUpdate=!0});window.addEventListener("orientationchange",function(){RESIZER.needUpdate=!0})};this.doInitFocusManager=function(a,b){var d=!1;window.addEventListener("blur",function(){d||(a&&a(),d=!0,BlitInputs.click_pending=!1)});window.addEventListener("focus",function(){d&&(b&&b(),d=!1,RESIZER.needUpdate=!0,BlitInputs.click_pending=!1)})};this.doGetHiddenProp=function(){var a=["webkit","moz","ms","o"];if("hidden"in
document)return"hidden";for(var b=0;b<a.length;b++)if(a[b]+"Hidden"in document)return a[b]+"Hidden";return null};this.doWindowResize=function(){var a=document.getElementById("wrapper"),b=document.body.offsetWidth,d=document.body.offsetHeight;oSTAGE.is_landscape=b>=d?!0:!1;oSTAGE.pixel_ratio=__utils.getPixelRatio();var e=lib.properties.height,h=lib.properties.width,g=e*h;oCONFIG.min_area&&(g=oCONFIG.min_area/g,e*=g,h*=g);if(oCONFIG.min_width){g=platform.isMobile?oCONFIG.min_width.mobile:oCONFIG.min_width.desktop;
var m=platform.isMobile?oCONFIG.max_width.mobile:oCONFIG.max_width.desktop,n=platform.isMobile?oCONFIG.min_height.mobile:oCONFIG.min_height.desktop,k=platform.isMobile?oCONFIG.max_height.mobile:oCONFIG.max_height.desktop;oSTAGE.is_landscape?h*=1.5:e*=1.5;h=Math.min(m,Math.max(g,h));e=Math.min(k,Math.max(n,e))}oCONFIG.min_dimensions&&(g=oSTAGE.is_landscape?oCONFIG.min_dimensions.landscape:oCONFIG.min_dimensions.portrait,e=Math.max(g.h,e),h=Math.max(g.w,h));if(g=document.getElementById("orientation_overlay"))platform.isMobile&&
"landscape"==oCONFIG.game_orientation&&!oSTAGE.is_landscape?(g.style.backgroundImage="url('media/images/landscape_only.gif')",g.style.display="block",__snds.forceMute()):platform.isMobile&&"portrait"==oCONFIG.game_orientation&&oSTAGE.is_landscape?(g.style.backgroundImage="url('media/images/portrait_only.gif')",g.style.display="block",__snds.forceMute()):(g.style.display="none",__snds.unforceMute());g=0;try{FOOTER.doResizeUpdate();var l=document.getElementById("footer");l&&(g="none"==l.style.display?
0:l.getBoundingClientRect().height)}catch(r){}oSTAGE.window_width=oSTAGE.screen_width=b;oSTAGE.window_height=oSTAGE.screen_height=d-g;d=oSTAGE.screen_width/oSTAGE.screen_height;l=Math.min(Math.max(d,oCONFIG.game_ratio.min),oCONFIG.game_ratio.max);l>d?(oSTAGE.wrapper_width=Math.ceil(oSTAGE.window_width)+1,oSTAGE.wrapper_height=Math.ceil(oSTAGE.window_width/l)):(oSTAGE.wrapper_height=Math.ceil(oSTAGE.window_height),oSTAGE.wrapper_width=Math.ceil(oSTAGE.window_height*l)+1);oSTAGE.scale=Math.min(oSTAGE.wrapper_height/
e,oSTAGE.wrapper_width/h);oSTAGE.scale_inv=1/oSTAGE.scale;oSTAGE.cache_scale=oSTAGE.scale*oSTAGE.pixel_ratio;oSTAGE.game_width=Math.ceil(oSTAGE.wrapper_width*oSTAGE.scale_inv);oSTAGE.game_height=Math.ceil(oSTAGE.wrapper_height*oSTAGE.scale_inv);oSTAGE.game_native_width=h;oSTAGE.game_native_height=e;oSTAGE.game_width_margins=.5*(oSTAGE.game_width-h)|0;oSTAGE.game_height_margins=.5*(oSTAGE.game_height-e)|0;oSTAGE.game_top=-oSTAGE.game_height_margins;oSTAGE.game_bottom=oSTAGE.game_height-oSTAGE.game_height_margins;
oSTAGE.game_left=-oSTAGE.game_width_margins;oSTAGE.game_right=oSTAGE.game_width-oSTAGE.game_width_margins;oSTAGE.game_center_x=.5*h;oSTAGE.game_center_y=.5*e;oSTAGE.game_size={left:-oSTAGE.game_width_margins,top:-oSTAGE.game_height_margins,width:oSTAGE.game_width,height:oSTAGE.game_height,right:oSTAGE.game_width-oSTAGE.game_width_margins,bottom:oSTAGE.game_height-oSTAGE.game_height_margins,center_x:.5*h,center_y:.5*e,native_height:lib.properties.height,native_width:lib.properties.width};a.style.width=
oSTAGE.wrapper_width+"px";a.style.height=oSTAGE.wrapper_height+"px";a.style.top="0px";a.style.left=Math.floor(.5*(b-a.clientWidth))+"px";for(a=update_queue.length-1;0<=a;a--)update_queue[a].forget?update_queue.splice(a,1):update_queue[a].doResizeUpdate?update_queue[a].doResizeUpdate():update_queue.splice(a,1)};this.doCheckFullScreen=function(){return document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen||document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||
document.msFullscreenElement};this.doFullScreenOn=function(){if(!oSTAGE.is_fullscreen){var a=document.documentElement;a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen();RESIZER.needUpdate=!0}};this.doFullScreenOff=function(){if(oSTAGE.is_fullscreen){var a=document;a.exitFullscreen?a.exitFullscreen():a.cancelFullScreen?a.cancelFullScreen():a.mozCancelFullScreen?
a.mozCancelFullScreen():a.msExitFullscreen?a.msExitFullscreen():a.webkitExitFullscreen&&a.webkitExitFullscreen();RESIZER.needUpdate=!0}}};this.myNameSpace=this.myNameSpace||{};
(function(){function f(){}var c={};f.prototype={initialized:!1,snd_queue:{},snd_counter:0,systemMute:!1,init:function(a){if(0==this.initialized)return this.initialized=!0,this.mute=!1,createjs.Sound.muted=0==this.mute?!1:!0,window.addEventListener("mousedown",__snds.enableSounds),createjs.Sound.initializeDefaultPlugins()},enableSounds:function(){createjs.Sound.activePlugin.context&&"running"!=createjs.Sound.activePlugin.context.state&&createjs.Sound.activePlugin.context.resume();try{window.removeEventListener("mousedown",
__snds.enableSounds)}catch(a){}},nextSound:function(a){if(0<__snds.snd_queue[a].length){var b=__snds.snd_queue[a].shift();__snds.playSound(b.id,a,b.loop,b.volume,b.onComplete,!0)}},stopSound:function(a){c[a]&&(c[a].stop(),delete c[a])},setPause:function(a,b){c[a]&&(c[a].paused=b)},playSound:function(a,b,d,e,h,g){d=void 0===d?0:d;e=void 0===e?1:e;h=void 0===h?function(){}:h;g=void 0===g?!1:g;createjs.Sound.activePlugin.context&&"running"!=createjs.Sound.activePlugin.context.state&&createjs.Sound.activePlugin.context.resume();
0==this.initialized&&this.init();b?c[b]&&c[b].stop():(b="general_"+this.snd_counter,this.snd_counter++,5<this.snd_counter&&(this.snd_counter=0));g||(__snds.snd_queue[b]=[]);g={};g.interrupt=createjs.Sound.INTERRUPT_EARLY;e&&(g.volume=e);d&&(g.loop=d);this.systemMute&&(g.volume=0);"string"!==typeof a&&(a=a[__utils.getRandomInt(0,a.length-1)]);d=createjs.Sound.play(a,g);d.channel=b;d.clip_id=a;d.onComplete=h;d.addEventListener("complete",function(m){m.target.onComplete();__snds.nextSound(m.target.channel)});
return c[b]=d},queueSound:function(a,b,d,e,h){d=void 0===d?0:d;e=void 0===e?1:e;h=void 0===h?function(){}:h;b||(b="general_"+this.snd_counter,this.snd_counter++,5<this.snd_counter&&(this.snd_counter=0));if(__snds.snd_queue[b]){var g={};g.id=a;g.loop=d;g.volume=e;g.channel=b;g.onComplete=h;__snds.snd_queue[b].push(g);a=!0;c[b]?1==__snds.snd_queue[b].length&&"playFinished"==c[b].playState&&(a=!1):a=!1;a||__snds.nextSound(b)}else __snds.playSound(a,b,d,e,h)},getNowPlaying:function(a){return c[a]?c[a].clip_id:
null},setSystemMute:function(a){for(var b in c)a?(c[b].saveVolume=c[b].volume,c[b].volume=0,this.systemMute=!0):(isNaN(c[b].saveVolume)||(c[b].volume=c[b].saveVolume),this.systemMute=!1)},stopAllSounds:function(){for(var a in c)try{c[a].stop()}catch(b){}},toggleMute:function(){0==this.mute?(this.mute=1,createjs.Sound.muted=!0):(this.mute=0,createjs.Sound.muted=!1);return oUSER.is_mute=this.mute},forceMute:function(){createjs.Sound.muted=!0},isMute:function(){return this.mute},unforceMute:function(){0==
this.mute&&(createjs.Sound.muted=!1)},mute:0};myNameSpace.BlitSounds=f})();var oLANG,oLANG_IMAGES,oLANG_FONTS,BlitLanguage=new function(){var f=this,c,a;this.doLoadLanguage=function(b,d,e){trace("doLoadLanguage()");c=b;a=d;switch(c.split(".").pop().toLowerCase()){case "json":f.doLoadLanguageJSON();break;case "xml":f.doLoadLanguageXML()}};this.doLoadLanguageJSON=function(){var b=new XMLHttpRequest;b.open("GET",c,!0);b.setRequestHeader("Content-Type","application/json");b.onreadystatechange=function(){if(4==b.readyState&&200==b.status){var d=JSON.parse(b.responseText);oLANG=
{};oLANG_IMAGES={};oLANG_FONTS={};var e=d.txt;if(e)for(var h=0;h<e.length;h++){var g=e[h];if(g.id){var m={},n;for(n in g)m[n]=g[n];m.value=g.value||"";m.spaced&&(m.value=m.value.split("").join("\u00a0"));oLANG[m.id]=m}}if(e=d.img)for(h=0;h<e.length;h++)if(g=e[h],g.id){m={};for(n in g)m[n]=g[n];m.value=g.value||"";oLANG_IMAGES[m.id]=m}if(d=d.config)for(h=0;h<d.length;h++)if(g=d[h],g.id){m={};for(n in g)m[n]=g[n];m.value=g.value||"";oCONFIG[m.id]=m.value}a()}};b.send(null)};this.doLoadLanguageXML=function(){trace("doLoadLanguageXML()");
var b=new XMLHttpRequest;b.open("GET",c,!0);b.onreadystatechange=function(){if(4==b.readyState&&200==b.status){var d=(b.responseXML||parseXml(b.responseText)).documentElement;oLANG={};oLANG_IMAGES={};oLANG_FONTS={};var e=d.getElementsByTagName("txt");if(e)for(var h=0;h<e.length;h++){var g=e[h],m={};m.id=g.getAttribute("id");for(var n=0;n<g.attributes.length;n++){var k=g.attributes[n];k.specified&&(m[k.name]=k.value)}m.value=g.childNodes[0]?g.childNodes[0].nodeValue:"";oLANG[m.id]=m}if(m=d.getElementsByTagName("img"))for(h=
0;h<m.length;h++)g=m[h],e=g.getAttribute("id"),g=g.childNodes[0].nodeValue,oLANG_IMAGES[e]=g;if(d=d.getElementsByTagName("config"))for(h=0;h<d.length;h++)g=d[h],e=g.getAttribute("id"),g=g.childNodes[0].nodeValue,"true"==g&&(g=!0),"false"==g&&(g=!1),oCONFIG[e]=g;a()}};b.send(null)}};
function FontLoader(){var f=document.body.appendChild(document.createElement("canvas"));f.style.width="100px";f.style.height="100px";f.style.position="absolute";f.style.display="none";var c=new createjs.Stage(f);c.enableMouseOver(0);c.tickChildren=!0;c.tickEnabled=!0;c.needUpdate=!1;c.enableDOMEvents(!1);c.forget=!1;var a=c.addChild(new lib.font_loader);this.doDestroy=function(){c.update();c.removeAllChildren();__utils.doDestroyElement(f)};this.doAddFont=function(b,d){""!=d&&(d+=" ");a.addChild(new createjs.Text("Hello World",
d+"20px "+b,"#ff7700"))};c.update()};
