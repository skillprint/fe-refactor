var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(f,b,a){if(f==Array.prototype||f==Object.prototype)return f;f[b]=a.value;return f};
$jscomp.getGlobal=function(f){f=["object"==typeof globalThis&&globalThis,f,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<f.length;++b){var a=f[b];if(a&&a.Math==Math)return a}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(f,b){var a=$jscomp.propertyToPolyfillSymbol[b];if(null==a)return f[b];a=f[a];return void 0!==a?a:f[b]};$jscomp.polyfill=function(f,b,a,c){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(f,b,a,c):$jscomp.polyfillUnisolated(f,b,a,c))};
$jscomp.polyfillUnisolated=function(f,b,a,c){a=$jscomp.global;f=f.split(".");for(c=0;c<f.length-1;c++){var d=f[c];if(!(d in a))return;a=a[d]}f=f[f.length-1];c=a[f];b=b(c);b!=c&&null!=b&&$jscomp.defineProperty(a,f,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(f,b,a,c){var d=f.split(".");f=1===d.length;c=d[0];c=!f&&c in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var e=0;e<d.length-1;e++){var g=d[e];if(!(g in c))return;c=c[g]}d=d[d.length-1];a=$jscomp.IS_SYMBOL_NATIVE&&"es6"===a?c[d]:null;b=b(a);null!=b&&(f?$jscomp.defineProperty($jscomp.polyfills,d,{configurable:!0,writable:!0,value:b}):b!==a&&($jscomp.propertyToPolyfillSymbol[d]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(d):$jscomp.POLYFILL_PREFIX+d,d=
$jscomp.propertyToPolyfillSymbol[d],$jscomp.defineProperty(c,d,{configurable:!0,writable:!0,value:b})))};$jscomp.polyfill("Math.log2",function(f){return f?f:function(b){return Math.log(b)/Math.LN2}},"es6","es3");$jscomp.polyfill("Object.is",function(f){return f?f:function(b,a){return b===a?0!==b||1/b===1/a:b!==b&&a!==a}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(f){return f?f:function(b,a){var c=this;c instanceof String&&(c=String(c));var d=c.length;a=a||0;for(0>a&&(a=Math.max(a+d,0));a<d;a++){var e=c[a];if(e===b||Object.is(e,b))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(f,b,a){if(null==f)throw new TypeError("The 'this' value for String.prototype."+a+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+a+" must not be a regular expression");return f+""};$jscomp.polyfill("String.prototype.includes",function(f){return f?f:function(b,a){return-1!==$jscomp.checkStringArgs(this,b,"includes").indexOf(b,a||0)}},"es6","es3");
function BlitControls(f,b){var a=this;b=b||{};var c=document.getElementById(f),d=c.my_stage||new createjs.Stage(c);d.enableMouseOver(0);d.tickChildren=!1;d.tickEnabled=!1;d.needUpdate=!1;d.snapToPixelsEnabled=!0;d.actives=[];d.activeTweens=[];d.enableDOMEvents(!1);d.forget=!1;platform.isMobile?(createjs.Touch.enable(d),d.enableDOMEvents(!1)):(d.enableDOMEvents(!0),d.enableMouseOver(20));c.my_stage=d;a.mouse_is_over=!1;a.my_scale=1;c.onmouseover=function(){a.mouse_is_over=!0};c.onmouseout=function(){a.mouse_is_over=
!1};d.removeAllChildren();var e=d.addChild(new lib.scene_mute_panel);e.b_pause.visible=!1;f=document.documentElement;var g=f.requestFullscreen||f.msRequestFullscreen||f.mozRequestFullScreen||f.webkitRequestFullscreen?!0:!1;b.hide_fullscreen&&(g=!1);g?(e.b_fullscreen.visible=!0,e.b_fullscreen.helper=new __utils.ButtonHelper(d,e.b_fullscreen,"norm","over"),e.b_fullscreen.helper.setSounds({mousedown:"snd_click",rollover:"snd_rollover"}),e.b_fullscreen.addEventListener("click",function(h){oSTAGE.is_fullscreen?
(BlitWindow.doFullScreenOff(),e.b_fullscreen.mc_on.visible=!1,e.b_fullscreen.mc_off.visible=!0):(BlitWindow.doFullScreenOn(),e.b_fullscreen.mc_on.visible=!0,e.b_fullscreen.mc_off.visible=!1);d.needUpdate=!0},!1),oSTAGE.is_fullscreen?(e.b_fullscreen.mc_on.visible=!0,e.b_fullscreen.mc_off.visible=!1):(e.b_fullscreen.mc_on.visible=!1,e.b_fullscreen.mc_off.visible=!0)):e.b_fullscreen.visible=!1;0==__snds.isMute()?e.b_mute.mc_mutelines.visible=!0:e.b_mute.mc_mutelines.visible=!1;e.b_mute.visible=!1;e.b_mute.helper=
new __utils.ButtonHelper(d,e.b_mute,"norm","over");e.b_mute.helper.setSounds({mousedown:"snd_click",rollover:"snd_rollover"});e.b_mute.addEventListener("click",function(h){0==__snds.toggleMute()?(e.b_mute.mc_mutelines.visible=!0,d.needUpdate=!0,oUSER.is_mute=!1,a.onUnMute()):(e.b_mute.mc_mutelines.visible=!1,d.needUpdate=!0,oUSER.is_mute=!0,a.onMute());BlitSaver.doSaveData("user",oUSER)},!1);e.b_pause.helper=new __utils.ButtonHelper(d,e.b_pause,"norm","over");e.b_pause.helper.setSounds({mousedown:"snd_click",
rollover:"snd_rollover"});e.b_pause.addEventListener("click",function(h){if(h.currentTarget.helper.enabled){if(a.isPaused)a.onResume();else a.onPause();d.needUpdate=!0}});e.b_fullscreen.x=7.5;e.b_mute.x=7.5;e.b_pause.x=7.5;g?(e.b_fullscreen.y=6.5,e.b_mute.y=66.5,e.b_pause.y=126.5):(e.b_mute.y=6.5,e.b_pause.y=66.5);e.b_pause.alpha=0;d.needUpdate=!0;this.onPause=function(){};this.onUnPause=function(){};this.onMute=function(){};this.onUnMute=function(){};this.doUpdateMute=function(){0==__snds.isMute()?
e.b_mute.mc_mutelines.visible=!0:e.b_mute.mc_mutelines.visible=!1;d.needUpdate=!0};this.doUpdateFullScreen=function(){BlitWindow.doCheckFullScreen()?(e.b_fullscreen.mc_on.visible=!0,e.b_fullscreen.mc_off.visible=!1):(e.b_fullscreen.mc_on.visible=!1,e.b_fullscreen.mc_off.visible=!0);d.needUpdate=!0};this.doResizeUpdate=function(){var h=oSTAGE.scale;var m=64+(g?64:0);m+=e.b_pause.visible?64:0;c.style.top=0*h+"px";c.style.width=64*h+"px";c.style.height=m*h+"px";c.width=64*h*__utils.getPixelRatio();c.height=
m*h*__utils.getPixelRatio();e.my_scale=h;a.my_scale=h;d.scale=h*__utils.getPixelRatio();d.needUpdate=!0};this.doShowPause=function(){e.b_pause.helper.setEnabled(!0);e.b_pause.visible=!0;platform.isMobile?(e.b_pause.alpha=1,d.needUpdate=!0):(createjs.Tween.get(e.b_pause).to({alpha:1},250),d.activeTweens.push(e.b_pause))};this.doHidePause=function(){e.b_pause.helper.setEnabled(!1);platform.isMobile?(e.b_pause.visible=!1,d.needUpdate=!0):(createjs.Tween.get(e.b_pause).to({alpha:0},250),d.activeTweens.push(e.b_pause))};
a.doResizeUpdate();update_queue.push({doResizeUpdate:a.doResizeUpdate});active_stages.push(d);(function(){actives.push({forget:!1,doUpdate:function(){"running"==createjs.Sound.activePlugin.context.state&&(e.b_mute.visible=!0,this.forget=e.stage.needUpdate=!0)}})})();c.style.display="block"};function LoaderScreen(f,b){f=void 0===f?null:f;b=void 0===b?{}:b;var a=this;trace("LoaderScreen()");var c=(f?document.getElementById(f):document.body).appendChild(document.createElement("div"));c.className="loading_screen";c.style.display="none";var d=c.appendChild(document.createElement("div"));d.className="loading_block";b.logo?(f=d.appendChild(document.createElement("img")),f.className="loading_logo",d.appendChild(document.createElement("br")),f.onload=function(){trace("image loaded");c.style.display=
"block";a.doResizeUpdate()},f.src=b.logo):c.style.display="block";b.msg&&(f=d.appendChild(document.createElement("div")),f.className="loading_msg",f.innerHTML=b.msg,d.appendChild(document.createElement("br")));b=d.appendChild(document.createElement("div"));b.className="loading_bar";var e=b.appendChild(document.createElement("div"));e.className="loading_bar_fill";b.appendChild(document.createElement("div")).className="loading_bar_frame";this.doResizeUpdate=function(){scale=Math.min(document.body.offsetWidth/
640,document.body.offsetHeight/640,1);d.style.top=.5*document.body.offsetHeight+"px";d.style.left=.5*document.body.offsetWidth+"px";d.style.transform="scale("+scale+")";d.style.marginTop=-(.5*d.clientHeight)+"px";d.style.marginLeft=-(.5*d.clientWidth)+"px"};this.doUpdateBar=function(g){e.style.width=Math.max(9,Math.min(100,100*g))+"%"};this.doDestroy=function(){window.removeEventListener("resize",a.doResizeUpdate);window.removeEventListener("orientationchange",a.doResizeUpdate);c.parentNode.removeChild(c);
LOADER=null};window.addEventListener("resize",a.doResizeUpdate);window.addEventListener("orientationchange",a.doResizeUpdate);a.doResizeUpdate()};function BlitPause(f){var b=this;__snds.forceMute();__snds.setPause("music",!0);var a=document.getElementById(f),c=a.my_stage||new createjs.Stage(a);c.enableMouseOver(0);c.tickChildren=!1;c.tickEnabled=!1;c.needUpdate=!1;c.snapToPixelsEnabled=!0;c.actives=[];c.activeTweens=[];c.enableDOMEvents(!1);c.forget=!1;platform.isMobile?(createjs.Touch.enable(c),c.enableDOMEvents(!1)):(c.enableDOMEvents(!0),c.enableMouseOver(20));a.my_stage=c;c.removeAllChildren();var d=c.addChild(new lib.popup_pause);d.my_scale=
null;d.b_exit.helper=new __utils.ButtonHelper(c,d.b_exit,"norm","over");d.b_exit.helper.setSounds({mousedown:"snd_click",rollover:"snd_rollover"});__utils.doText(d.b_exit.txt,oLANG.exit_game,{verticalAlign:"middle"});d.b_exit.addEventListener("click",function(g){b.doDestroy();__snds.setPause("music",!1);__snds.unforceMute();MyGame.doQuit()});d.b_resume.helper=new __utils.ButtonHelper(c,d.b_resume,"norm","over");d.b_resume.helper.setSounds({mousedown:"snd_click",rollover:"snd_rollover"});__utils.doText(d.b_resume.txt,
oLANG.resume_game,{verticalAlign:"middle"});d.b_resume.addEventListener("click",function(g){__snds.setPause("music",!1);__snds.unforceMute();b.doDestroy();MyGame.doResume()});d.b_help.helper=new __utils.ButtonHelper(c,d.b_help,"norm","over");d.b_help.helper.setSounds({mousedown:"snd_click",rollover:"snd_rollover"});__utils.doText(d.b_help.txt,oLANG.help,{verticalAlign:"middle"});d.b_help.addEventListener("click",function(g){e.forget=!0;c.forget=!0;c.enableMouseOver(0);c.removeAllChildren();c.needUpdate=
!0;a.style.backgroundColor="rgba(0,0,0,0)";a.style.display="none";MyGame.doHelp()});MyGame.isReplay&&(d.b_help.visible=!1,d.b_help.mouseEnabled=!1);c.needUpdate=!0;this.doResizeUpdate=function(){a.style.left="0px";a.style.top="0px";a.style.width=oSTAGE.wrapper_width+"px";a.style.height=oSTAGE.wrapper_height+"px";a.width=oSTAGE.wrapper_width*oSTAGE.pixel_ratio;a.height=oSTAGE.wrapper_height*oSTAGE.pixel_ratio;d.x=.5*oSTAGE.game_width|0;d.y=.5*oSTAGE.game_height|0;d.my_scale=oSTAGE.scale;c.scale=oSTAGE.scale*
oSTAGE.pixel_ratio;c.needUpdate=!0};this.doDestroy=function(){oUSER.is_mute||(createjs.Sound.muted=!1);e.forget=!0;c.forget=!0;c.enableMouseOver(0);c.removeAllChildren();c.needUpdate=!0;a.style.backgroundColor="rgba(0,0,0,0)";a.style.display="none"};b.doResizeUpdate();var e={doResizeUpdate:b.doResizeUpdate};update_queue.push(e);active_stages.push(c);a.style.display="block";a.style.backgroundColor="rgba(0,0,0,0.4)"};var debug_line=1;function trace(f,b){if(oCONFIG.debug_trace){try{console.log(f)}catch(c){}if(oCONFIG.debug_panel){var a=document.getElementById("debug");a&&(a.style.display="block",a.innerHTML="error"==b?'<li class="debug_error">'+f+a.innerHTML:"<li>"+f+a.innerHTML)}}}Image.prototype.load=function(f){var b=new XMLHttpRequest;b.thisImg=this;b.open("GET",f,!0);b.responseType="arraybuffer";return b};Image.prototype.completedPercentage=0;
window.onerror=function(f,b,a){oCONFIG.debug_panel&&trace("onerror: "+f+" src:"+b+" @"+a,"error")};
function doFindLinks(f){for(var b=f.text.split(" "),a=f.original_font_size,c=[],d=0;d<b.length;d++){var e=b[d];"http"==e.substring(0,4)&&(e={url:e},c.push(e),b[d]="\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0")}b=b.join(" ");f.text=b;var g=f.getMetrics().lines,h=0;for(d=0;d<g.length;d++){f.text="";for(var m=g[d].split(" "),n=0;n<m.length;n++){e=m[n];if("\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0"==e){var k=f.getBounds();c[h].y=f.y+d*f.lineHeight+.5*a;c[h].x=f.x+k.width+a;h++}f.text+=e;d<m.length&&(f.text+=" ")}}f.text=
b;for(d=0;d<c.length;d++)e=c[d],b=new lib.link_icon,f.parent.addChild(b),b.url=e.url,b.x=e.x,b.y=e.y,b.scaleX=b.scaleY=1.5*a/40,b.helper=new __utils.ButtonHelper(b.stage,b,"norm","over"),b.addEventListener("click",function(l){window.open(l.currentTarget.url)})}var myNav=navigator.userAgent.toLowerCase();
function doGetBrowser(){var f=navigator.userAgent,b=f.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(b[1])){var a=/\brv[ :]+(\d+)/g.exec(f)||[];return{name:"IE",version:a[1]||""}}if("Chrome"===b[1]&&(a=f.match(/\bOPR|Edge\/(\d+)/),null!=a))return{name:"Opera",version:a[1]};b=b[2]?[b[1],b[2]]:[navigator.appName,navigator.appVersion,"-?"];null!=(a=f.match(/version\/(\d+)/i))&&b.splice(1,1,a[1]);return{name:b[0],version:b[1]}}
function is_touch_device(){return"ontouchstart"in window||0<navigator.MaxTouchPoints||0<navigator.msMaxTouchPoints}
var platform={isAndroid:navigator.userAgent.match(/Android/i),isBlackBerry:navigator.userAgent.match(/BlackBerry/i),isiOS:navigator.userAgent.match(/iPhone|iPad|iPod/i),isMobileOpera:navigator.userAgent.match(/Opera Mini/i),isMobileWindows:navigator.userAgent.match(/IEMobile/i),isTouchDevice:is_touch_device(),isMobile:navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/Opera Mini/i)||navigator.userAgent.match(/IEMobile/i),
isSamsungBrowser:navigator.userAgent.match(/SamsungBrowser/i),isIE:-1!=myNav.indexOf("msie")||"Microsoft Internet Explorer"==navigator.appName||"Netscape"==navigator.appName&&null!=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent),isFirefox:navigator.userAgent.match(/Firefox/i),isWindows:-1!=window.navigator.platform.indexOf("Win"),isIE11:!!window.MSInputMethodContext&&!!document.documentMode,isChrome:/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),isSafari:/Safari/.test(navigator.userAgent)&&
/Apple Computer/.test(navigator.vendor)},support={gzip:!1,canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var f=document.createElement("canvas");return!(!window.WebGLRenderingContext||!f.getContext("webgl")&&!f.getContext("experimental-webgl"))}catch(b){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,clamped_array:window.Uint8ClampedArray,zoom:""===document.createElement("detect").style.zoom};
function doPrep(){trace(".doPrep()");doFixCompatibilityIssues();doCheckBrowser()?doInit2():doBrowserAlert()}
function doFixCompatibilityIssues(){trace("doFixCompatibilityIssues()");0=="console"in window&&(console={log:function(){},error:function(){}});Math.log2=Math.log2||function(b){return Math.log(b)*Math.LOG2E};var f=window.DOMParser?function(b){return(new window.DOMParser).parseFromString(b,"text/xml")}:"undefined"!=typeof window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM")?function(b){var a=new window.ActiveXObject("Microsoft.XMLDOM");a.async="false";a.loadXML(b);return a}:function(){return null};
window.parseXml=f;String.prototype.includes||(String.prototype.includes=function(b,a){"number"!==typeof a&&(a=0);return a+b.length>this.length?!1:-1!==this.indexOf(b,a)});Date.now=Date.now||function(){return(new Date).getTime()};0=="performance"in window&&(window.performance={offset:Date.now(),now:function(){return Date.now()-this.offset}});my_performance={offset:Date.now(),now:function(){return Date.now()-this.offset}};window.requestAnimationFrame||(window.requestAnimationFrame=function(b,a){var c=
(new Date).getTime(),d=Math.max(0,16-(c-lastTime));a=window.setTimeout(function(){b(c+d)},d);lastTime=c+d;return a})}function doCheckBrowser(){trace("doCheckBrowser()");var f=!0;support.clamped_array||(f=!1);platform.isIE11&&(f=!1);platform.isSamsungBrowser&&(f=!1);oCONFIG.support_checks&&(oCONFIG.support_checks.canvas&&!support.canvas&&(f=!1),oCONFIG.support_checks.webgl&&!support.webgl&&(f=!1));support.canvas&&support.webgl&&support.clamped_array||(f=!1);return f}
function doBrowserAlert(){trace("doBrowserAlert()");var f=document.getElementById("div_errors");var b='<table border="0" class="div_errors_table" cellpadding="40"><tr><td align="center" valign="middle"><img border="0" class="div_errors_logo" src="'+(oLANG_IMAGES.logo.value+'" alt="'+oLANG_IMAGES.logo.alt+'"/><p>');b+=oLANG.browser_alert.value+"<p>";f.innerHTML=b+'<a href="https://www.google.com/chrome/browser/"><img border="0" src="media/browser_icons/icon_chrome.png" width="64" height="64" alt="Chrome"/></a><a href="http://www.mozilla.org/firefox/new/"><img border="0" src="media/browser_icons/icon_firefox.png" width="64" height="64" alt="Firefox"/></a><a href="https://www.microsoft.com/microsoft-edge"><img border="0" src="media/browser_icons/icon_edge.png" width="64" height="64" alt="Edge"/></a><a href="http://www.apple.com/safari/"><img border="0" src="media/browser_icons/icon_safari.png" width="64" height="64" alt="Safari"/></a></td></tr></table>';
f.style.display="block";trace(f)};var BlitStage=function(f,b){if(f.stage){var a=f.stage;a.removeAllChildren();a.actives=[];a.activeTweens=[];a.forget=!1;a.enableMouseOver(0);return a}b.webgl?(a=new createjs.StageGL(f,{transparent:!1,antialias:!0,premultiply:!0}),a.webgl=!0):(a=new createjs.Stage(f),a.webgl=!1);a.actives=[];a.activeTweens=[];a.tickChildren=!1;a.tickEnabled=!1;a.needUpdate=!1;a.forget=!1;a.snapToPixelsEnabled=!1;a.enableDOMEvents(!1);a.enableMouseOver(0);platform.isMobile?(createjs.Touch.enable(a),a.enableDOMEvents(!1)):
(a.enableDOMEvents(!0),a.enableMouseOver(20));b.no_resize||(a.doResizeUpdate=function(){f.style.left="0px";f.style.top="0px";f.style.width=oSTAGE.wrapper_width+"px";f.style.height=oSTAGE.wrapper_height+"px";f.width=oSTAGE.wrapper_width*oSTAGE.pixel_ratio;f.height=oSTAGE.wrapper_height*oSTAGE.pixel_ratio;this.scale=oSTAGE.scale*oSTAGE.pixel_ratio;this.webgl&&this.updateViewport(f.width,f.height);a.needUpdate=!0},update_queue.push(a),active_stages.push(a));return a};function BlitTimer(f){var b=this;b.direction=f.direction||-1;b.is_paused=!0;b.pause_time=0;b.start_time=0;b.game_time=1E3*f.seconds_on_clock;b.time_left=b.game_time;b.time_used=0;b.current_seconds=0;b.percent_left=1;b.giving_bonus=!1;this.doStart=function(){b.pause_time=0;b.start_time=performance.now();b.game_time=1E3*f.seconds_on_clock;b.time_left=b.game_time;b.current_seconds=0;b.is_paused=!1;b.forget=!1;b.is_active=!0;GameWorld.actives.push(b)};this.doFirstUpdate=function(){var a=Math.ceil(.001*
b.game_time);b.percent_left=b.time_left/b.game_time;var c=a;a=Math.floor(c/60);c-=60*a;if(10>c)var d=0;else d=Math.floor(c/10),c-=10*d;f.callback_update&&f.callback_update(b.time_left,b.percent_left,{m:a.toString(),ss:d.toString()+c.toString()})};this.doUpdate=function(){if(b.is_active&&!b.is_paused){b.giving_bonus?(b.time_left=Math.max(0,b.time_left-500),b.time_used=Math.max(b.game_time,b.game_time-b.time_left)):-1==b.direction?(b.time_left=Math.max(0,b.start_time+b.game_time-performance.now()),
b.time_used=Math.max(b.game_time,b.game_time-b.time_left)):(b.time_left=Math.max(0,performance.now()-b.start_time),b.time_used=b.time_left);var a=Math.ceil(.001*b.time_left);b.percent_left=b.time_left/b.game_time;if(a!=b.current_seconds){var c=a;a=Math.floor(c/60);c-=60*a;if(10>c)var d=0;else d=Math.floor(c/10),c-=10*d;f.callback_update&&f.callback_update(b.time_left,b.percent_left,{m:a.toString(),ss:d.toString()+c.toString()})}-1==b.direction&&0>=b.time_left&&(f.callback_update&&f.callback_update(b.time_left,
b.percent_left,{m:"0",ss:"00"}),b.is_active=!1,b.giving_bonus?(b.giving_bonus=!1,__snds.stopSound("timer"),f.callback_bonuscomplete&&f.callback_bonuscomplete()):f.callback_outoftime&&f.callback_outoftime())}};this.doStartBonus=function(){b.giving_bonus=!0;b.is_paused=!1;b.forget=!1;b.is_active=!0;GameWorld.actives.push(b)};this.doStop=function(){b.forget=!0;b.is_active=!1};this.doPause=function(){b.pause_time=performance.now();b.is_paused=!0};this.doAddTime=function(a){b.clock_frames+=60*a;b.start_time+=
1E3*a};this.doResume=function(){b.start_time+=performance.now()-b.pause_time;b.is_paused=!1};this.doDestroy=function(){b.forget=!0;b.is_active=!1}};var oTOUCHES=[],_BlitInputs=function(f){var b=this,a=document.getElementById(f.target)||document.documentElement;b.has_tilt=!1;b.using_tilt=!1;b.still_frames=0;b.beta=0;b.lastbeta=0;b.alpha=0;b.lastalpha=0;b.tilt_x=0;b.tilt_y=0;b.allow_key_defaults=f.allowKeyDefaults;b.click_pending=!1;b.has_touch=!1;b.touching=!1;b.mouse_is_down=!1;b.mouse_start_x=0;b.mouse_start_y=0;b.start_x=0;b.start_y=0;b.mouse_x=0;b.mouse_y=0;b.frames_down=0;b.using_keyboard=!1;b.right=!1;b.left=!1;b.up=!1;b.dn=!1;b.z=!1;b.x=
!1;b.c=!1;b.v=!1;b.b=!1;b.space=!1;b.keys_down=[];b.propagation_prevention=f.propagationLevel;this.doSetPropagationPrevention=function(k){b.propagation_prevention=k};this.doGetTouches=function(){return oTOUCHES};f=function(k){b.mouse_is_down||(b.frames_down=0,b.mouse_is_down=!0,b.click_pending=!0,b.mouse_x=(k.clientX-a.offsetLeft)*oSTAGE.scale_inv|0,b.mouse_y=(k.clientY-a.offsetTop)*oSTAGE.scale_inv|0,b.mouse_start_x=b.mouse_x,b.mouse_start_y=b.mouse_y,b.start_x=b.mouse_x,b.start_y=b.mouse_y,b.speed_x=
0,b.speed_y=0,b.client_mouse_x=(k.clientX-a.offsetLeft)*oSTAGE.scale_inv|0,b.client_mouse_y=(k.clientY-a.offsetTop)*oSTAGE.scale_inv|0,b.client_mouse_start_x=b.client_mouse_x,b.client_mouse_start_y=b.client_mouse_y)};var c=function(k){b.client_mouse_x=(k.clientX-a.offsetLeft)*oSTAGE.scale_inv|0;b.client_mouse_y=(k.clientY-a.offsetTop)*oSTAGE.scale_inv|0;b.speed_x=b.client_mouse_x-b.mouse_x;b.speed_y=b.client_mouse_y-b.mouse_y;b.mouse_x=(k.clientX-a.offsetLeft)*oSTAGE.scale_inv|0;b.mouse_y=(k.clientY-
a.offsetTop)*oSTAGE.scale_inv|0},d=function(k){b.mouse_is_down=!1;b.release_pending=!0;b.frames_down=0},e=-1,g=function(k){for(var l=0;l<oTOUCHES.length;l++)if(oTOUCHES[l].id===k)return l;return-1},h=function(k){trace("doTouchStart");var l=k.touches;k.touches?l=k.touches:k.targetTouches?l=k.targetTouches:k.pageX&&(l=[k]);for(var r=0;r<l.length;r++){var q=l[r],t=g(q.identifier),u=(q.clientX-a.offsetLeft)*oSTAGE.scale_inv,v=(q.clientY-a.offsetTop)*oSTAGE.scale_inv;-1==t&&(oTOUCHES.push({id:q.identifier,
frames_down:0,mouse_is_down:!0,click_pending:!0,release_pending:!1,my_x:u,my_y:v,speed_x:0,speed_y:0,start_x:u,start_y:v}),1==oTOUCHES.length&&(e=q.identifier,b.touching=!0,b.frames_down=0,b.mouse_is_down=!0,b.click_pending=!0,b.release_pending=!1,b.mouse_x=u,b.mouse_y=v,b.speed_x=0,b.speed_y=0,b.start_x=u,b.start_y=v,b.mouse_start_x=u,b.mouse_start_y=v))}q.target.prohibit_touch&&k.preventDefault();for(l=q.target;l&&l!==document;){if(l.id&&(-1!=l.id.indexOf("_evidon")||-1!=l.id.indexOf("_evh"))){q.target.allow_touch=
!0;break}l=l.parentNode}platform.isTouchDevice&&!q.target.allow_touch&&2<=b.propagation_prevention&&k.preventDefault()},m=function(k){var l;k.changedTouches?l=k.changedTouches:k.targetTouches?l=k.targetTouches:k.pageX&&(l=[k]);for(var r=0;r<l.length;r++){var q=l[r],t=q.identifier,u=g(t),v=(q.clientX-a.offsetLeft)*oSTAGE.scale_inv,w=(q.clientY-a.offsetTop)*oSTAGE.scale_inv,x=v-oTOUCHES[u].my_x,y=w-oTOUCHES[u].my_y;oTOUCHES[u].speed_x=x;oTOUCHES[u].speed_y=y;oTOUCHES[u].my_x=v;oTOUCHES[u].my_y=w;t==
e&&(b.mouse_x=v,b.mouse_y=w,b.speed_x=x,b.speed_y=y)}for(l=q.target;l&&l!==document;){if(l.id&&(-1!=l.id.indexOf("_evidon")||-1!=l.id.indexOf("_evh"))){q.target.allow_touch=!0;break}l=l.parentNode}q.target.prohibit_touch_scroll&&Math.abs(oTOUCHES[0].speed_x)>Math.abs(oTOUCHES[0].speed_y)&&k.preventDefault();q.target.prohibit_touch&&k.preventDefault();(q.target.prohibit_touchmove||platform.isTouchDevice&&!q.target.allow_touch&&1<=b.propagation_prevention)&&k.preventDefault()},n=function(k){switch(k.type){case "touchend":case "touchcancel":case "MSPointerUp":var l;
k.changedTouches?l=k.changedTouches:k.targetTouches?l=k.targetTouches:k.pageX&&(l=[k]);for(k=0;k<l.length;k++){var r=l[k].identifier,q=g(r);r==e&&b.mouse_is_down&&(b.mouse_is_down=!1,b.release_pending=!0,b.frames_down=0,b.touching=!1);-1!=q&&oTOUCHES.splice(q,1)}}};window.onkeydown=function(k){var l=k.which||k.keyCode||k.key;b.allow_key_defaults||(k.preventDefault(),k.stopPropagation());if(!(0<=b.keys_down.indexOf(l)))switch(b.keys_down.push(l),b.using_keyboard=!0,l){case 39:b.right=!0;b.right_pending=
!0;break;case 37:b.left=!0;b.left_pending=!0;break;case 32:b.space=!0;b.space_pending=!0;break;case 38:b.up=!0;b.up_pending=!0;break;case 40:b.dn=!0;b.dn_pending=!0;break;case 90:b.z=!0;b.z_pending=!0;break;case 88:b.x=!0;b.x_pending=!0;break;case 67:b.c=!0;b.c_pending=!0;break;case 86:b.v=!0;b.v_pending=!0;break;case 66:b.b=!0,b.b_pending=!0}};window.onkeyup=function(k){var l=k.which||k.keyCode||k.key;b.allow_key_defaults||(k.preventDefault(),k.stopPropagation());var r=b.keys_down.indexOf(l);0<=
r&&b.keys_down.splice(r,1);switch(l){case 39:b.right=!1;break;case 37:b.left=!1;break;case 32:b.space=!1;b.space_rel_pending=!0;break;case 38:b.up=!1;break;case 40:b.dn=!1;break;case 90:b.z=!1;break;case 88:b.x=!1;break;case 67:b.c=!1;break;case 86:b.v=!1;break;case 66:b.b=!1}b.allow_key_defaults||(k.preventDefault(),k.stopPropagation())};platform.isTouchDevice?window.navigator.msPointerEnabled?(window.addEventListener("MSPointerDown",h,{passive:!1,capture:!1}),window.addEventListener("MSPointerUp",
n,{passive:!1,capture:!1})):(window.addEventListener("touchstart",h,{passive:!1,capture:!1}),window.addEventListener("touchend",n,{passive:!1,capture:!1}),window.addEventListener("touchmove",m,{passive:!1,capture:!1})):(window.onmouseup=document.onblur=d,a.onmousedown=f,a.onmousemove=c)};var _BlitSaver=function(f){window.localStorageAlias=window.localStorage;this.useCookies=!1;window.localStorage&&"undefined"!=window.localStorage||(window.localStorageAlias={},window.localStorageAlias.removeItem=function(){});this.doSaveData=function(b,a){try{b=f.game_key+"_"+b,window.localStorageAlias[b]=JSON.stringify(a)}catch(c){}};this.doGetData=function(b){try{b=f.game_key+"_"+b;var a=window.localStorageAlias[b];return a?""!=a?JSON.parse(a):null:null}catch(c){}};this.doClearData=function(b){b=
f.game_key+"_"+b;window.localStorageAlias.removeItem(b)}};var MaterialsLibrary={};function ButtonHelper(f,b,a,c,d,e,g,h){b.addEventListener&&(this.target=b,this.snds={},this.my_stage=f,this.normLabel=null==a?"norm":a,this.overLabel=null==c?"over":c,this.downLabel=null==d?"over":d,this.play=e,this._enabled=this._isOver=this._isPressed=!1,b.mouseChildren=!1,this.enabled=!0,g&&(h&&(g.actionsEnabled=!1,g.gotoAndStop&&g.gotoAndStop(h)),b.hitArea=g))}var p=ButtonHelper.prototype;p.setParams=function(f){for(var b in f)this[b]=f[b]};
p.setSounds=function(f){for(var b in f)this.snds[b]=f[b]};
p.setEnabled=function(f){if(f!=this._enabled){var b=this.target;(this._enabled=f)?(b.cursor="pointer",b.addEventListener("rollover",this),b.addEventListener("rollout",this),b.addEventListener("mousedown",this),b.addEventListener("pressup",this)):(b.cursor=null,b.removeEventListener("rollover",this),b.removeEventListener("rollout",this),b.removeEventListener("mousedown",this),b.removeEventListener("pressup",this));this._isOver=this._isPressed=!1}};p.getEnabled=function(){return this._enabled};
try{Object.defineProperties(p,{enabled:{get:p.getEnabled,set:p.setEnabled}})}catch(f){}p.toString=function(){return"[ButtonHelper]"};
p.handleEvent=function(f){var b=this.target;f=f.type;this._enabled&&("mousedown"==f?(this._isPressed=!0,f=this.downLabel,this.snds.mousedown&&__snds.playSound(this.snds.mousedown,"interface")):"pressup"==f?(this._isPressed=!1,f=this._isOver?this.overLabel:this.normLabel):"rollover"==f?(this._isOver=!0,f=this._isPressed?this.downLabel:this.overLabel,this.snds.rollover&&__snds.playSound(this.snds.rollover,"interface")):(this._isOver=!1,f=this._isPressed?this.overLabel:this.normLabel),this.play?b.gotoAndPlay&&
b.gotoAndPlay(f):b.gotoAndStop&&b.gotoAndStop(f),b.cacheID&&!this.ignore_cache&&__utils.doCache(b,oSTAGE.cache_scale),this.my_stage&&(this.my_stage.needUpdate=!0))};
var BlitTools=function(){var f=this,b=this;b.firefox_font_shift=.1;this.doInitResizer=function(a){var c=document.createElement("div");c.id="resizer";c.w=null;c.h=null;c.scroll=null;c.keep=!0;c.doUpdate=function(){if(this.w!=window.innerWidth||this.h!=window.innerHeight||this.scroll!=document.documentElement.scrollTop)this.w=window.innerWidth,this.h=window.innerHeight,this.scroll=document.documentElement.scrollTop,window.scrollTo(0,0),a(),platform.isMobile&&setTimeout(function(){window.scrollTo(0,
0);a()},250)};actives.push(c);window.addEventListener("orientationchange",function(){c.w=0;c.h=0})};this.doInitFocusManager=function(a,c){var d=!1,e=function(){d||(a&&a(),d=!0)},g=function(){d&&(c&&c(),d=!1)},h=b.doGetHiddenProp();if(h){var m=h.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(m,function(n){document[h]?e():g()})}window.addEventListener("blur",e);window.addEventListener("focus",g)};this.doGetHiddenProp=function(){var a=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";
for(var c=0;c<a.length;c++)if(a[c]+"Hidden"in document)return a[c]+"Hidden";return null};this.ButtonHelper=ButtonHelper;this.doUpdateCreateJsStage=function(a,c){if(a.needUpdate||0<a.activeTweens.length||0<a.actives.length||0<a.updateFrames){a.updateFrames=Math.max(0,a.updateFrames-1);for(var d=a.actives.length-1;0<=d;d--){var e=a.actives[d];if(!e.me||a.contains(e.me)&&!e.need_destroy)e.need_purged?a.actives.splice(d,1):e.update_function?e.update_function(e):e.doUpdate&&e.doUpdate();else{try{e.me.parent.removeChild(e.me)}catch(g){}a.actives.splice(d,
1)}}for(d=a.activeTweens.length-1;0<=d;d--)createjs.Tween.hasActiveTweens(a.activeTweens[d])||a.activeTweens.splice(d,1);c?a.update(c):a.update();a.needUpdate=!1}};this.createCORSRequest=function(a,c){var d=new XMLHttpRequest;"withCredentials"in d?d.open(a,c,!0):"undefined"!=typeof XDomainRequest?(d=new XDomainRequest,d.open(a,c)):d=null;return d};this.doLoad3dAssets=function(a,c){if(0==a.manifest.length)a.progress=1,a.complete=!0;else if(!a.started){a.started=!0;var d=a.manifest,e=new THREE.LoadingManager;
e.onLoad=function(){e.doCheckLoading()};e.onError=function(){trace("load error")};e.onProgress=function(k,l,r){a.progress=Math.max(a.progress,l/r);for(var q=0;q<d.length;q++)if(d[q].src==k){d.splice(q,1);break}l==r&&e.doCheckLoading()};e.doCheckLoading=function(){a.loaded||0!=e.items_to_process||0!=d.length||(a.progress=1,a.loaded=!0)};e.items_to_process=d.length;for(var g=0;g<d.length;g++){var h=d[g];switch(h.type){case "json":var m=b.createCORSRequest("GET",h.src);if(!m)return;m.onload=function(){var k=
JSON.parse(m.responseText);c[this.name]=k}.bind({name:h.name});m.onerror=function(){trace("error loading data")};m.send();break;case "animated_fbx":var n=new THREE.FBXLoader(e);n.load(h.src,function(k){var l=this.data;k.traverse(function(r){r.isMesh&&(l.flat_shading?r.material=new THREE.MeshBasicMaterial({toneMapped:!1,map:r.material.map,blending:THREE.NoBlending,fog:!1,side:THREE.FrontSide,vertexColors:l.vertexColors}):(r.material.side=THREE.FrontSide,r.material.vertexColors=l.vertexColors),r.material.needsUpdate=
!0)});c[l.id]=k;e.items_to_process--;e.doCheckLoading()}.bind({data:h}));break;case "static_fbx":n=new THREE.FBXLoader(e);n.load(h.src,function(k){for(var l=this.data,r=0;r<k.children.length;r++){var q=k.children[r];q.name&&(q.traverse(function(t){if(t instanceof THREE.Mesh&&t.material.map){t.material.map.wrapS=THREE.RepeatWrapping;t.material.map.wrapT=THREE.RepeatWrapping;t.material.map.encoding=THREE.LinearEncoding;l.pixelated?(t.material.map.minFilter=THREE.NearestFilter,t.material.map.magFilter=
THREE.NearestFilter):(t.material.map.minFilter=platform.isMobile?THREE.NearestMipMapNearestFilter:THREE.LinearMipMapNearestFilter,t.material.map.magFilter=THREE.LinearFilter);if(l.flat_shading){var u=t.material.map.uuid;MaterialsLibrary[u]||(MaterialsLibrary[u]=new THREE.MeshBasicMaterial({map:t.material.map,blending:THREE.NoBlending,transparent:!1,opacity:1,fog:!1,side:THREE.FrontSide}));t.material=MaterialsLibrary[u]}t.material.needsUpdate=!0}}),c[q.name]=q)}e.items_to_process--;e.doCheckLoading()}.bind({data:h}));
break;case "static":n=new THREE.ObjectLoader(e);n.load(h.src,function(k){for(var l=this.data,r=0;r<k.children.length;r++){var q=k.children[r];if(q.name)if(q.name.includes(".DAE")||q.name.includes("ROOT"))for(var t=0;t<q.children.length;t++){var u=q.children[t];c[u.name]=u}else q.traverse(function(v){v instanceof THREE.Mesh&&v.material.map&&(v.material.map.wrapS=THREE.RepeatWrapping,v.material.map.wrapT=THREE.RepeatWrapping,l.pixelated?(v.material.map.minFilter=THREE.NearestFilter,v.material.map.magFilter=
THREE.NearestFilter):platform.isMobile?(v.material.map.minFilter=THREE.NearestMipMapNearestFilter,v.material.map.magFilter=THREE.NearestFilter):(v.material.map.minFilter=THREE.LinearMipMapNearestFilter,v.material.map.magFilter=THREE.LinearFilter))}),c[q.name]=q}e.items_to_process--;e.doCheckLoading()}.bind({name:h.name}));break;case "animated_json":100>THREE.REVISION?(n=new THREE.JSONLoader(e),n.load(h.src,function(k,l){my_data.pixelated?(l[0].map.minFilter=THREE.NearestFilter,l[0].map.magFilter=
THREE.NearestFilter):platform.isMobile?(l[0].map.minFilter=THREE.NearestMipMapNearestFilter,l[0].map.magFilter=THREE.NearestFilter):(l[0].map.minFilter=THREE.NearestMipMapNearestFilter,l[0].map.minFilter=THREE.LinearFilter);l[0].map.wrapS=THREE.ClampToEdgeWrapping;l[0].map.wrapT=THREE.ClampToEdgeWrapping;l=new THREE.MeshBasicMaterial({map:l[0].map});l.skinning=!0;c[this.name]=new THREE.SkinnedMesh(k,l);e.items_to_process--;e.doCheckLoading()}.bind({name:h.name}))):(n=new THREE.LegacyJSONLoader(e),
n.load(h.src,function(k,l){my_data.pixelated?(l[0].map.minFilter=THREE.NearestFilter,l[0].map.magFilter=THREE.NearestFilter):platform.isMobile?(l[0].map.minFilter=THREE.NearestMipMapNearestFilter,l[0].map.magFilter=THREE.NearestFilter):(l[0].map.minFilter=THREE.NearestMipMapNearestFilter,l[0].map.minFilter=THREE.LinearFilter);l[0].map.wrapS=THREE.ClampToEdgeWrapping;l[0].map.wrapT=THREE.ClampToEdgeWrapping;l=new THREE.MeshBasicMaterial({map:l[0].map});l.skinning=!0;k=(new THREE.BufferGeometry).fromGeometry(k);
c[this.name]=new THREE.SkinnedMesh(k,l);e.items_to_process--;e.doCheckLoading()}.bind({name:h.name})));break;case "font":n=new THREE.FontLoader(e);n.load(h.src,function(k){c[this.name]=k;e.items_to_process--;e.doCheckLoading()}.bind({name:h.name}));break;case "sprite":n=new THREE.TextureLoader(e);n.load(h.src,function(k){k=new THREE.SpriteMaterial({map:k,color:16777215,transparent:!0});k=new THREE.Sprite(k);c[this.name]=k;e.items_to_process--;e.doCheckLoading()}.bind({name:h.name}));break;case "texture":n=
new THREE.TextureLoader(e);n.load(h.src,function(k){var l=this.data;l.wrapping&&(k.wrapS=THREE.RepeatWrapping,k.wrapT=THREE.RepeatWrapping);c[l.name]=k;e.items_to_process--;e.doCheckLoading()}.bind({data:h}));break;case "skybox":n=new THREE.CubeTextureLoader(e),n.setPath("media/models/skyboxes/"+h.name+"/"),n.load("right.jpg left.jpg up.jpg down.jpg front.jpg back.jpg".split(" "),function(k){platform.isMobile?(k.magFilter=THREE.NearestFilter,k.minFilter=THREE.NearestMipMapNearestFilter):k.minFilter=
THREE.LinearFilter;c[this.name]=k;e.items_to_process--;e.doCheckLoading()}.bind({name:h.name}))}}}};this.doLoadAssets=function(a){var c=this;if(0==a.manifest.length)a.progress=1,a.complete=!0;else if(!a.started){a.started=!0;for(var d=0;d<a.manifest.length;d++)try{for(var e=a.manifest[d].data.audioSprite,g=0;g<e.length;g++)e[g].duration-=e[g].startTime}catch(n){}images=images||{};var h=document.documentElement.appendChild(document.createElement("div"));h.className="loader_dummy";h.id="loader_dummy";
var m=new createjs.LoadQueue(!1);m.installPlugin(createjs.Sound);m.removeEventListener("fileload",c.onFileLoad);m.removeEventListener("progress",c.onProgress);m.removeEventListener("complete",c.onComplete);m.removeEventListener("error",c.onError);this.onFileLoad=function(n){if("javascript"==n.item.type){var k=document.createElement("script");k.setAttribute("type","text/javascript");k.setAttribute("src",n.item.src);document.getElementsByTagName("head")[0].appendChild(k)}else"image"==n.item.type||"svg"==
n.item.type?images[n.item.id]=n.result:"text"==n.item.type&&(k=h.appendChild(document.createElement("div")),k.className="general_absolute",k.style.fontFamily=n.item.id,k.style.color="white",k.style.visibility="hidden",k.innerHTML="-")};this.onError=function(n){trace(n.title+": "+n.data.src);try{assets_retry.manifest.push({src:n.data.src,id:n.data.id})}catch(k){}};this.onProgress=function(n){a.progress=n.loaded};this.onComplete=function(n){a.progress=1;a.loaded=!0;a.loadTime=window.performance.now();
m.removeEventListener("fileload",c.onFileLoad);m.removeEventListener("progress",c.onProgress);m.removeEventListener("complete",c.onComplete);m.removeEventListener("error",c.onError);__utils.doDestroyElement(document.getElementById("loader_dummy"))};m.addEventListener("fileload",c.onFileLoad);m.addEventListener("progress",c.onProgress);m.addEventListener("complete",c.onComplete);m.addEventListener("error",c.onError);m.loadManifest(a.manifest)}};this.doFade=function(a,c,d,e){a.my_opacity=Number(a.style.opacity);
a.to_opacity=c;a.step=(c-a.my_opacity)/(60*d);a.forget=!1;a.doUpdate=function(){this.my_opacity=0<this.step?Math.min(this.to_opacity,this.my_opacity+this.step):Math.max(this.to_opacity,this.my_opacity+this.step);this.style.opacity=this.my_opacity;this.my_opacity==this.to_opacity&&(this.forget=!0,e&&e())};actives.push(a)};this.doFadeTo=function(a,c){a.style.display="block";a.style.opacity=0;a.mode=1;a.my_opacity=0;a.doUpdate=function(){switch(this.mode){case 1:this.my_opacity+=.05;this.style.opacity=
Math.min(1,Math.max(0,this.my_opacity));1<=this.my_opacity&&(this.mode=2,c&&c());break;case 2:this.my_opacity-=.05,this.style.opacity=Math.max(0,Math.min(1,this.my_opacity)),0>=this.my_opacity&&(this.purge=!0,this.style.display="none")}};actives.push(a)};this.NewPulse=function(a,c){var d=this;c=c||{};var e=c.seed||0,g=c.ease||1,h=c.ease_speed||1;d.value=0;d.value_normal=0;this.reset=function(m){d.value=Math.sin(__utils.radFromDeg(m.seed||0));d.value_normal=.5+.5*d.value};this.update=function(){e+=
a;360<=e&&(e-=360);d.value=Math.sin(__utils.radFromDeg(e))*g;d.value_normal=.5+.5*d.value*g;g=Math.min(1,g+h)}};this.dataURItoBlob=function(a){var c=-1!==a.split(",")[0].indexOf("base64")?atob(a.split(",")[1]):decodeURI(a.split(",")[1]);a=a.split(",")[0].split(":")[1].split(";")[0];for(var d=[],e=0;e<c.length;e++)d[e]=c.charCodeAt(e);return new Blob([new Uint8Array(d)],{type:a})};this.ordinal_suffix_of=function(a){var c=a%10;a%=100;return 1==c&&11!=a?"st":2==c&&12!=a?"nd":3==c&&13!=a?"rd":"th"};this.doFader=
function(){fader.style.display="inline-block";fader.style.opacity=1;updateQueue.push({keep:!0,opacity:1.5,update_function:function(){this.opacity-=.1;fader.style.opacity=Math.max(0,Math.min(1,this.opacity));0>=this.opacity&&(this.keep=!1,fader.style.display="none")}})};this.doGetBrowser=function(){var a=navigator.userAgent,c=a.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(c[1])){var d=/\brv[ :]+(\d+)/g.exec(a)||[];return"IE "+(d[1]||"")}if("Chrome"===
c[1]&&(d=a.match(/\bOPR\/(\d+)/),null!=d))return"Opera "+d[1];c=c[2]?[c[1],c[2]]:[navigator.appName,navigator.appVersion,"-?"];null!=(d=a.match(/version\/(\d+)/i))&&c.splice(1,1,d[1]);return c.join(" ")};this.getCSSPPI=function(){var a=document.createElement("div");a.style.width="1in";var c=document.getElementsByTagName("body")[0];c.appendChild(a);var d=a.offsetWidth;c.removeChild(a);return parseFloat(d)};this.getPPI=function(){var a=document.createElement("div");a.style.width="1in";var c=document.getElementsByTagName("body")[0];
c.appendChild(a);var d=a.offsetWidth*(window.devicePixelRatio||1);c.removeChild(a);return parseFloat(d)};this.getPixelRatio=function(){var a=document.createElement("canvas").getContext("2d");return(window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1)};this.doGetLanguage=function(){var a;navigator&&navigator.userAgent&&(a=navigator.userAgent.match(/android.*\W(\w\w)-(\w\w)\W/i))&&
(a=a[1]);!a&&navigator&&(navigator.language?a=navigator.language:navigator.browserLanguage?a=navigator.browserLanguage:navigator.systemLanguage?a=navigator.systemLanguage:navigator.userLanguage&&(a=navigator.userLanguage),a=a.substr(0,2));return a};this.getQueryString=function(){var a={},c=window.location.search.substring(1);1>c.length&&null!=window.location.toString().split("%3F")[1]&&(c=window.location.toString().split("%3F")[1]);c=c.split("&");for(var d=0;d<c.length;d++){var e=c[d].split("=");
"undefined"===typeof a[e[0]]?a[e[0]]=e[1]:"string"===typeof a[e[0]]?a[e[0]]=[a[e[0]],e[1]]:a[e[0]].push(e[1])}return a};this.s4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};this.guid=function(){return this.s4()+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+this.s4()+this.s4()};this.formatDate=function(a,c,d){function e(t,u){t+="";for(u=u||2;t.length<u;)t="0"+t;return t}var g="\x00 January February March April May June July August September October November December".split(" "),
h="\u0001 Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),m="\u0002 Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),n="\u0003 Sun Mon Tue Wed Thu Fri Sat".split(" "),k=d?a.getUTCFullYear():a.getFullYear();c=c.replace(/(^|[^\\])yyyy+/g,"$1"+k);c=c.replace(/(^|[^\\])yy/g,"$1"+k.toString().substr(2,2));c=c.replace(/(^|[^\\])y/g,"$1"+k);k=(d?a.getUTCMonth():a.getMonth())+1;c=c.replace(/(^|[^\\])MMMM+/g,"$1"+g[0]);c=c.replace(/(^|[^\\])MMM/g,"$1"+h[0]);c=c.replace(/(^|[^\\])MM/g,
"$1"+e(k));c=c.replace(/(^|[^\\])M/g,"$1"+k);var l=d?a.getUTCDate():a.getDate();c=c.replace(/(^|[^\\])dddd+/g,"$1"+m[0]);c=c.replace(/(^|[^\\])ddd/g,"$1"+n[0]);c=c.replace(/(^|[^\\])dd/g,"$1"+e(l));c=c.replace(/(^|[^\\])d/g,"$1"+l);l=d?a.getUTCHours():a.getHours();c=c.replace(/(^|[^\\])HH+/g,"$1"+e(l));c=c.replace(/(^|[^\\])H/g,"$1"+l);var r=12<l?l-12:0==l?12:l;c=c.replace(/(^|[^\\])hh+/g,"$1"+e(r));c=c.replace(/(^|[^\\])h/g,"$1"+r);r=d?a.getUTCMinutes():a.getMinutes();c=c.replace(/(^|[^\\])mm+/g,
"$1"+e(r));c=c.replace(/(^|[^\\])m/g,"$1"+r);r=d?a.getUTCSeconds():a.getSeconds();c=c.replace(/(^|[^\\])ss+/g,"$1"+e(r));c=c.replace(/(^|[^\\])s/g,"$1"+r);r=d?a.getUTCMilliseconds():a.getMilliseconds();c=c.replace(/(^|[^\\])fff+/g,"$1"+e(r,3));r=Math.round(r/10);c=c.replace(/(^|[^\\])ff/g,"$1"+e(r));r=Math.round(r/10);c=c.replace(/(^|[^\\])f/g,"$1"+r);l=12>l?"AM":"PM";c=c.replace(/(^|[^\\])TT+/g,"$1"+l);c=c.replace(/(^|[^\\])T/g,"$1"+l.charAt(0));l=l.toLowerCase();c=c.replace(/(^|[^\\])tt+/g,"$1"+
l);c=c.replace(/(^|[^\\])t/g,"$1"+l.charAt(0));l=-a.getTimezoneOffset();r=d||!l?"Z":0<l?"+":"-";if(!d){l=Math.abs(l);var q=l%60;r+=e(Math.floor(l/60))+":"+e(q)}c=c.replace(/(^|[^\\])K/g,"$1"+r);a=(d?a.getUTCDay():a.getDay())+1;c=c.replace(new RegExp(m[0],"g"),m[a]);c=c.replace(new RegExp(n[0],"g"),n[a]);c=c.replace(new RegExp(g[0],"g"),g[k]);c=c.replace(new RegExp(h[0],"g"),h[k]);return c=c.replace(/\\(.)/g,"$1")};this.getDayNumber=function(){var a=new Date(2014,0,1);a=(new Date).getTime()-a.getTime();
return Math.ceil(a/864E5)};this.doGoFullScreen=function(){var a=document.documentElement;(a.requestFullScreen||a.webkitRequestFullScreen||a.mozRequestFullScreen).call(a)};this.doCheckFullScreen=function(){trace("doCheckFullScreen");return document.fullscreenEnabled||document.mozFullscreenEnabled||document.webkitIsFullScreen?!0:!1};this.doFullScreenOn=function(){var a=document.documentElement;a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?
a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen();oSTAGE.is_fullscreen=!0};this.doFullScreenOff=function(){document.exitFullscreen?document.exitFullscreen():document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();oSTAGE.is_fullscreen=!1};this.doFadeandDestroy=function(a){a=a.currentTarget;a.alpha-=
.1;0>=a.alpha&&a.parent.removeChild(a)};this.doGetPOT=function(a){return Math.pow(2,Math.ceil(Math.log(a)/Math.log(2)))};this.doCache=function(a,c){c||(c=oSTAGE.cache_scale||oSTAGE.scale);a.regX|=0;a.regY|=0;a.x|=0;a.y|=0;a.uncache();var d=a.getBounds(),e=a.nominalBounds,g={};if(a.force_bounds)g.x=a.force_bounds.x,g.y=a.force_bounds.y,g.width=a.force_bounds.width,g.height=a.force_bounds.height;else if(!a.force_bounds&&d&&e)g.x=Math.min(e.x,d.x),g.y=Math.min(e.y,d.y),g.width=Math.max(e.width,d.width),
g.height=Math.max(e.height,d.height);else if(d)g=d;else if(e)g=e;else return;d=!1;a.stage&&a.stage._webGLContext&&(d=!0);d?a.cache(g.x,g.y,__utils.doGetPOT(g.width),__utils.doGetPOT(g.height),c):a.cache(g.x,g.y,Math.ceil(g.width),Math.ceil(g.height),c)};this._doLerp=function(a,c,d){return a+d*(c-a)};this.doLerp=function(a,c,d){return a*(1-d)+c*d};this.doClamp=function(a,c,d){return Math.min(void 0===d?1:d,Math.max(void 0===c?0:c,a))};this.doInvlerp=function(a,c,d){return f.doClamp((d-a)/(c-a))};this.doRange=
function(a,c,d,e,g){return f.doLerp(d,e,f.doInvlerp(a,c,g))};this.doRound=function(a,c){return Number(Math.round(a+"e"+c)+"e-"+c)};this.doGetIntersect=function(a,c,d,e,g,h,m,n){if(a===d&&c===e||g===m&&h===n)return!1;var k=(n-h)*(d-a)-(m-g)*(e-c);if(0===k)return!1;m=((m-g)*(c-h)-(n-h)*(a-g))/k;g=((d-a)*(c-h)-(e-c)*(a-g))/k;return 0>m||1<m||0>g||1<g?!1:{x:a+m*(d-a),y:c+m*(e-c)}};this.doGetDistance=function(a,c,d,e){a-=d;c-=e;return Math.sqrt(a*a+c*c)};this.doGetAngle=function(a,c,d,e){a=Math.atan2(e-
c,d-a);return a*=180/Math.PI};this.degFromRad=function(a){return 180/Math.PI*a};this.radFromDeg=function(a){return Math.PI/180*a};this.getRandomArbitrary=function(a,c){return Math.random()*(c-a)+a};this.getRandomInt=function(a,c){return Math.floor(Math.random()*(c-a+1))+a};this.doLerp=function(a,c,d){return(1-d)*a+d*c};this.doRandomizeArray=function(a){a=a.slice();for(var c=[];0<a.length;){var d=Math.floor(Math.random()*a.length),e=a[d];a.splice(d,1);c.push(e)}return c};this.doClearTimeouts=function(){for(var a=
0;a<timeouts.length;a++)clearTimeout(timeouts[a]);timeouts=[]};this.getPointInBetweenByPerc=function(a,c,d){c=c.clone().sub(a);var e=c.length();c=c.normalize().multiplyScalar(e*d);return a.clone().add(c)};this.doText=function(a,c,d){d=d||{};if(a.my_origin)a.x=a.my_origin.x,a.y=a.my_origin.y;else{var e=a.getBounds()||{height:0};a.my_origin={x:a.x,y:a.y,h:e.height,lineHeight:a.lineHeight,center:a.y+.5*e.height}}if("object"!==typeof c||null===c)c={value:c};e=c.value||c.txt;var g=platform.isMobile?c.overrides_mobile:
c.overrides_desktop;if(g)for(var h in g)switch(h){case "adjustX":c.regX=-g[h];break;case "adjustY":c.regY=-g[h];break;default:c[h]=g[h]}for(h in c)"value"!=h&&(a[h]=c[h]);e||0==e||""==e||(e="MISSING TEXT",a.color="#FF0000");var m=a.font,n=m.indexOf("'"),k=m.lastIndexOf("'");a.original_font_family||(a.original_font_family=m.slice(n+1,k));h=a.original_font_family;var l=0,r=m.indexOf("px");for(g=r;0<=g;g--)if(" "==m[g]){l=g;break}a.original_font_size||(a.original_font_size=Number(m.slice(l,r)));g=a.original_font_size;
m=m.substring(0,l)+m.substring(r+2,n)+m.substring(k,m.length-1);m=m.split(" ").join("");a.original_font_weight||(a.original_font_weight=m);m=a.original_font_weight;a.fontFamily&&(h=a.fontFamily);a.fontWeight&&(m=a.fontWeight);c.fontSize&&(-1!=c.fontSize.indexOf("px")?g=c.fontSize.split("px")[0]:-1!=c.fontSize.indexOf("%")&&(n=.01*c.fontSize.split("%")[0],g*=n,a.lineHeight=a.my_origin.lineHeight*n));c.lineHeight&&(-1!=String(c.lineHeight).indexOf("%")?(c=Number(.01*String(c.lineHeight).split("%")[0]),
a.lineHeight=a.my_origin.lineHeight*c):a.lineHeight=Number(c.lineHeight));a.font_size=g;a.font=1<=m.length?m+" "+g+"px '"+h+"'":g+"px '"+h+"'";e=String(e);c=/<br>/g;e=e.replace(c,"\n");c=/\{\*br\*\}/g;e=e.replace(c,"\n");c=/\{\*p\*\}/g;e=e.replace(c,"\n\n");c=/<p>/g;e=e.replace(c,"\n\n");a.text=e;e=a.getMetrics().lines.length;switch(d.verticalAlign){case "top":a.textBaseline="top";break;case "bottom":a.textBaseline="top";a.y-=Math.max(0,e)*a.lineHeight;break;case "true_middle":a.textBaseline="top";
a.y-=Math.max(0,e)*a.lineHeight*.5;break;case "middle":case void 0:case null:a.textBaseline="middle",a.y+=.5*a.lineHeight-Math.max(0,e-1)*a.lineHeight*.5}a.x|=0;a.y|=0};this.doSubText=function(a,c,d){a=String(a);return a=a.replace(c,d)};this.doSubValue=function(a,c){a=String(a);return a=a.replace(/\{\*var\*\}/g,c)};this.doSubValue2=function(a,c){a=String(a);return a=a.replace(/\{\*var2\*\}/g,c)};this.doHTMLText=function(a,c,d){if("object"!==typeof c||null===c)c={value:c};var e=c.value,g=a.my_computed_style||
window.getComputedStyle(a,null)||a.style;a.my_fontsize=parseFloat(g["font-size"]||g.fontSize);if(g=platform.isMobile?c.overrides_mobile:c.overrides_desktop)for(var h in g)switch(h){case "adjustX":c.transform=c.transform?c.transform+"translateX("+g[h]+"px)":"translateX("+g[h]+"px)";break;case "adjustY":c.transform=c.transform?c.transform+"translateY("+g[h]+"px)":"translateY("+g[h]+"px)";break;default:c[h]=g[h]}for(h in c)"value"!=h&&("fontSize"==h?(c[h].indexOf("%"),a.style.fontSize=c[h]):a.style[h]=
c[h]);e||0==e||(e="MISSING TEXT",a.style.color="#FF0000");h="";c.icon&&(h+='<i class="'+c.icon+'"></i> ');a.innerHTML=d?a.innerHTML+(h+e):h+e};this.doFormatCurrency=function(a){var c=oLANG.comma.value,d=oLANG.currency.value;a=__utils.doRound(a,2);a=String(a).split(".");for(var e=a[0],g="",h=0,m=e.length-1;0<=m;m--)g=e.charAt(m)+g,h++,3==h&&(h=0,g=c+g);g.charAt(0)==c&&(g=g.substring(1,g.length));g=d+g;1<a.length&&(g+="."+a[1]);return g};this.doFormatNumber=function(a,c){c="undefined"!==typeof c?c:
oLANG.comma;a=Math.floor(a);a=String(a);for(var d="",e=0,g=a.length-1;0<=g;g--)d=a.charAt(g)+d,e++,3==e&&(e=0,d=c+d);d.charAt(0)==c&&(d=d.substring(1,d.length));return""+d};this.doFormatTime=function(a){var c=Math.floor(.001*a),d=Math.floor(c/60);return{m:d,s:c-60*d,h:Math.floor(.1*(a-1E3*c))}};this.doCreateTextArea=function(a,c,d,e,g,h,m,n,k,l,r){var q=document.createElement("div");q.setAttribute("id",a);null!=c&&"body"!=c?document.getElementById(c).appendChild(q):document.body.appendChild(q);k||
(m+=";-webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;cursor:default;");q.setAttribute("style",m);q.style.position="absolute";q.style.zIndex="99999";l?(a=function(){q.style.width=g*window.innerWidth+"px";q.style.height=h*window.innerHeight+"px";q.style.left=d*window.innerWidth+"px";q.style.top=e*window.innerHeight+"px"},a(),window.addEventListener("resize",a)):(q.style.width=g+"px",q.style.height=h+"px",q.style.left=d+"px",q.style.top=e+"px");q.style.overflowY=
n?"auto":"hidden";q.innerHTML=r;return q};this.doChangeElement=function(a,c,d,e,g,h){a=null!=a?a:document.getElementById(c);a.style.width=g+"px";a.style.height=h+"px";a.style.marginLeft=d+"px";a.style.marginTop=e+"px"};this.doDestroyElement=function(a){"string"==typeof a&&(a=document.getElementById(a));a&&(this.doDestroyAllChildren(a),a.parentNode.removeChild(a))};this.doDestroyAllChildren=function(a){if(a)for(;0<a.childNodes.length;)a.removeChild(a.childNodes[0])};this.addDomObject=function(a,c,
d,e,g,h){var m=doWrappertoScreen(c,d);a.style.left=m.x+"px";a.style.top=m.y+"px";0!=e&&(a.style.width=e*oSTAGE.scale+"px");0!=g&&(a.style.height=g*oSTAGE.scale+"px");m={};m.obj=a;m.x=c;m.y=d;m.w=e;m.h=g;m.font_size=h;dom_objects.push(m)};this.doClearEventListeners=function(a){for(var c=0;c<a.length;c++)a[c].removeAllEventListeners()};this.addSourceToVideo=function(a,c,d){var e=document.createElement("source");e.src=c;e.type=d;a.appendChild(e)};this.canPlayVideoInline=function(){return navigator.userAgent.match(/(iPhone|iPod)/g)?
"playsInline"in document.createElement("video"):!0}};var RESIZER,_BlitFader=function(f){f=void 0===f?{}:f;var b=document.getElementById(f.div_name);b.style.display="none";b.style.opacity=0;this.doTransitionTo=function(a,c,d,e){callbackMid=c||function(){};e=e||function(){};b.style.display="block";b.style.opacity=0;createjs.Tween.get(b.style,{override:!0}).to({opacity:1},a).call(callbackMid).to({opacity:0},d).call(function(){e();b.style.opacity=1;b.style.display="none"})};this.doFadeSet=function(a){b.style.display=0==a?"none":"block";b.style.opacity=
a};this.doFadeIn=function(a,c){c=c||function(){};createjs.Tween.get(b,{override:!0}).to({opacity:0},a).call(function(){b.style.display="none";c()})};this.doFadeOut=function(a,c){c=c||function(){};b.style.display="block";b.style.opacity=0;createjs.Tween.get(b,{override:!0}).to({opacity:1},a).call(c)};this.doFadeTo=function(a,c,d){d=d||function(){};b.style.display="block";createjs.Tween.get(b,{override:!0}).to({opacity:a},c).call(function(){d();b.style.opacity=1;b.style.display=0!=a?"block":"none"})}},
_BlitWindow=function(f){var b=this;document.addEventListener("gesturestart",function(a){a.preventDefault()});this.doInitResizer=function(a){RESIZER={id:"resizer",w:null,h:null,scroll:null,keep:!0,was_fullscreen:!1,is_fullscreen:!1,repeat_frame:0,needUpdate:!1,stable_frames:0,skip_cover:!1,update_when_stable:!1,doUpdateNow:function(){this.needUpdate=!0;this.doUpdate()},doUpdate:function(){var c=!1;if(this.w!=window.innerWidth||this.h!=window.innerHeight||this.scroll!=document.documentElement.scrollTop){this.stable_frames=
0;this.update_when_stable=!0;if(this.w!=window.innerWidth||this.h!=window.innerHeight)if(RESIZER.skip_cover)RESIZER.skip_cover=!1;else try{document.getElementById("cover").style.display="block"}catch(d){}this.w=window.innerWidth;this.h=window.innerHeight;this.scroll=document.documentElement.scrollTop}else this.update_when_stable&&(this.stable_frames++,10<this.stable_frames&&(this.update_when_stable=!1,this.repeat_frame=5,c=!0));if(this.needUpdate||c||0<this.repeat_frame){this.stable_frames=0;this.needUpdate=
!1;this.repeat_frame=Math.max(0,this.repeat_frame-1);this.w=window.innerWidth;this.h=window.innerHeight;this.is_fullscreen=b.doCheckFullScreen();this.scroll=document.documentElement.scrollTop;if(0==this.repeat_frame)try{document.getElementById("cover").style.display="none"}catch(d){}document.body.style.height=window.innerHeight+"px";this.was_fullscreen!=this.is_fullscreen&&ControlsPanel&&(ControlsPanel.doUpdateFullScreen(),this.was_fullscreen=this.is_fullscreen,oSTAGE.is_fullscreen=this.is_fullscreen);
a()}}};actives.push(RESIZER);window.addEventListener("fullscreenchange",function(){RESIZER.needUpdate=!0});window.addEventListener("orientationchange",function(){RESIZER.needUpdate=!0})};this.doInitFocusManager=function(a,c){var d=!1;window.addEventListener("blur",function(){d||(a&&a(),d=!0,BlitInputs.click_pending=!1)});window.addEventListener("focus",function(){d&&(c&&c(),d=!1,RESIZER.needUpdate=!0,BlitInputs.click_pending=!1)})};this.doGetHiddenProp=function(){var a=["webkit","moz","ms","o"];if("hidden"in
document)return"hidden";for(var c=0;c<a.length;c++)if(a[c]+"Hidden"in document)return a[c]+"Hidden";return null};this.doWindowResize=function(){var a=document.getElementById("wrapper"),c=document.body.offsetWidth,d=document.body.offsetHeight;oSTAGE.is_landscape=c>=d?!0:!1;oSTAGE.pixel_ratio=__utils.getPixelRatio();var e=lib.properties.height,g=lib.properties.width,h=e*g;oCONFIG.min_area&&(h=oCONFIG.min_area/h,e*=h,g*=h);if(oCONFIG.min_width){h=platform.isMobile?oCONFIG.min_width.mobile:oCONFIG.min_width.desktop;
var m=platform.isMobile?oCONFIG.max_width.mobile:oCONFIG.max_width.desktop,n=platform.isMobile?oCONFIG.min_height.mobile:oCONFIG.min_height.desktop,k=platform.isMobile?oCONFIG.max_height.mobile:oCONFIG.max_height.desktop;oSTAGE.is_landscape?g*=1.5:e*=1.5;g=Math.min(m,Math.max(h,g));e=Math.min(k,Math.max(n,e))}oCONFIG.min_dimensions&&(h=oSTAGE.is_landscape?oCONFIG.min_dimensions.landscape:oCONFIG.min_dimensions.portrait,e=Math.max(h.h,e),g=Math.max(h.w,g));if(h=document.getElementById("orientation_overlay"))platform.isMobile&&
"landscape"==oCONFIG.game_orientation&&!oSTAGE.is_landscape?(h.style.backgroundImage="url('media/images/landscape_only.gif')",h.style.display="block",__snds.forceMute()):platform.isMobile&&"portrait"==oCONFIG.game_orientation&&oSTAGE.is_landscape?(h.style.backgroundImage="url('media/images/portrait_only.gif')",h.style.display="block",__snds.forceMute()):(h.style.display="none",__snds.unforceMute());h=0;try{FOOTER.doResizeUpdate();var l=document.getElementById("footer");l&&(h="none"==l.style.display?
0:l.getBoundingClientRect().height)}catch(r){}oSTAGE.window_width=oSTAGE.screen_width=c;oSTAGE.window_height=oSTAGE.screen_height=d-h;d=oSTAGE.screen_width/oSTAGE.screen_height;l=Math.min(Math.max(d,oCONFIG.game_ratio.min),oCONFIG.game_ratio.max);l>d?(oSTAGE.wrapper_width=Math.ceil(oSTAGE.window_width)+1,oSTAGE.wrapper_height=Math.ceil(oSTAGE.window_width/l)):(oSTAGE.wrapper_height=Math.ceil(oSTAGE.window_height),oSTAGE.wrapper_width=Math.ceil(oSTAGE.window_height*l)+1);oSTAGE.scale=Math.min(oSTAGE.wrapper_height/
e,oSTAGE.wrapper_width/g);oSTAGE.scale_inv=1/oSTAGE.scale;oSTAGE.cache_scale=oSTAGE.scale*oSTAGE.pixel_ratio;oSTAGE.game_width=Math.ceil(oSTAGE.wrapper_width*oSTAGE.scale_inv);oSTAGE.game_height=Math.ceil(oSTAGE.wrapper_height*oSTAGE.scale_inv);oSTAGE.game_native_width=g;oSTAGE.game_native_height=e;oSTAGE.game_width_margins=.5*(oSTAGE.game_width-g)|0;oSTAGE.game_height_margins=.5*(oSTAGE.game_height-e)|0;oSTAGE.game_top=-oSTAGE.game_height_margins;oSTAGE.game_bottom=oSTAGE.game_height-oSTAGE.game_height_margins;
oSTAGE.game_left=-oSTAGE.game_width_margins;oSTAGE.game_right=oSTAGE.game_width-oSTAGE.game_width_margins;oSTAGE.game_center_x=.5*g;oSTAGE.game_center_y=.5*e;oSTAGE.game_size={left:-oSTAGE.game_width_margins,top:-oSTAGE.game_height_margins,width:oSTAGE.game_width,height:oSTAGE.game_height,right:oSTAGE.game_width-oSTAGE.game_width_margins,bottom:oSTAGE.game_height-oSTAGE.game_height_margins,center_x:.5*g,center_y:.5*e,native_height:lib.properties.height,native_width:lib.properties.width};a.style.width=
oSTAGE.wrapper_width+"px";a.style.height=oSTAGE.wrapper_height+"px";a.style.top="0px";a.style.left=Math.floor(.5*(c-a.clientWidth))+"px";for(a=update_queue.length-1;0<=a;a--)update_queue[a].forget?update_queue.splice(a,1):update_queue[a].doResizeUpdate?update_queue[a].doResizeUpdate():update_queue.splice(a,1)};this.doCheckFullScreen=function(){return document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen||document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||
document.msFullscreenElement};this.doFullScreenOn=function(){if(!oSTAGE.is_fullscreen){var a=document.documentElement;a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen();RESIZER.needUpdate=!0}};this.doFullScreenOff=function(){if(oSTAGE.is_fullscreen){var a=document;a.exitFullscreen?a.exitFullscreen():a.cancelFullScreen?a.cancelFullScreen():a.mozCancelFullScreen?
a.mozCancelFullScreen():a.msExitFullscreen?a.msExitFullscreen():a.webkitExitFullscreen&&a.webkitExitFullscreen();RESIZER.needUpdate=!0}}};this.myNameSpace=this.myNameSpace||{};
(function(){function f(){}var b={};f.prototype={initialized:!1,snd_queue:{},snd_counter:0,systemMute:!1,init:function(a){if(0==this.initialized)return this.initialized=!0,this.mute=!1,createjs.Sound.muted=0==this.mute?!1:!0,window.addEventListener("mousedown",__snds.enableSounds),createjs.Sound.initializeDefaultPlugins()},enableSounds:function(){createjs.Sound.activePlugin.context&&"running"!=createjs.Sound.activePlugin.context.state&&createjs.Sound.activePlugin.context.resume();try{window.removeEventListener("mousedown",
__snds.enableSounds)}catch(a){}},nextSound:function(a){if(0<__snds.snd_queue[a].length){var c=__snds.snd_queue[a].shift();__snds.playSound(c.id,a,c.loop,c.volume,c.onComplete,!0)}},stopSound:function(a){b[a]&&(b[a].stop(),delete b[a])},setPause:function(a,c){b[a]&&(b[a].paused=c)},playSound:function(a,c,d,e,g,h){d=void 0===d?0:d;e=void 0===e?1:e;g=void 0===g?function(){}:g;h=void 0===h?!1:h;createjs.Sound.activePlugin.context&&"running"!=createjs.Sound.activePlugin.context.state&&createjs.Sound.activePlugin.context.resume();
0==this.initialized&&this.init();c?b[c]&&b[c].stop():(c="general_"+this.snd_counter,this.snd_counter++,5<this.snd_counter&&(this.snd_counter=0));h||(__snds.snd_queue[c]=[]);h={};h.interrupt=createjs.Sound.INTERRUPT_EARLY;e&&(h.volume=e);d&&(h.loop=d);this.systemMute&&(h.volume=0);"string"!==typeof a&&(a=a[__utils.getRandomInt(0,a.length-1)]);d=createjs.Sound.play(a,h);d.channel=c;d.clip_id=a;d.onComplete=g;d.addEventListener("complete",function(m){m.target.onComplete();__snds.nextSound(m.target.channel)});
return b[c]=d},queueSound:function(a,c,d,e,g){d=void 0===d?0:d;e=void 0===e?1:e;g=void 0===g?function(){}:g;c||(c="general_"+this.snd_counter,this.snd_counter++,5<this.snd_counter&&(this.snd_counter=0));if(__snds.snd_queue[c]){var h={};h.id=a;h.loop=d;h.volume=e;h.channel=c;h.onComplete=g;__snds.snd_queue[c].push(h);a=!0;b[c]?1==__snds.snd_queue[c].length&&"playFinished"==b[c].playState&&(a=!1):a=!1;a||__snds.nextSound(c)}else __snds.playSound(a,c,d,e,g)},getNowPlaying:function(a){return b[a]?b[a].clip_id:
null},setSystemMute:function(a){for(var c in b)a?(b[c].saveVolume=b[c].volume,b[c].volume=0,this.systemMute=!0):(isNaN(b[c].saveVolume)||(b[c].volume=b[c].saveVolume),this.systemMute=!1)},stopAllSounds:function(){for(var a in b)try{b[a].stop()}catch(c){}},toggleMute:function(){0==this.mute?(this.mute=1,createjs.Sound.muted=!0):(this.mute=0,createjs.Sound.muted=!1);return oUSER.is_mute=this.mute},forceMute:function(){createjs.Sound.muted=!0},isMute:function(){return this.mute},unforceMute:function(){0==
this.mute&&(createjs.Sound.muted=!1)},mute:0};myNameSpace.BlitSounds=f})();var delta,frame_delta,framerate_adj;
function BlitGameWorld(f){var b=this,a;b.animation_frame=0;b.is_paused=!1;b.actives=[];var c=document.getElementById(f);c.renderer=c.renderer||new THREE.WebGLRenderer({canvas:c,antialias:!0});c.renderer.shadowMap.enabled=!1;c.renderer.shadowMap.autoUpdate=!1;b.renderer=c.renderer;b.renderer.setClearColor(0,1);b.scene=new THREE.Scene;b.scene.background=new THREE.Color(0);b.camera=new THREE.PerspectiveCamera(50,oSTAGE.screen_width/oSTAGE.screen_height,.1,300);b.scene.add(b.camera);b.cam_target=new THREE.Vector3(0,
0,0);b.cam_pos=new THREE.Vector3(0,10,30);b.camera.position.set(b.cam_pos.x,b.cam_pos.y,b.cam_pos.z);b.camera.lookAt(b.cam_target.x,b.cam_target.y,b.cam_target.z);b.cam_dist=b.camera.position.distanceTo(b.cam_target);b.min_focus_width=0;b.min_focus_height=0;b.max_focus_width=Infinity;b.max_focus_height=Infinity;b.background_type=null;b.visible_width=0;b.visible_height=0;this.doInit=function(){window.focus();b.renderer.render(b.scene,b.camera);c.style.display="block";b.doResizeUpdate();b.doResizeUpdate();
a={doResizeUpdate:b.doResizeUpdate};update_queue.push(a);clock.start();frame_delta=0;framerate_adj=1};this.doResizeUpdate=function(){b.camera.aspect=oSTAGE.wrapper_width/oSTAGE.wrapper_height;b.camera.updateProjectionMatrix();b.renderer.setSize(oSTAGE.wrapper_width,oSTAGE.wrapper_height);b.renderer.setPixelRatio(__utils.getPixelRatio());var d=new THREE.Vector2;b.renderer.getSize(d);d=d.width/d.height;try{GameGUI.doResize()}catch(e){}b.cam_dist=b.camera.position.distanceTo(b.cam_target);b.camera.fov=
Math.max(180/Math.PI*Math.atan(Math.max(b.min_focus_height,b.min_focus_width/d)/(2*b.cam_dist))*2,Math.min(180/Math.PI*Math.atan(Math.max(b.max_focus_height,b.max_focus_width/d)/(2*b.cam_dist))*2,50));b.camera.updateProjectionMatrix();b.visible_height=2*b.cam_dist*Math.tan(2*Math.PI/360*b.camera.fov*.5);b.visible_width=b.visible_height*d;switch(b.background_type){case "pattern":d=oSTAGE.screen_width/oSTAGE.screen_height*(GameWorld.scene.background.image.naturalHeight/GameWorld.scene.background.image.naturalWidth);
background_texture.wrapS=THREE.RepeatWrapping;background_texture.repeat=new THREE.Vector2(d,1);background_texture.offset.x=0;background_texture.offset.y=0;break;case "sky":d=oSTAGE.wrapper_width/oSTAGE.wrapper_height,oSTAGE.is_landscape?(background_texture.repeat=new THREE.Vector2(1,1/d),background_texture.offset.y=.5*(1-1/d)):(background_texture.repeat=new THREE.Vector2(d,1),background_texture.offset.y=0)}b.is_paused&&b.renderer.render(b.scene,b.camera)};this.doSetBackground=function(d){b.background_type=
d.type;background_texture=d.asset;d.asset.wrapS=THREE.RepeatWrapping;GameWorld.scene.background=d.asset};this.doUpdate=function(){frame_delta=clock.getDelta();framerate_adj=frame_delta/(1/60);if(!b.is_paused){for(var d=b.actives.length-1;0<=d;d--)b.actives[d]?(b.actives[d].doUpdate(b.actives[d]),b.actives[d].need_destroy?(b.scene.remove(b.actives[d]),b.actives.splice(d,1)):b.actives[d].forget&&b.actives.splice(d,1)):b.actives.splice(d,1);b.renderer.render(b.scene,b.camera)}};actives.push(this);this.doPause=
function(){};this.doResume=function(){};this.doClearAll=function(){if(b.scene)for(;0<b.scene.children.length;)b.scene.remove(b.scene.children[0])};this.doClearObjects=function(){if(b.scene)for(var d=b.scene.children.length-1;0<=d;d--)if(b.scene.children[d]!=b.camera){var e=b.scene.children[d];try{e.me.doDestroy()}catch(g){}null!=e.parent&&e.parent.remove(e)}};this.doDestroy=function(){c.style.display="none";b.forget=!0;b.actives=[];this.forget=a.forget=!0;clock.stop();if(b.scene)for(;0<b.scene.children.length;)b.scene.remove(b.scene.children[0]);
b.scene=null};this.doHide=function(){c.style.display="none"}};var oLANG,oLANG_IMAGES,oLANG_FONTS,BlitLanguage=new function(){var f=this,b,a;this.doLoadLanguage=function(c,d,e){trace("doLoadLanguage()");b=c;a=d;switch(b.split(".").pop().toLowerCase()){case "json":f.doLoadLanguageJSON();break;case "xml":f.doLoadLanguageXML()}};this.doLoadLanguageJSON=function(){var c=new XMLHttpRequest;c.open("GET",b,!0);c.setRequestHeader("Content-Type","application/json");c.onreadystatechange=function(){if(4==c.readyState&&200==c.status){var d=JSON.parse(c.responseText);oLANG=
{};oLANG_IMAGES={};oLANG_FONTS={};var e=d.txt;if(e)for(var g=0;g<e.length;g++){var h=e[g];if(h.id){var m={},n;for(n in h)m[n]=h[n];m.value=h.value||"";m.spaced&&(m.value=m.value.split("").join("\u00a0"));oLANG[m.id]=m}}if(e=d.img)for(g=0;g<e.length;g++)if(h=e[g],h.id){m={};for(n in h)m[n]=h[n];m.value=h.value||"";oLANG_IMAGES[m.id]=m}if(d=d.config)for(g=0;g<d.length;g++)if(h=d[g],h.id){m={};for(n in h)m[n]=h[n];m.value=h.value||"";oCONFIG[m.id]=m.value}a()}};c.send(null)};this.doLoadLanguageXML=function(){trace("doLoadLanguageXML()");
var c=new XMLHttpRequest;c.open("GET",b,!0);c.onreadystatechange=function(){if(4==c.readyState&&200==c.status){var d=(c.responseXML||parseXml(c.responseText)).documentElement;oLANG={};oLANG_IMAGES={};oLANG_FONTS={};var e=d.getElementsByTagName("txt");if(e)for(var g=0;g<e.length;g++){var h=e[g],m={};m.id=h.getAttribute("id");for(var n=0;n<h.attributes.length;n++){var k=h.attributes[n];k.specified&&(m[k.name]=k.value)}m.value=h.childNodes[0]?h.childNodes[0].nodeValue:"";oLANG[m.id]=m}if(m=d.getElementsByTagName("img"))for(g=
0;g<m.length;g++)h=m[g],e=h.getAttribute("id"),h=h.childNodes[0].nodeValue,oLANG_IMAGES[e]=h;if(d=d.getElementsByTagName("config"))for(g=0;g<d.length;g++)h=d[g],e=h.getAttribute("id"),h=h.childNodes[0].nodeValue,"true"==h&&(h=!0),"false"==h&&(h=!1),oCONFIG[e]=h;a()}};c.send(null)}};
function FontLoader(){var f=document.body.appendChild(document.createElement("canvas"));f.style.width="100px";f.style.height="100px";f.style.position="absolute";f.style.display="none";var b=new createjs.Stage(f);b.enableMouseOver(0);b.tickChildren=!0;b.tickEnabled=!0;b.needUpdate=!1;b.enableDOMEvents(!1);b.forget=!1;var a=b.addChild(new lib.font_loader);this.doDestroy=function(){b.update();b.removeAllChildren();__utils.doDestroyElement(f)};this.doAddFont=function(c,d){""!=d&&(d+=" ");a.addChild(new createjs.Text("Hello World",
d+"20px "+c,"#ff7700"))};b.update()};
