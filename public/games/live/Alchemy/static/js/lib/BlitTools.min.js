var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(f,a,b){if(f==Array.prototype||f==Object.prototype)return f;f[a]=b.value;return f};
$jscomp.getGlobal=function(f){f=["object"==typeof globalThis&&globalThis,f,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var a=0;a<f.length;++a){var b=f[a];if(b&&b.Math==Math)return b}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(f,a){var b=$jscomp.propertyToPolyfillSymbol[a];if(null==b)return f[a];b=f[b];return void 0!==b?b:f[a]};$jscomp.polyfill=function(f,a,b,d){a&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(f,a,b,d):$jscomp.polyfillUnisolated(f,a,b,d))};
$jscomp.polyfillUnisolated=function(f,a,b,d){b=$jscomp.global;f=f.split(".");for(d=0;d<f.length-1;d++){var c=f[d];if(!(c in b))return;b=b[c]}f=f[f.length-1];d=b[f];a=a(d);a!=d&&null!=a&&$jscomp.defineProperty(b,f,{configurable:!0,writable:!0,value:a})};
$jscomp.polyfillIsolated=function(f,a,b,d){var c=f.split(".");f=1===c.length;d=c[0];d=!f&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var e=0;e<c.length-1;e++){var h=c[e];if(!(h in d))return;d=d[h]}c=c[c.length-1];b=$jscomp.IS_SYMBOL_NATIVE&&"es6"===b?d[c]:null;a=a(b);null!=a&&(f?$jscomp.defineProperty($jscomp.polyfills,c,{configurable:!0,writable:!0,value:a}):a!==b&&($jscomp.propertyToPolyfillSymbol[c]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(c):$jscomp.POLYFILL_PREFIX+c,c=
$jscomp.propertyToPolyfillSymbol[c],$jscomp.defineProperty(d,c,{configurable:!0,writable:!0,value:a})))};$jscomp.polyfill("Math.log2",function(f){return f?f:function(a){return Math.log(a)/Math.LN2}},"es6","es3");$jscomp.polyfill("Object.is",function(f){return f?f:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(f){return f?f:function(a,b){var d=this;d instanceof String&&(d=String(d));var c=d.length;b=b||0;for(0>b&&(b=Math.max(b+c,0));b<c;b++){var e=d[b];if(e===a||Object.is(e,a))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(f,a,b){if(null==f)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return f+""};$jscomp.polyfill("String.prototype.includes",function(f){return f?f:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");
function BlitControls(f,a){var b=this;a=a||{};var d=document.getElementById(f),c=d.my_stage||new createjs.Stage(d);c.enableMouseOver(0);c.tickChildren=!1;c.tickEnabled=!1;c.needUpdate=!1;c.snapToPixelsEnabled=!0;c.actives=[];c.activeTweens=[];c.enableDOMEvents(!1);c.forget=!1;platform.isMobile?(createjs.Touch.enable(c),c.enableDOMEvents(!1)):(c.enableDOMEvents(!0),c.enableMouseOver(20));d.my_stage=c;b.mouse_is_over=!1;b.my_scale=1;d.onmouseover=function(){b.mouse_is_over=!0};d.onmouseout=function(){b.mouse_is_over=
!1};c.removeAllChildren();var e=c.addChild(new lib.scene_mute_panel);e.b_pause.visible=!1;f=document.documentElement;var h=f.requestFullscreen||f.msRequestFullscreen||f.mozRequestFullScreen||f.webkitRequestFullscreen?!0:!1;a.hide_fullscreen&&(h=!1);h?(e.b_fullscreen.visible=!0,e.b_fullscreen.helper=new __utils.ButtonHelper(c,e.b_fullscreen,"norm","over"),e.b_fullscreen.helper.setSounds({mousedown:"snd_click",rollover:"snd_rollover"}),e.b_fullscreen.addEventListener("click",function(g){oSTAGE.is_fullscreen?
(BlitWindow.doFullScreenOff(),e.b_fullscreen.mc_on.visible=!1,e.b_fullscreen.mc_off.visible=!0):(BlitWindow.doFullScreenOn(),e.b_fullscreen.mc_on.visible=!0,e.b_fullscreen.mc_off.visible=!1);c.needUpdate=!0},!1),oSTAGE.is_fullscreen?(e.b_fullscreen.mc_on.visible=!0,e.b_fullscreen.mc_off.visible=!1):(e.b_fullscreen.mc_on.visible=!1,e.b_fullscreen.mc_off.visible=!0)):e.b_fullscreen.visible=!1;0==__snds.isMute()?e.b_mute.mc_mutelines.visible=!0:e.b_mute.mc_mutelines.visible=!1;e.b_mute.visible=!1;e.b_mute.helper=
new __utils.ButtonHelper(c,e.b_mute,"norm","over");e.b_mute.helper.setSounds({mousedown:"snd_click",rollover:"snd_rollover"});e.b_mute.addEventListener("click",function(g){0==__snds.toggleMute()?(e.b_mute.mc_mutelines.visible=!0,c.needUpdate=!0,oUSER.is_mute=!1,b.onUnMute()):(e.b_mute.mc_mutelines.visible=!1,c.needUpdate=!0,oUSER.is_mute=!0,b.onMute());BlitSaver.doSaveData("user",oUSER)},!1);e.b_pause.helper=new __utils.ButtonHelper(c,e.b_pause,"norm","over");e.b_pause.helper.setSounds({mousedown:"snd_click",
rollover:"snd_rollover"});e.b_pause.addEventListener("click",function(g){if(g.currentTarget.helper.enabled){if(b.isPaused)b.onResume();else b.onPause();c.needUpdate=!0}});e.b_fullscreen.x=7.5;e.b_mute.x=7.5;e.b_pause.x=7.5;h?(e.b_fullscreen.y=6.5,e.b_mute.y=66.5,e.b_pause.y=126.5):(e.b_mute.y=6.5,e.b_pause.y=66.5);e.b_pause.alpha=0;c.needUpdate=!0;this.onPause=function(){};this.onUnPause=function(){};this.onMute=function(){};this.onUnMute=function(){};this.doUpdateMute=function(){0==__snds.isMute()?
e.b_mute.mc_mutelines.visible=!0:e.b_mute.mc_mutelines.visible=!1;c.needUpdate=!0};this.doUpdateFullScreen=function(){BlitWindow.doCheckFullScreen()?(e.b_fullscreen.mc_on.visible=!0,e.b_fullscreen.mc_off.visible=!1):(e.b_fullscreen.mc_on.visible=!1,e.b_fullscreen.mc_off.visible=!0);c.needUpdate=!0};this.doResizeUpdate=function(){var g=oSTAGE.scale;var m=64+(h?64:0);m+=e.b_pause.visible?64:0;d.style.top=0*g+"px";d.style.width=64*g+"px";d.style.height=m*g+"px";d.width=64*g*__utils.getPixelRatio();d.height=
m*g*__utils.getPixelRatio();e.my_scale=g;b.my_scale=g;c.scale=g*__utils.getPixelRatio();c.needUpdate=!0};this.doShowPause=function(){e.b_pause.helper.setEnabled(!0);e.b_pause.visible=!0;platform.isMobile?(e.b_pause.alpha=1,c.needUpdate=!0):(createjs.Tween.get(e.b_pause).to({alpha:1},250),c.activeTweens.push(e.b_pause))};this.doHidePause=function(){e.b_pause.helper.setEnabled(!1);platform.isMobile?(e.b_pause.visible=!1,c.needUpdate=!0):(createjs.Tween.get(e.b_pause).to({alpha:0},250),c.activeTweens.push(e.b_pause))};
b.doResizeUpdate();update_queue.push({doResizeUpdate:b.doResizeUpdate});active_stages.push(c);(function(){actives.push({forget:!1,doUpdate:function(){"running"==createjs.Sound.activePlugin.context.state&&(e.b_mute.visible=!0,this.forget=e.stage.needUpdate=!0)}})})();d.style.display="block"};function LoaderScreen(f,a){f=void 0===f?null:f;a=void 0===a?{}:a;var b=this;trace("LoaderScreen()");var d=(f?document.getElementById(f):document.body).appendChild(document.createElement("div"));d.className="loading_screen";d.style.display="none";var c=d.appendChild(document.createElement("div"));c.className="loading_block";a.logo?(f=c.appendChild(document.createElement("img")),f.className="loading_logo",c.appendChild(document.createElement("br")),f.onload=function(){trace("image loaded");d.style.display=
"block";b.doResizeUpdate()},f.src=a.logo):d.style.display="block";a.msg&&(f=c.appendChild(document.createElement("div")),f.className="loading_msg",f.innerHTML=a.msg,c.appendChild(document.createElement("br")));a=c.appendChild(document.createElement("div"));a.className="loading_bar";var e=a.appendChild(document.createElement("div"));e.className="loading_bar_fill";a.appendChild(document.createElement("div")).className="loading_bar_frame";this.doResizeUpdate=function(){scale=Math.min(document.body.offsetWidth/
640,document.body.offsetHeight/640,1);c.style.top=.5*document.body.offsetHeight+"px";c.style.left=.5*document.body.offsetWidth+"px";c.style.transform="scale("+scale+")";c.style.marginTop=-(.5*c.clientHeight)+"px";c.style.marginLeft=-(.5*c.clientWidth)+"px"};this.doUpdateBar=function(h){e.style.width=Math.max(9,Math.min(100,100*h))+"%"};this.doDestroy=function(){window.removeEventListener("resize",b.doResizeUpdate);window.removeEventListener("orientationchange",b.doResizeUpdate);d.parentNode.removeChild(d);
LOADER=null};window.addEventListener("resize",b.doResizeUpdate);window.addEventListener("orientationchange",b.doResizeUpdate);b.doResizeUpdate()};function BlitPause(f){var a=this;__snds.forceMute();__snds.setPause("music",!0);var b=document.getElementById(f),d=b.my_stage||new createjs.Stage(b);d.enableMouseOver(0);d.tickChildren=!1;d.tickEnabled=!1;d.needUpdate=!1;d.snapToPixelsEnabled=!0;d.actives=[];d.activeTweens=[];d.enableDOMEvents(!1);d.forget=!1;platform.isMobile?(createjs.Touch.enable(d),d.enableDOMEvents(!1)):(d.enableDOMEvents(!0),d.enableMouseOver(20));b.my_stage=d;d.removeAllChildren();var c=d.addChild(new lib.popup_pause);c.my_scale=
null;c.b_exit.helper=new __utils.ButtonHelper(d,c.b_exit,"norm","over");c.b_exit.helper.setSounds({mousedown:"snd_click",rollover:"snd_rollover"});__utils.doText(c.b_exit.txt,oLANG.exit_game,{verticalAlign:"middle"});c.b_exit.addEventListener("click",function(h){a.doDestroy();__snds.setPause("music",!1);__snds.unforceMute();MyGame.doQuit()});c.b_resume.helper=new __utils.ButtonHelper(d,c.b_resume,"norm","over");c.b_resume.helper.setSounds({mousedown:"snd_click",rollover:"snd_rollover"});__utils.doText(c.b_resume.txt,
oLANG.resume_game,{verticalAlign:"middle"});c.b_resume.addEventListener("click",function(h){__snds.setPause("music",!1);__snds.unforceMute();a.doDestroy();MyGame.doResume()});c.b_help.helper=new __utils.ButtonHelper(d,c.b_help,"norm","over");c.b_help.helper.setSounds({mousedown:"snd_click",rollover:"snd_rollover"});__utils.doText(c.b_help.txt,oLANG.help,{verticalAlign:"middle"});c.b_help.addEventListener("click",function(h){e.forget=!0;d.forget=!0;d.enableMouseOver(0);d.removeAllChildren();d.needUpdate=
!0;b.style.backgroundColor="rgba(0,0,0,0)";b.style.display="none";MyGame.doHelp()});MyGame.isReplay&&(c.b_help.visible=!1,c.b_help.mouseEnabled=!1);d.needUpdate=!0;this.doResizeUpdate=function(){b.style.left="0px";b.style.top="0px";b.style.width=oSTAGE.wrapper_width+"px";b.style.height=oSTAGE.wrapper_height+"px";b.width=oSTAGE.wrapper_width*oSTAGE.pixel_ratio;b.height=oSTAGE.wrapper_height*oSTAGE.pixel_ratio;c.x=.5*oSTAGE.game_width|0;c.y=.5*oSTAGE.game_height|0;c.my_scale=oSTAGE.scale;d.scale=oSTAGE.scale*
oSTAGE.pixel_ratio;d.needUpdate=!0};this.doDestroy=function(){oUSER.is_mute||(createjs.Sound.muted=!1);e.forget=!0;d.forget=!0;d.enableMouseOver(0);d.removeAllChildren();d.needUpdate=!0;b.style.backgroundColor="rgba(0,0,0,0)";b.style.display="none"};a.doResizeUpdate();var e={doResizeUpdate:a.doResizeUpdate};update_queue.push(e);active_stages.push(d);b.style.display="block";b.style.backgroundColor="rgba(0,0,0,0.4)"};var debug_line=1;function trace(f,a){if(oCONFIG.debug_trace){try{console.log(f)}catch(d){}if(oCONFIG.debug_panel){var b=document.getElementById("debug");b&&(b.style.display="block",b.innerHTML="error"==a?'<li class="debug_error">'+f+b.innerHTML:"<li>"+f+b.innerHTML)}}}Image.prototype.load=function(f){var a=new XMLHttpRequest;a.thisImg=this;a.open("GET",f,!0);a.responseType="arraybuffer";return a};Image.prototype.completedPercentage=0;
window.onerror=function(f,a,b){oCONFIG.debug_panel&&trace("onerror: "+f+" src:"+a+" @"+b,"error")};
function doFindLinks(f){for(var a=f.text.split(" "),b=f.original_font_size,d=[],c=0;c<a.length;c++){var e=a[c];"http"==e.substring(0,4)&&(e={url:e},d.push(e),a[c]="\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0")}a=a.join(" ");f.text=a;var h=f.getMetrics().lines,g=0;for(c=0;c<h.length;c++){f.text="";for(var m=h[c].split(" "),n=0;n<m.length;n++){e=m[n];if("\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0"==e){var k=f.getBounds();d[g].y=f.y+c*f.lineHeight+.5*b;d[g].x=f.x+k.width+b;g++}f.text+=e;c<m.length&&(f.text+=" ")}}f.text=
a;for(c=0;c<d.length;c++)e=d[c],a=new lib.link_icon,f.parent.addChild(a),a.url=e.url,a.x=e.x,a.y=e.y,a.scaleX=a.scaleY=1.5*b/40,a.helper=new __utils.ButtonHelper(a.stage,a,"norm","over"),a.addEventListener("click",function(l){window.open(l.currentTarget.url)})}var myNav=navigator.userAgent.toLowerCase();
function doGetBrowser(){var f=navigator.userAgent,a=f.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(a[1])){var b=/\brv[ :]+(\d+)/g.exec(f)||[];return{name:"IE",version:b[1]||""}}if("Chrome"===a[1]&&(b=f.match(/\bOPR|Edge\/(\d+)/),null!=b))return{name:"Opera",version:b[1]};a=a[2]?[a[1],a[2]]:[navigator.appName,navigator.appVersion,"-?"];null!=(b=f.match(/version\/(\d+)/i))&&a.splice(1,1,b[1]);return{name:a[0],version:a[1]}}
function is_touch_device(){return"ontouchstart"in window||0<navigator.MaxTouchPoints||0<navigator.msMaxTouchPoints}
var platform={isAndroid:navigator.userAgent.match(/Android/i),isBlackBerry:navigator.userAgent.match(/BlackBerry/i),isiOS:navigator.userAgent.match(/iPhone|iPad|iPod/i),isMobileOpera:navigator.userAgent.match(/Opera Mini/i),isMobileWindows:navigator.userAgent.match(/IEMobile/i),isTouchDevice:is_touch_device(),isMobile:navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/Opera Mini/i)||navigator.userAgent.match(/IEMobile/i),
isSamsungBrowser:navigator.userAgent.match(/SamsungBrowser/i),isIE:-1!=myNav.indexOf("msie")||"Microsoft Internet Explorer"==navigator.appName||"Netscape"==navigator.appName&&null!=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent),isFirefox:navigator.userAgent.match(/Firefox/i),isWindows:-1!=window.navigator.platform.indexOf("Win"),isIE11:!!window.MSInputMethodContext&&!!document.documentMode,isChrome:/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),isSafari:/Safari/.test(navigator.userAgent)&&
/Apple Computer/.test(navigator.vendor)},support={gzip:!1,canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var f=document.createElement("canvas");return!(!window.WebGLRenderingContext||!f.getContext("webgl")&&!f.getContext("experimental-webgl"))}catch(a){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,clamped_array:window.Uint8ClampedArray,zoom:""===document.createElement("detect").style.zoom};
function doPrep(){trace(".doPrep()");doFixCompatibilityIssues();doCheckBrowser()?doInit2():doBrowserAlert()}
function doFixCompatibilityIssues(){trace("doFixCompatibilityIssues()");0=="console"in window&&(console={log:function(){},error:function(){}});Math.log2=Math.log2||function(a){return Math.log(a)*Math.LOG2E};var f=window.DOMParser?function(a){return(new window.DOMParser).parseFromString(a,"text/xml")}:"undefined"!=typeof window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM")?function(a){var b=new window.ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a);return b}:function(){return null};
window.parseXml=f;String.prototype.includes||(String.prototype.includes=function(a,b){"number"!==typeof b&&(b=0);return b+a.length>this.length?!1:-1!==this.indexOf(a,b)});Date.now=Date.now||function(){return(new Date).getTime()};0=="performance"in window&&(window.performance={offset:Date.now(),now:function(){return Date.now()-this.offset}});my_performance={offset:Date.now(),now:function(){return Date.now()-this.offset}};window.requestAnimationFrame||(window.requestAnimationFrame=function(a,b){var d=
(new Date).getTime(),c=Math.max(0,16-(d-lastTime));b=window.setTimeout(function(){a(d+c)},c);lastTime=d+c;return b})}function doCheckBrowser(){trace("doCheckBrowser()");var f=!0;support.clamped_array||(f=!1);platform.isIE11&&(f=!1);platform.isSamsungBrowser&&(f=!1);oCONFIG.support_checks&&(oCONFIG.support_checks.canvas&&!support.canvas&&(f=!1),oCONFIG.support_checks.webgl&&!support.webgl&&(f=!1));support.canvas&&support.webgl&&support.clamped_array||(f=!1);return f}
function doBrowserAlert(){trace("doBrowserAlert()");var f=document.getElementById("div_errors");var a='<table border="0" class="div_errors_table" cellpadding="40"><tr><td align="center" valign="middle"><img border="0" class="div_errors_logo" src="'+(oLANG_IMAGES.logo.value+'" alt="'+oLANG_IMAGES.logo.alt+'"/><p>');a+=oLANG.browser_alert.value+"<p>";f.innerHTML=a+'<a href="https://www.google.com/chrome/browser/"><img border="0" src="media/browser_icons/icon_chrome.png" width="64" height="64" alt="Chrome"/></a><a href="http://www.mozilla.org/firefox/new/"><img border="0" src="media/browser_icons/icon_firefox.png" width="64" height="64" alt="Firefox"/></a><a href="https://www.microsoft.com/microsoft-edge"><img border="0" src="media/browser_icons/icon_edge.png" width="64" height="64" alt="Edge"/></a><a href="http://www.apple.com/safari/"><img border="0" src="media/browser_icons/icon_safari.png" width="64" height="64" alt="Safari"/></a></td></tr></table>';
f.style.display="block";trace(f)};var BlitStage=function(f,a){if(f.stage){var b=f.stage;b.removeAllChildren();b.actives=[];b.activeTweens=[];b.forget=!1;b.enableMouseOver(0);return b}a.webgl?(b=new createjs.StageGL(f,{transparent:!1,antialias:!0,premultiply:!0}),b.webgl=!0):(b=new createjs.Stage(f),b.webgl=!1);b.actives=[];b.activeTweens=[];b.tickChildren=!1;b.tickEnabled=!1;b.needUpdate=!1;b.forget=!1;b.snapToPixelsEnabled=!1;b.enableDOMEvents(!1);b.enableMouseOver(0);platform.isMobile?(createjs.Touch.enable(b),b.enableDOMEvents(!1)):
(b.enableDOMEvents(!0),b.enableMouseOver(20));a.no_resize||(b.doResizeUpdate=function(){f.style.left="0px";f.style.top="0px";f.style.width=oSTAGE.wrapper_width+"px";f.style.height=oSTAGE.wrapper_height+"px";f.width=oSTAGE.wrapper_width*oSTAGE.pixel_ratio;f.height=oSTAGE.wrapper_height*oSTAGE.pixel_ratio;this.scale=oSTAGE.scale*oSTAGE.pixel_ratio;this.webgl&&this.updateViewport(f.width,f.height);b.needUpdate=!0},update_queue.push(b),active_stages.push(b));return b};function BlitTimer(f){var a=this;a.direction=f.direction||-1;a.is_paused=!0;a.pause_time=0;a.start_time=0;a.game_time=1E3*f.seconds_on_clock;a.time_left=a.game_time;a.time_used=0;a.current_seconds=0;a.percent_left=1;a.giving_bonus=!1;this.doStart=function(){a.pause_time=0;a.start_time=performance.now();a.game_time=1E3*f.seconds_on_clock;a.time_left=a.game_time;a.current_seconds=0;a.is_paused=!1;a.forget=!1;a.is_active=!0;GameWorld.actives.push(a)};this.doFirstUpdate=function(){var b=Math.ceil(.001*
a.game_time);a.percent_left=a.time_left/a.game_time;var d=b;b=Math.floor(d/60);d-=60*b;if(10>d)var c=0;else c=Math.floor(d/10),d-=10*c;f.callback_update&&f.callback_update(a.time_left,a.percent_left,{m:b.toString(),ss:c.toString()+d.toString()})};this.doUpdate=function(){if(a.is_active&&!a.is_paused){a.giving_bonus?(a.time_left=Math.max(0,a.time_left-500),a.time_used=Math.max(a.game_time,a.game_time-a.time_left)):-1==a.direction?(a.time_left=Math.max(0,a.start_time+a.game_time-performance.now()),
a.time_used=Math.max(a.game_time,a.game_time-a.time_left)):(a.time_left=Math.max(0,performance.now()-a.start_time),a.time_used=a.time_left);var b=Math.ceil(.001*a.time_left);a.percent_left=a.time_left/a.game_time;if(b!=a.current_seconds){var d=b;b=Math.floor(d/60);d-=60*b;if(10>d)var c=0;else c=Math.floor(d/10),d-=10*c;f.callback_update&&f.callback_update(a.time_left,a.percent_left,{m:b.toString(),ss:c.toString()+d.toString()})}-1==a.direction&&0>=a.time_left&&(f.callback_update&&f.callback_update(a.time_left,
a.percent_left,{m:"0",ss:"00"}),a.is_active=!1,a.giving_bonus?(a.giving_bonus=!1,__snds.stopSound("timer"),f.callback_bonuscomplete&&f.callback_bonuscomplete()):f.callback_outoftime&&f.callback_outoftime())}};this.doStartBonus=function(){a.giving_bonus=!0;a.is_paused=!1;a.forget=!1;a.is_active=!0;GameWorld.actives.push(a)};this.doStop=function(){a.forget=!0;a.is_active=!1};this.doPause=function(){a.pause_time=performance.now();a.is_paused=!0};this.doAddTime=function(b){a.clock_frames+=60*b;a.start_time+=
1E3*b};this.doResume=function(){a.start_time+=performance.now()-a.pause_time;a.is_paused=!1};this.doDestroy=function(){a.forget=!0;a.is_active=!1}};var oTOUCHES=[],_BlitInputs=function(f){var a=this,b=document.getElementById(f.target)||document.documentElement;a.has_tilt=!1;a.using_tilt=!1;a.still_frames=0;a.beta=0;a.lastbeta=0;a.alpha=0;a.lastalpha=0;a.tilt_x=0;a.tilt_y=0;a.allow_key_defaults=f.allowKeyDefaults;a.click_pending=!1;a.has_touch=!1;a.touching=!1;a.mouse_is_down=!1;a.mouse_start_x=0;a.mouse_start_y=0;a.start_x=0;a.start_y=0;a.mouse_x=0;a.mouse_y=0;a.frames_down=0;a.using_keyboard=!1;a.right=!1;a.left=!1;a.up=!1;a.dn=!1;a.z=!1;a.x=
!1;a.c=!1;a.v=!1;a.b=!1;a.space=!1;a.keys_down=[];a.propagation_prevention=f.propagationLevel;this.doSetPropagationPrevention=function(k){a.propagation_prevention=k};this.doGetTouches=function(){return oTOUCHES};f=function(k){a.mouse_is_down||(a.frames_down=0,a.mouse_is_down=!0,a.click_pending=!0,a.mouse_x=(k.clientX-b.offsetLeft)*oSTAGE.scale_inv|0,a.mouse_y=(k.clientY-b.offsetTop)*oSTAGE.scale_inv|0,a.mouse_start_x=a.mouse_x,a.mouse_start_y=a.mouse_y,a.start_x=a.mouse_x,a.start_y=a.mouse_y,a.speed_x=
0,a.speed_y=0,a.client_mouse_x=(k.clientX-b.offsetLeft)*oSTAGE.scale_inv|0,a.client_mouse_y=(k.clientY-b.offsetTop)*oSTAGE.scale_inv|0,a.client_mouse_start_x=a.client_mouse_x,a.client_mouse_start_y=a.client_mouse_y)};var d=function(k){a.client_mouse_x=(k.clientX-b.offsetLeft)*oSTAGE.scale_inv|0;a.client_mouse_y=(k.clientY-b.offsetTop)*oSTAGE.scale_inv|0;a.speed_x=a.client_mouse_x-a.mouse_x;a.speed_y=a.client_mouse_y-a.mouse_y;a.mouse_x=(k.clientX-b.offsetLeft)*oSTAGE.scale_inv|0;a.mouse_y=(k.clientY-
b.offsetTop)*oSTAGE.scale_inv|0},c=function(k){a.mouse_is_down=!1;a.release_pending=!0;a.frames_down=0},e=-1,h=function(k){for(var l=0;l<oTOUCHES.length;l++)if(oTOUCHES[l].id===k)return l;return-1},g=function(k){trace("doTouchStart");var l=k.touches;k.touches?l=k.touches:k.targetTouches?l=k.targetTouches:k.pageX&&(l=[k]);for(var q=0;q<l.length;q++){var r=l[q],u=h(r.identifier),t=(r.clientX-b.offsetLeft)*oSTAGE.scale_inv,v=(r.clientY-b.offsetTop)*oSTAGE.scale_inv;-1==u&&(oTOUCHES.push({id:r.identifier,
frames_down:0,mouse_is_down:!0,click_pending:!0,release_pending:!1,my_x:t,my_y:v,speed_x:0,speed_y:0,start_x:t,start_y:v}),1==oTOUCHES.length&&(e=r.identifier,a.touching=!0,a.frames_down=0,a.mouse_is_down=!0,a.click_pending=!0,a.release_pending=!1,a.mouse_x=t,a.mouse_y=v,a.speed_x=0,a.speed_y=0,a.start_x=t,a.start_y=v,a.mouse_start_x=t,a.mouse_start_y=v))}r.target.prohibit_touch&&k.preventDefault();for(l=r.target;l&&l!==document;){if(l.id&&(-1!=l.id.indexOf("_evidon")||-1!=l.id.indexOf("_evh"))){r.target.allow_touch=
!0;break}l=l.parentNode}platform.isTouchDevice&&!r.target.allow_touch&&2<=a.propagation_prevention&&k.preventDefault()},m=function(k){var l;k.changedTouches?l=k.changedTouches:k.targetTouches?l=k.targetTouches:k.pageX&&(l=[k]);for(var q=0;q<l.length;q++){var r=l[q],u=r.identifier,t=h(u),v=(r.clientX-b.offsetLeft)*oSTAGE.scale_inv,w=(r.clientY-b.offsetTop)*oSTAGE.scale_inv,x=v-oTOUCHES[t].my_x,y=w-oTOUCHES[t].my_y;oTOUCHES[t].speed_x=x;oTOUCHES[t].speed_y=y;oTOUCHES[t].my_x=v;oTOUCHES[t].my_y=w;u==
e&&(a.mouse_x=v,a.mouse_y=w,a.speed_x=x,a.speed_y=y)}for(l=r.target;l&&l!==document;){if(l.id&&(-1!=l.id.indexOf("_evidon")||-1!=l.id.indexOf("_evh"))){r.target.allow_touch=!0;break}l=l.parentNode}r.target.prohibit_touch_scroll&&Math.abs(oTOUCHES[0].speed_x)>Math.abs(oTOUCHES[0].speed_y)&&k.preventDefault();r.target.prohibit_touch&&k.preventDefault();(r.target.prohibit_touchmove||platform.isTouchDevice&&!r.target.allow_touch&&1<=a.propagation_prevention)&&k.preventDefault()},n=function(k){switch(k.type){case "touchend":case "touchcancel":case "MSPointerUp":var l;
k.changedTouches?l=k.changedTouches:k.targetTouches?l=k.targetTouches:k.pageX&&(l=[k]);for(k=0;k<l.length;k++){var q=l[k].identifier,r=h(q);q==e&&a.mouse_is_down&&(a.mouse_is_down=!1,a.release_pending=!0,a.frames_down=0,a.touching=!1);-1!=r&&oTOUCHES.splice(r,1)}}};window.onkeydown=function(k){var l=k.which||k.keyCode||k.key;a.allow_key_defaults||(k.preventDefault(),k.stopPropagation());if(!(0<=a.keys_down.indexOf(l)))switch(a.keys_down.push(l),a.using_keyboard=!0,l){case 39:a.right=!0;a.right_pending=
!0;break;case 37:a.left=!0;a.left_pending=!0;break;case 32:a.space=!0;a.space_pending=!0;break;case 38:a.up=!0;a.up_pending=!0;break;case 40:a.dn=!0;a.dn_pending=!0;break;case 90:a.z=!0;a.z_pending=!0;break;case 88:a.x=!0;a.x_pending=!0;break;case 67:a.c=!0;a.c_pending=!0;break;case 86:a.v=!0;a.v_pending=!0;break;case 66:a.b=!0,a.b_pending=!0}};window.onkeyup=function(k){var l=k.which||k.keyCode||k.key;a.allow_key_defaults||(k.preventDefault(),k.stopPropagation());var q=a.keys_down.indexOf(l);0<=
q&&a.keys_down.splice(q,1);switch(l){case 39:a.right=!1;break;case 37:a.left=!1;break;case 32:a.space=!1;a.space_rel_pending=!0;break;case 38:a.up=!1;break;case 40:a.dn=!1;break;case 90:a.z=!1;break;case 88:a.x=!1;break;case 67:a.c=!1;break;case 86:a.v=!1;break;case 66:a.b=!1}a.allow_key_defaults||(k.preventDefault(),k.stopPropagation())};platform.isTouchDevice?window.navigator.msPointerEnabled?(window.addEventListener("MSPointerDown",g,{passive:!1,capture:!1}),window.addEventListener("MSPointerUp",
n,{passive:!1,capture:!1})):(window.addEventListener("touchstart",g,{passive:!1,capture:!1}),window.addEventListener("touchend",n,{passive:!1,capture:!1}),window.addEventListener("touchmove",m,{passive:!1,capture:!1})):(window.onmouseup=document.onblur=c,b.onmousedown=f,b.onmousemove=d)};var _BlitSaver=function(f){window.localStorageAlias=window.localStorage;this.useCookies=!1;window.localStorage&&"undefined"!=window.localStorage||(window.localStorageAlias={},window.localStorageAlias.removeItem=function(){});this.doSaveData=function(a,b){try{a=f.game_key+"_"+a,window.localStorageAlias[a]=JSON.stringify(b)}catch(d){}};this.doGetData=function(a){try{a=f.game_key+"_"+a;var b=window.localStorageAlias[a];return b?""!=b?JSON.parse(b):null:null}catch(d){}};this.doClearData=function(a){a=
f.game_key+"_"+a;window.localStorageAlias.removeItem(a)}};var MaterialsLibrary={};function ButtonHelper(f,a,b,d,c,e,h,g){a.addEventListener&&(this.target=a,this.snds={},this.my_stage=f,this.normLabel=null==b?"norm":b,this.overLabel=null==d?"over":d,this.downLabel=null==c?"over":c,this.play=e,this._enabled=this._isOver=this._isPressed=!1,a.mouseChildren=!1,this.enabled=!0,h&&(g&&(h.actionsEnabled=!1,h.gotoAndStop&&h.gotoAndStop(g)),a.hitArea=h))}var p=ButtonHelper.prototype;p.setParams=function(f){for(var a in f)this[a]=f[a]};
p.setSounds=function(f){for(var a in f)this.snds[a]=f[a]};
p.setEnabled=function(f){if(f!=this._enabled){var a=this.target;(this._enabled=f)?(a.cursor="pointer",a.addEventListener("rollover",this),a.addEventListener("rollout",this),a.addEventListener("mousedown",this),a.addEventListener("pressup",this)):(a.cursor=null,a.removeEventListener("rollover",this),a.removeEventListener("rollout",this),a.removeEventListener("mousedown",this),a.removeEventListener("pressup",this));this._isOver=this._isPressed=!1}};p.getEnabled=function(){return this._enabled};
try{Object.defineProperties(p,{enabled:{get:p.getEnabled,set:p.setEnabled}})}catch(f){}p.toString=function(){return"[ButtonHelper]"};
p.handleEvent=function(f){var a=this.target;f=f.type;this._enabled&&("mousedown"==f?(this._isPressed=!0,f=this.downLabel,this.snds.mousedown&&__snds.playSound(this.snds.mousedown,"interface")):"pressup"==f?(this._isPressed=!1,f=this._isOver?this.overLabel:this.normLabel):"rollover"==f?(this._isOver=!0,f=this._isPressed?this.downLabel:this.overLabel,this.snds.rollover&&__snds.playSound(this.snds.rollover,"interface")):(this._isOver=!1,f=this._isPressed?this.overLabel:this.normLabel),this.play?a.gotoAndPlay&&
a.gotoAndPlay(f):a.gotoAndStop&&a.gotoAndStop(f),a.cacheID&&!this.ignore_cache&&__utils.doCache(a,oSTAGE.cache_scale),this.my_stage&&(this.my_stage.needUpdate=!0))};
var BlitTools=function(){var f=this;f.firefox_font_shift=.1;this.doInitResizer=function(a){var b=document.createElement("div");b.id="resizer";b.w=null;b.h=null;b.scroll=null;b.keep=!0;b.doUpdate=function(){if(this.w!=window.innerWidth||this.h!=window.innerHeight||this.scroll!=document.documentElement.scrollTop)this.w=window.innerWidth,this.h=window.innerHeight,this.scroll=document.documentElement.scrollTop,window.scrollTo(0,0),a(),platform.isMobile&&setTimeout(function(){window.scrollTo(0,0);a()},
250)};actives.push(b);window.addEventListener("orientationchange",function(){b.w=0;b.h=0})};this.doInitFocusManager=function(a,b){var d=!1,c=function(){d||(a&&a(),d=!0)},e=function(){d&&(b&&b(),d=!1)},h=f.doGetHiddenProp();if(h){var g=h.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(g,function(m){document[h]?c():e()})}window.addEventListener("blur",c);window.addEventListener("focus",e)};this.doGetHiddenProp=function(){var a=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";
for(var b=0;b<a.length;b++)if(a[b]+"Hidden"in document)return a[b]+"Hidden";return null};this.ButtonHelper=ButtonHelper;this.doUpdateCreateJsStage=function(a,b){if(a.needUpdate||0<a.activeTweens.length||0<a.actives.length||0<a.updateFrames){a.updateFrames=Math.max(0,a.updateFrames-1);for(var d=a.actives.length-1;0<=d;d--){var c=a.actives[d];if(!c.me||a.contains(c.me)&&!c.need_destroy)c.need_purged?a.actives.splice(d,1):c.update_function?c.update_function(c):c.doUpdate&&c.doUpdate();else{try{c.me.parent.removeChild(c.me)}catch(e){}a.actives.splice(d,
1)}}for(d=a.activeTweens.length-1;0<=d;d--)createjs.Tween.hasActiveTweens(a.activeTweens[d])||a.activeTweens.splice(d,1);b?a.update(b):a.update();a.needUpdate=!1}};this.createCORSRequest=function(a,b){var d=new XMLHttpRequest;"withCredentials"in d?d.open(a,b,!0):"undefined"!=typeof XDomainRequest?(d=new XDomainRequest,d.open(a,b)):d=null;return d};this.doLoad3dAssets=function(a,b){if(0==a.manifest.length)a.progress=1,a.complete=!0;else if(!a.started){a.started=!0;var d=a.manifest,c=new THREE.LoadingManager;
c.onLoad=function(){c.doCheckLoading()};c.onError=function(){trace("load error")};c.onProgress=function(n,k,l){a.progress=Math.max(a.progress,k/l);for(var q=0;q<d.length;q++)if(d[q].src==n){d.splice(q,1);break}k==l&&c.doCheckLoading()};c.doCheckLoading=function(){a.loaded||0!=c.items_to_process||0!=d.length||(a.progress=1,a.loaded=!0)};c.items_to_process=d.length;for(var e=0;e<d.length;e++){var h=d[e];switch(h.type){case "json":var g=f.createCORSRequest("GET",h.src);if(!g)return;g.onload=function(){var n=
JSON.parse(g.responseText);b[this.name]=n}.bind({name:h.name});g.onerror=function(){trace("error loading data")};g.send();break;case "animated_fbx":var m=new THREE.FBXLoader(c);m.load(h.src,function(n){var k=this.data;n.traverse(function(l){l.isMesh&&(k.flat_shading?l.material=new THREE.MeshBasicMaterial({toneMapped:!1,map:l.material.map,blending:THREE.NoBlending,fog:!1,side:THREE.FrontSide,vertexColors:k.vertexColors}):(l.material.side=THREE.FrontSide,l.material.vertexColors=k.vertexColors),l.material.needsUpdate=
!0)});b[k.id]=n;c.items_to_process--;c.doCheckLoading()}.bind({data:h}));break;case "static_fbx":m=new THREE.FBXLoader(c);m.load(h.src,function(n){for(var k=this.data,l=0;l<n.children.length;l++){var q=n.children[l];q.name&&(q.traverse(function(r){if(r instanceof THREE.Mesh&&r.material.map){r.material.map.wrapS=THREE.RepeatWrapping;r.material.map.wrapT=THREE.RepeatWrapping;r.material.map.encoding=THREE.LinearEncoding;k.pixelated?(r.material.map.minFilter=THREE.NearestFilter,r.material.map.magFilter=
THREE.NearestFilter):(r.material.map.minFilter=platform.isMobile?THREE.NearestMipMapNearestFilter:THREE.LinearMipMapNearestFilter,r.material.map.magFilter=THREE.LinearFilter);if(k.flat_shading){var u=r.material.map.uuid;MaterialsLibrary[u]||(MaterialsLibrary[u]=new THREE.MeshBasicMaterial({map:r.material.map,blending:THREE.NoBlending,transparent:!1,opacity:1,fog:!1,side:THREE.FrontSide}));r.material=MaterialsLibrary[u]}r.material.needsUpdate=!0}}),b[q.name]=q)}c.items_to_process--;c.doCheckLoading()}.bind({data:h}));
break;case "static":m=new THREE.ObjectLoader(c);m.load(h.src,function(n){for(var k=this.data,l=0;l<n.children.length;l++){var q=n.children[l];if(q.name)if(q.name.includes(".DAE")||q.name.includes("ROOT"))for(var r=0;r<q.children.length;r++){var u=q.children[r];b[u.name]=u}else q.traverse(function(t){t instanceof THREE.Mesh&&t.material.map&&(t.material.map.wrapS=THREE.RepeatWrapping,t.material.map.wrapT=THREE.RepeatWrapping,k.pixelated?(t.material.map.minFilter=THREE.NearestFilter,t.material.map.magFilter=
THREE.NearestFilter):platform.isMobile?(t.material.map.minFilter=THREE.NearestMipMapNearestFilter,t.material.map.magFilter=THREE.NearestFilter):(t.material.map.minFilter=THREE.LinearMipMapNearestFilter,t.material.map.magFilter=THREE.LinearFilter))}),b[q.name]=q}c.items_to_process--;c.doCheckLoading()}.bind({name:h.name}));break;case "animated_json":100>THREE.REVISION?(m=new THREE.JSONLoader(c),m.load(h.src,function(n,k){my_data.pixelated?(k[0].map.minFilter=THREE.NearestFilter,k[0].map.magFilter=
THREE.NearestFilter):platform.isMobile?(k[0].map.minFilter=THREE.NearestMipMapNearestFilter,k[0].map.magFilter=THREE.NearestFilter):(k[0].map.minFilter=THREE.NearestMipMapNearestFilter,k[0].map.minFilter=THREE.LinearFilter);k[0].map.wrapS=THREE.ClampToEdgeWrapping;k[0].map.wrapT=THREE.ClampToEdgeWrapping;k=new THREE.MeshBasicMaterial({map:k[0].map});k.skinning=!0;b[this.name]=new THREE.SkinnedMesh(n,k);c.items_to_process--;c.doCheckLoading()}.bind({name:h.name}))):(m=new THREE.LegacyJSONLoader(c),
m.load(h.src,function(n,k){my_data.pixelated?(k[0].map.minFilter=THREE.NearestFilter,k[0].map.magFilter=THREE.NearestFilter):platform.isMobile?(k[0].map.minFilter=THREE.NearestMipMapNearestFilter,k[0].map.magFilter=THREE.NearestFilter):(k[0].map.minFilter=THREE.NearestMipMapNearestFilter,k[0].map.minFilter=THREE.LinearFilter);k[0].map.wrapS=THREE.ClampToEdgeWrapping;k[0].map.wrapT=THREE.ClampToEdgeWrapping;k=new THREE.MeshBasicMaterial({map:k[0].map});k.skinning=!0;n=(new THREE.BufferGeometry).fromGeometry(n);
b[this.name]=new THREE.SkinnedMesh(n,k);c.items_to_process--;c.doCheckLoading()}.bind({name:h.name})));break;case "font":m=new THREE.FontLoader(c);m.load(h.src,function(n){b[this.name]=n;c.items_to_process--;c.doCheckLoading()}.bind({name:h.name}));break;case "sprite":m=new THREE.TextureLoader(c);m.load(h.src,function(n){n=new THREE.SpriteMaterial({map:n,color:16777215,transparent:!0});n=new THREE.Sprite(n);b[this.name]=n;c.items_to_process--;c.doCheckLoading()}.bind({name:h.name}));break;case "texture":m=
new THREE.TextureLoader(c);m.load(h.src,function(n){var k=this.data;k.wrapping&&(n.wrapS=THREE.RepeatWrapping,n.wrapT=THREE.RepeatWrapping);b[k.name]=n;c.items_to_process--;c.doCheckLoading()}.bind({data:h}));break;case "skybox":m=new THREE.CubeTextureLoader(c),m.setPath("media/models/skyboxes/"+h.name+"/"),m.load("right.jpg left.jpg up.jpg down.jpg front.jpg back.jpg".split(" "),function(n){platform.isMobile?(n.magFilter=THREE.NearestFilter,n.minFilter=THREE.NearestMipMapNearestFilter):n.minFilter=
THREE.LinearFilter;b[this.name]=n;c.items_to_process--;c.doCheckLoading()}.bind({name:h.name}))}}}};this.doLoadAssets=function(a){var b=this;if(0==a.manifest.length)a.progress=1,a.complete=!0;else if(!a.started){a.started=!0;for(var d=0;d<a.manifest.length;d++)try{for(var c=a.manifest[d].data.audioSprite,e=0;e<c.length;e++)c[e].duration-=c[e].startTime}catch(m){}images=images||{};var h=document.documentElement.appendChild(document.createElement("div"));h.className="loader_dummy";h.id="loader_dummy";
var g=new createjs.LoadQueue(!1);g.installPlugin(createjs.Sound);g.removeEventListener("fileload",b.onFileLoad);g.removeEventListener("progress",b.onProgress);g.removeEventListener("complete",b.onComplete);g.removeEventListener("error",b.onError);this.onFileLoad=function(m){if("javascript"==m.item.type){var n=document.createElement("script");n.setAttribute("type","text/javascript");n.setAttribute("src",m.item.src);document.getElementsByTagName("head")[0].appendChild(n)}else"image"==m.item.type||"svg"==
m.item.type?images[m.item.id]=m.result:"text"==m.item.type&&(n=h.appendChild(document.createElement("div")),n.className="general_absolute",n.style.fontFamily=m.item.id,n.style.color="white",n.style.visibility="hidden",n.innerHTML="-")};this.onError=function(m){trace(m.title+": "+m.data.src);try{assets_retry.manifest.push({src:m.data.src,id:m.data.id})}catch(n){}};this.onProgress=function(m){a.progress=m.loaded};this.onComplete=function(m){a.progress=1;a.loaded=!0;a.loadTime=window.performance.now();
g.removeEventListener("fileload",b.onFileLoad);g.removeEventListener("progress",b.onProgress);g.removeEventListener("complete",b.onComplete);g.removeEventListener("error",b.onError);__utils.doDestroyElement(document.getElementById("loader_dummy"))};g.addEventListener("fileload",b.onFileLoad);g.addEventListener("progress",b.onProgress);g.addEventListener("complete",b.onComplete);g.addEventListener("error",b.onError);g.loadManifest(a.manifest)}};this.doFade=function(a,b,d,c){a.my_opacity=Number(a.style.opacity);
a.to_opacity=b;a.step=(b-a.my_opacity)/(60*d);a.forget=!1;a.doUpdate=function(){this.my_opacity=0<this.step?Math.min(this.to_opacity,this.my_opacity+this.step):Math.max(this.to_opacity,this.my_opacity+this.step);this.style.opacity=this.my_opacity;this.my_opacity==this.to_opacity&&(this.forget=!0,c&&c())};actives.push(a)};this.doFadeTo=function(a,b){a.style.display="block";a.style.opacity=0;a.mode=1;a.my_opacity=0;a.doUpdate=function(){switch(this.mode){case 1:this.my_opacity+=.05;this.style.opacity=
Math.min(1,Math.max(0,this.my_opacity));1<=this.my_opacity&&(this.mode=2,b&&b());break;case 2:this.my_opacity-=.05,this.style.opacity=Math.max(0,Math.min(1,this.my_opacity)),0>=this.my_opacity&&(this.purge=!0,this.style.display="none")}};actives.push(a)};this.NewPulse=function(a,b){var d=this;b=b||{};var c=b.seed||0,e=b.ease||1,h=b.ease_speed||1;d.value=0;d.value_normal=0;this.reset=function(g){d.value=Math.sin(__utils.radFromDeg(g.seed||0));d.value_normal=.5+.5*d.value};this.update=function(){c+=
a;360<=c&&(c-=360);d.value=Math.sin(__utils.radFromDeg(c))*e;d.value_normal=.5+.5*d.value*e;e=Math.min(1,e+h)}};this.dataURItoBlob=function(a){var b=-1!==a.split(",")[0].indexOf("base64")?atob(a.split(",")[1]):decodeURI(a.split(",")[1]);a=a.split(",")[0].split(":")[1].split(";")[0];for(var d=[],c=0;c<b.length;c++)d[c]=b.charCodeAt(c);return new Blob([new Uint8Array(d)],{type:a})};this.ordinal_suffix_of=function(a){var b=a%10;a%=100;return 1==b&&11!=a?"st":2==b&&12!=a?"nd":3==b&&13!=a?"rd":"th"};this.doFader=
function(){fader.style.display="inline-block";fader.style.opacity=1;updateQueue.push({keep:!0,opacity:1.5,update_function:function(){this.opacity-=.1;fader.style.opacity=Math.max(0,Math.min(1,this.opacity));0>=this.opacity&&(this.keep=!1,fader.style.display="none")}})};this.doGetBrowser=function(){var a=navigator.userAgent,b=a.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(b[1])){var d=/\brv[ :]+(\d+)/g.exec(a)||[];return"IE "+(d[1]||"")}if("Chrome"===
b[1]&&(d=a.match(/\bOPR\/(\d+)/),null!=d))return"Opera "+d[1];b=b[2]?[b[1],b[2]]:[navigator.appName,navigator.appVersion,"-?"];null!=(d=a.match(/version\/(\d+)/i))&&b.splice(1,1,d[1]);return b.join(" ")};this.getCSSPPI=function(){var a=document.createElement("div");a.style.width="1in";var b=document.getElementsByTagName("body")[0];b.appendChild(a);var d=a.offsetWidth;b.removeChild(a);return parseFloat(d)};this.getPPI=function(){var a=document.createElement("div");a.style.width="1in";var b=document.getElementsByTagName("body")[0];
b.appendChild(a);var d=a.offsetWidth*(window.devicePixelRatio||1);b.removeChild(a);return parseFloat(d)};this.getPixelRatio=function(){var a=document.createElement("canvas").getContext("2d");return(window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1)};this.doGetLanguage=function(){var a;navigator&&navigator.userAgent&&(a=navigator.userAgent.match(/android.*\W(\w\w)-(\w\w)\W/i))&&
(a=a[1]);!a&&navigator&&(navigator.language?a=navigator.language:navigator.browserLanguage?a=navigator.browserLanguage:navigator.systemLanguage?a=navigator.systemLanguage:navigator.userLanguage&&(a=navigator.userLanguage),a=a.substr(0,2));return a};this.getQueryString=function(){var a={},b=window.location.search.substring(1);1>b.length&&null!=window.location.toString().split("%3F")[1]&&(b=window.location.toString().split("%3F")[1]);b=b.split("&");for(var d=0;d<b.length;d++){var c=b[d].split("=");
"undefined"===typeof a[c[0]]?a[c[0]]=c[1]:"string"===typeof a[c[0]]?a[c[0]]=[a[c[0]],c[1]]:a[c[0]].push(c[1])}return a};this.s4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};this.guid=function(){return this.s4()+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+this.s4()+this.s4()};this.formatDate=function(a,b,d){function c(r,u){r+="";for(u=u||2;r.length<u;)r="0"+r;return r}var e="\x00 January February March April May June July August September October November December".split(" "),
h="\u0001 Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),g="\u0002 Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),m="\u0003 Sun Mon Tue Wed Thu Fri Sat".split(" "),n=d?a.getUTCFullYear():a.getFullYear();b=b.replace(/(^|[^\\])yyyy+/g,"$1"+n);b=b.replace(/(^|[^\\])yy/g,"$1"+n.toString().substr(2,2));b=b.replace(/(^|[^\\])y/g,"$1"+n);n=(d?a.getUTCMonth():a.getMonth())+1;b=b.replace(/(^|[^\\])MMMM+/g,"$1"+e[0]);b=b.replace(/(^|[^\\])MMM/g,"$1"+h[0]);b=b.replace(/(^|[^\\])MM/g,
"$1"+c(n));b=b.replace(/(^|[^\\])M/g,"$1"+n);var k=d?a.getUTCDate():a.getDate();b=b.replace(/(^|[^\\])dddd+/g,"$1"+g[0]);b=b.replace(/(^|[^\\])ddd/g,"$1"+m[0]);b=b.replace(/(^|[^\\])dd/g,"$1"+c(k));b=b.replace(/(^|[^\\])d/g,"$1"+k);k=d?a.getUTCHours():a.getHours();b=b.replace(/(^|[^\\])HH+/g,"$1"+c(k));b=b.replace(/(^|[^\\])H/g,"$1"+k);var l=12<k?k-12:0==k?12:k;b=b.replace(/(^|[^\\])hh+/g,"$1"+c(l));b=b.replace(/(^|[^\\])h/g,"$1"+l);l=d?a.getUTCMinutes():a.getMinutes();b=b.replace(/(^|[^\\])mm+/g,
"$1"+c(l));b=b.replace(/(^|[^\\])m/g,"$1"+l);l=d?a.getUTCSeconds():a.getSeconds();b=b.replace(/(^|[^\\])ss+/g,"$1"+c(l));b=b.replace(/(^|[^\\])s/g,"$1"+l);l=d?a.getUTCMilliseconds():a.getMilliseconds();b=b.replace(/(^|[^\\])fff+/g,"$1"+c(l,3));l=Math.round(l/10);b=b.replace(/(^|[^\\])ff/g,"$1"+c(l));l=Math.round(l/10);b=b.replace(/(^|[^\\])f/g,"$1"+l);k=12>k?"AM":"PM";b=b.replace(/(^|[^\\])TT+/g,"$1"+k);b=b.replace(/(^|[^\\])T/g,"$1"+k.charAt(0));k=k.toLowerCase();b=b.replace(/(^|[^\\])tt+/g,"$1"+
k);b=b.replace(/(^|[^\\])t/g,"$1"+k.charAt(0));k=-a.getTimezoneOffset();l=d||!k?"Z":0<k?"+":"-";if(!d){k=Math.abs(k);var q=k%60;l+=c(Math.floor(k/60))+":"+c(q)}b=b.replace(/(^|[^\\])K/g,"$1"+l);a=(d?a.getUTCDay():a.getDay())+1;b=b.replace(new RegExp(g[0],"g"),g[a]);b=b.replace(new RegExp(m[0],"g"),m[a]);b=b.replace(new RegExp(e[0],"g"),e[n]);b=b.replace(new RegExp(h[0],"g"),h[n]);return b=b.replace(/\\(.)/g,"$1")};this.getDayNumber=function(){var a=new Date(2014,0,1);a=(new Date).getTime()-a.getTime();
return Math.ceil(a/864E5)};this.doGoFullScreen=function(){var a=document.documentElement;(a.requestFullScreen||a.webkitRequestFullScreen||a.mozRequestFullScreen).call(a)};this.doCheckFullScreen=function(){trace("doCheckFullScreen");return document.fullscreenEnabled||document.mozFullscreenEnabled||document.webkitIsFullScreen?!0:!1};this.doFullScreenOn=function(){var a=document.documentElement;a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?
a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen();oSTAGE.is_fullscreen=!0};this.doFullScreenOff=function(){document.exitFullscreen?document.exitFullscreen():document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();oSTAGE.is_fullscreen=!1};this.doFadeandDestroy=function(a){a=a.currentTarget;a.alpha-=
.1;0>=a.alpha&&a.parent.removeChild(a)};this.doGetPOT=function(a){return Math.pow(2,Math.ceil(Math.log(a)/Math.log(2)))};this.doCache=function(a,b){b||(b=oSTAGE.cache_scale||oSTAGE.scale);a.regX|=0;a.regY|=0;a.x|=0;a.y|=0;a.uncache();var d=a.getBounds(),c=a.nominalBounds,e={};if(a.force_bounds)e.x=a.force_bounds.x,e.y=a.force_bounds.y,e.width=a.force_bounds.width,e.height=a.force_bounds.height;else if(!a.force_bounds&&d&&c)e.x=Math.min(c.x,d.x),e.y=Math.min(c.y,d.y),e.width=Math.max(c.width,d.width),
e.height=Math.max(c.height,d.height);else if(d)e=d;else if(c)e=c;else return;d=!1;a.stage&&a.stage._webGLContext&&(d=!0);d?a.cache(e.x,e.y,__utils.doGetPOT(e.width),__utils.doGetPOT(e.height),b):a.cache(e.x,e.y,Math.ceil(e.width),Math.ceil(e.height),b)};this.doLerp=function(a,b,d){return a+d*(b-a)};this.doRound=function(a,b){return Number(Math.round(a+"e"+b)+"e-"+b)};this.doGetIntersect=function(a,b,d,c,e,h,g,m){if(a===d&&b===c||e===g&&h===m)return!1;var n=(m-h)*(d-a)-(g-e)*(c-b);if(0===n)return!1;
g=((g-e)*(b-h)-(m-h)*(a-e))/n;e=((d-a)*(b-h)-(c-b)*(a-e))/n;return 0>g||1<g||0>e||1<e?!1:{x:a+g*(d-a),y:b+g*(c-b)}};this.doGetDistance=function(a,b,d,c){a-=d;b-=c;return Math.sqrt(a*a+b*b)};this.doGetAngle=function(a,b,d,c){a=Math.atan2(c-b,d-a);return a*=180/Math.PI};this.degFromRad=function(a){return 180/Math.PI*a};this.radFromDeg=function(a){return Math.PI/180*a};this.getRandomArbitrary=function(a,b){return Math.random()*(b-a)+a};this.getRandomInt=function(a,b){return Math.floor(Math.random()*
(b-a+1))+a};this.doLerp=function(a,b,d){return(1-d)*a+d*b};this.doRandomizeArray=function(a){a=a.slice();for(var b=[];0<a.length;){var d=Math.floor(Math.random()*a.length),c=a[d];a.splice(d,1);b.push(c)}return b};this.doClearTimeouts=function(){for(var a=0;a<timeouts.length;a++)clearTimeout(timeouts[a]);timeouts=[]};this.getPointInBetweenByPerc=function(a,b,d){b=b.clone().sub(a);var c=b.length();b=b.normalize().multiplyScalar(c*d);return a.clone().add(b)};this.doText=function(a,b,d){d=d||{};if(a.my_origin)a.x=
a.my_origin.x,a.y=a.my_origin.y;else{var c=a.getBounds()||{height:0};a.my_origin={x:a.x,y:a.y,h:c.height,lineHeight:a.lineHeight,center:a.y+.5*c.height}}if("object"!==typeof b||null===b)b={value:b};c=b.value||b.txt;var e=platform.isMobile?b.overrides_mobile:b.overrides_desktop;if(e)for(var h in e)switch(h){case "adjustX":b.regX=-e[h];break;case "adjustY":b.regY=-e[h];break;default:b[h]=e[h]}for(h in b)"value"!=h&&(a[h]=b[h]);c||0==c||""==c||(c="MISSING TEXT",a.color="#FF0000");var g=a.font,m=g.indexOf("'"),
n=g.lastIndexOf("'");a.original_font_family||(a.original_font_family=g.slice(m+1,n));h=a.original_font_family;var k=0,l=g.indexOf("px");for(e=l;0<=e;e--)if(" "==g[e]){k=e;break}a.original_font_size||(a.original_font_size=Number(g.slice(k,l)));e=a.original_font_size;g=g.substring(0,k)+g.substring(l+2,m)+g.substring(n,g.length-1);g=g.split(" ").join("");a.original_font_weight||(a.original_font_weight=g);g=a.original_font_weight;a.fontFamily&&(h=a.fontFamily);a.fontWeight&&(g=a.fontWeight);b.fontSize&&
(-1!=b.fontSize.indexOf("px")?e=b.fontSize.split("px")[0]:-1!=b.fontSize.indexOf("%")&&(m=.01*b.fontSize.split("%")[0],e*=m,a.lineHeight=a.my_origin.lineHeight*m));b.lineHeight&&(-1!=String(b.lineHeight).indexOf("%")?(b=Number(.01*String(b.lineHeight).split("%")[0]),a.lineHeight=a.my_origin.lineHeight*b):a.lineHeight=Number(b.lineHeight));a.font_size=e;a.font=1<=g.length?g+" "+e+"px '"+h+"'":e+"px '"+h+"'";c=String(c);b=/<br>/g;c=c.replace(b,"\n");b=/\{\*br\*\}/g;c=c.replace(b,"\n");b=/\{\*p\*\}/g;
c=c.replace(b,"\n\n");b=/<p>/g;c=c.replace(b,"\n\n");a.text=c;c=a.getMetrics().lines.length;switch(d.verticalAlign){case "top":a.textBaseline="top";break;case "bottom":a.textBaseline="top";a.y-=Math.max(0,c)*a.lineHeight;break;case "true_middle":a.textBaseline="top";a.y-=Math.max(0,c)*a.lineHeight*.5;break;case "middle":case void 0:case null:a.textBaseline="middle",a.y+=.5*a.lineHeight-Math.max(0,c-1)*a.lineHeight*.5}a.x|=0;a.y|=0};this.doSubText=function(a,b,d){a=String(a);return a=a.replace(b,d)};
this.doSubValue=function(a,b){a=String(a);return a=a.replace(/\{\*var\*\}/g,b)};this.doSubValue2=function(a,b){a=String(a);return a=a.replace(/\{\*var2\*\}/g,b)};this.doHTMLText=function(a,b,d){if("object"!==typeof b||null===b)b={value:b};var c=b.value,e=a.my_computed_style||window.getComputedStyle(a,null)||a.style;a.my_fontsize=parseFloat(e["font-size"]||e.fontSize);if(e=platform.isMobile?b.overrides_mobile:b.overrides_desktop)for(var h in e)switch(h){case "adjustX":b.transform=b.transform?b.transform+
"translateX("+e[h]+"px)":"translateX("+e[h]+"px)";break;case "adjustY":b.transform=b.transform?b.transform+"translateY("+e[h]+"px)":"translateY("+e[h]+"px)";break;default:b[h]=e[h]}for(h in b)"value"!=h&&("fontSize"==h?(b[h].indexOf("%"),a.style.fontSize=b[h]):a.style[h]=b[h]);c||0==c||(c="MISSING TEXT",a.style.color="#FF0000");h="";b.icon&&(h+='<i class="'+b.icon+'"></i> ');a.innerHTML=d?a.innerHTML+(h+c):h+c};this.doFormatCurrency=function(a){var b=oLANG.comma.value,d=oLANG.currency.value;a=__utils.doRound(a,
2);a=String(a).split(".");for(var c=a[0],e="",h=0,g=c.length-1;0<=g;g--)e=c.charAt(g)+e,h++,3==h&&(h=0,e=b+e);e.charAt(0)==b&&(e=e.substring(1,e.length));e=d+e;1<a.length&&(e+="."+a[1]);return e};this.doFormatNumber=function(a,b){b="undefined"!==typeof b?b:oLANG.comma;a=Math.floor(a);a=String(a);for(var d="",c=0,e=a.length-1;0<=e;e--)d=a.charAt(e)+d,c++,3==c&&(c=0,d=b+d);d.charAt(0)==b&&(d=d.substring(1,d.length));return""+d};this.doFormatTime=function(a){var b=Math.floor(.001*a),d=Math.floor(b/60);
return{m:d,s:b-60*d,h:Math.floor(.1*(a-1E3*b))}};this.doCreateTextArea=function(a,b,d,c,e,h,g,m,n,k,l){var q=document.createElement("div");q.setAttribute("id",a);null!=b&&"body"!=b?document.getElementById(b).appendChild(q):document.body.appendChild(q);n||(g+=";-webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;cursor:default;");q.setAttribute("style",g);q.style.position="absolute";q.style.zIndex="99999";k?(a=function(){q.style.width=e*window.innerWidth+"px";
q.style.height=h*window.innerHeight+"px";q.style.left=d*window.innerWidth+"px";q.style.top=c*window.innerHeight+"px"},a(),window.addEventListener("resize",a)):(q.style.width=e+"px",q.style.height=h+"px",q.style.left=d+"px",q.style.top=c+"px");q.style.overflowY=m?"auto":"hidden";q.innerHTML=l;return q};this.doChangeElement=function(a,b,d,c,e,h){a=null!=a?a:document.getElementById(b);a.style.width=e+"px";a.style.height=h+"px";a.style.marginLeft=d+"px";a.style.marginTop=c+"px"};this.doDestroyElement=
function(a){"string"==typeof a&&(a=document.getElementById(a));a&&(this.doDestroyAllChildren(a),a.parentNode.removeChild(a))};this.doDestroyAllChildren=function(a){if(a)for(;0<a.childNodes.length;)a.removeChild(a.childNodes[0])};this.addDomObject=function(a,b,d,c,e,h){var g=doWrappertoScreen(b,d);a.style.left=g.x+"px";a.style.top=g.y+"px";0!=c&&(a.style.width=c*oSTAGE.scale+"px");0!=e&&(a.style.height=e*oSTAGE.scale+"px");g={};g.obj=a;g.x=b;g.y=d;g.w=c;g.h=e;g.font_size=h;dom_objects.push(g)};this.doClearEventListeners=
function(a){for(var b=0;b<a.length;b++)a[b].removeAllEventListeners()};this.addSourceToVideo=function(a,b,d){var c=document.createElement("source");c.src=b;c.type=d;a.appendChild(c)};this.canPlayVideoInline=function(){return navigator.userAgent.match(/(iPhone|iPod)/g)?"playsInline"in document.createElement("video"):!0}};var RESIZER,_BlitFader=function(f){f=void 0===f?{}:f;var a=document.getElementById(f.div_name);a.style.display="none";a.style.opacity=0;this.doTransitionTo=function(b,d,c,e){callbackMid=d||function(){};e=e||function(){};a.style.display="block";a.style.opacity=0;createjs.Tween.get(a.style,{override:!0}).to({opacity:1},b).call(callbackMid).to({opacity:0},c).call(function(){e();a.style.opacity=1;a.style.display="none"})};this.doFadeSet=function(b){a.style.display=0==b?"none":"block";a.style.opacity=
b};this.doFadeIn=function(b,d){d=d||function(){};createjs.Tween.get(a,{override:!0}).to({opacity:0},b).call(function(){a.style.display="none";d()})};this.doFadeOut=function(b,d){d=d||function(){};a.style.display="block";a.style.opacity=0;createjs.Tween.get(a,{override:!0}).to({opacity:1},b).call(d)};this.doFadeTo=function(b,d,c){c=c||function(){};a.style.display="block";createjs.Tween.get(a,{override:!0}).to({opacity:b},d).call(function(){c();a.style.opacity=1;a.style.display=0!=b?"block":"none"})}},
_BlitWindow=function(f){var a=this;document.addEventListener("gesturestart",function(b){b.preventDefault()});this.doInitResizer=function(b){RESIZER={id:"resizer",w:null,h:null,scroll:null,keep:!0,was_fullscreen:!1,is_fullscreen:!1,repeat_frame:0,needUpdate:!1,stable_frames:0,skip_cover:!1,update_when_stable:!1,doUpdateNow:function(){this.needUpdate=!0;this.doUpdate()},doUpdate:function(){var d=!1;if(this.w!=window.innerWidth||this.h!=window.innerHeight||this.scroll!=document.documentElement.scrollTop){this.stable_frames=
0;this.update_when_stable=!0;if(this.w!=window.innerWidth||this.h!=window.innerHeight)if(RESIZER.skip_cover)RESIZER.skip_cover=!1;else try{document.getElementById("cover").style.display="block"}catch(c){}this.w=window.innerWidth;this.h=window.innerHeight;this.scroll=document.documentElement.scrollTop}else this.update_when_stable&&(this.stable_frames++,10<this.stable_frames&&(this.update_when_stable=!1,this.repeat_frame=5,d=!0));if(this.needUpdate||d||0<this.repeat_frame){this.stable_frames=0;this.needUpdate=
!1;this.repeat_frame=Math.max(0,this.repeat_frame-1);this.w=window.innerWidth;this.h=window.innerHeight;this.is_fullscreen=a.doCheckFullScreen();this.scroll=document.documentElement.scrollTop;if(0==this.repeat_frame)try{document.getElementById("cover").style.display="none"}catch(c){}document.body.style.height=window.innerHeight+"px";this.was_fullscreen!=this.is_fullscreen&&ControlsPanel&&(ControlsPanel.doUpdateFullScreen(),this.was_fullscreen=this.is_fullscreen,oSTAGE.is_fullscreen=this.is_fullscreen);
b()}}};actives.push(RESIZER);window.addEventListener("fullscreenchange",function(){RESIZER.needUpdate=!0});window.addEventListener("orientationchange",function(){RESIZER.needUpdate=!0})};this.doInitFocusManager=function(b,d){var c=!1;window.addEventListener("blur",function(){c||(b&&b(),c=!0,BlitInputs.click_pending=!1)});window.addEventListener("focus",function(){c&&(d&&d(),c=!1,RESIZER.needUpdate=!0,BlitInputs.click_pending=!1)})};this.doGetHiddenProp=function(){var b=["webkit","moz","ms","o"];if("hidden"in
document)return"hidden";for(var d=0;d<b.length;d++)if(b[d]+"Hidden"in document)return b[d]+"Hidden";return null};this.doWindowResize=function(){var b=document.getElementById("wrapper"),d=document.body.offsetWidth,c=document.body.offsetHeight;oSTAGE.is_landscape=d>=c?!0:!1;oSTAGE.pixel_ratio=__utils.getPixelRatio();var e=lib.properties.height,h=lib.properties.width,g=e*h;oCONFIG.min_area&&(g=oCONFIG.min_area/g,e*=g,h*=g);if(oCONFIG.min_width){g=platform.isMobile?oCONFIG.min_width.mobile:oCONFIG.min_width.desktop;
var m=platform.isMobile?oCONFIG.max_width.mobile:oCONFIG.max_width.desktop,n=platform.isMobile?oCONFIG.min_height.mobile:oCONFIG.min_height.desktop,k=platform.isMobile?oCONFIG.max_height.mobile:oCONFIG.max_height.desktop;oSTAGE.is_landscape?h*=1.5:e*=1.5;h=Math.min(m,Math.max(g,h));e=Math.min(k,Math.max(n,e))}oCONFIG.min_dimensions&&(g=oSTAGE.is_landscape?oCONFIG.min_dimensions.landscape:oCONFIG.min_dimensions.portrait,e=Math.max(g.h,e),h=Math.max(g.w,h));if(g=document.getElementById("orientation_overlay"))platform.isMobile&&
"landscape"==oCONFIG.game_orientation&&!oSTAGE.is_landscape?(g.style.backgroundImage="url('media/images/landscape_only.gif')",g.style.display="block",__snds.forceMute()):platform.isMobile&&"portrait"==oCONFIG.game_orientation&&oSTAGE.is_landscape?(g.style.backgroundImage="url('media/images/portrait_only.gif')",g.style.display="block",__snds.forceMute()):(g.style.display="none",__snds.unforceMute());g=0;try{FOOTER.doResizeUpdate();var l=document.getElementById("footer");l&&(g="none"==l.style.display?
0:l.getBoundingClientRect().height)}catch(q){}oSTAGE.window_width=oSTAGE.screen_width=d;oSTAGE.window_height=oSTAGE.screen_height=c-g;c=oSTAGE.screen_width/oSTAGE.screen_height;l=Math.min(Math.max(c,oCONFIG.game_ratio.min),oCONFIG.game_ratio.max);l>c?(oSTAGE.wrapper_width=Math.ceil(oSTAGE.window_width)+1,oSTAGE.wrapper_height=Math.ceil(oSTAGE.window_width/l)):(oSTAGE.wrapper_height=Math.ceil(oSTAGE.window_height),oSTAGE.wrapper_width=Math.ceil(oSTAGE.window_height*l)+1);oSTAGE.scale=Math.min(oSTAGE.wrapper_height/
e,oSTAGE.wrapper_width/h);oSTAGE.scale_inv=1/oSTAGE.scale;oSTAGE.cache_scale=oSTAGE.scale*oSTAGE.pixel_ratio;oSTAGE.game_width=Math.ceil(oSTAGE.wrapper_width*oSTAGE.scale_inv);oSTAGE.game_height=Math.ceil(oSTAGE.wrapper_height*oSTAGE.scale_inv);oSTAGE.game_native_width=h;oSTAGE.game_native_height=e;oSTAGE.game_width_margins=.5*(oSTAGE.game_width-h)|0;oSTAGE.game_height_margins=.5*(oSTAGE.game_height-e)|0;oSTAGE.game_top=-oSTAGE.game_height_margins;oSTAGE.game_bottom=oSTAGE.game_height-oSTAGE.game_height_margins;
oSTAGE.game_left=-oSTAGE.game_width_margins;oSTAGE.game_right=oSTAGE.game_width-oSTAGE.game_width_margins;oSTAGE.game_center_x=.5*h;oSTAGE.game_center_y=.5*e;oSTAGE.game_size={left:-oSTAGE.game_width_margins,top:-oSTAGE.game_height_margins,width:oSTAGE.game_width,height:oSTAGE.game_height,right:oSTAGE.game_width-oSTAGE.game_width_margins,bottom:oSTAGE.game_height-oSTAGE.game_height_margins,center_x:.5*h,center_y:.5*e,native_height:lib.properties.height,native_width:lib.properties.width};b.style.width=
oSTAGE.wrapper_width+"px";b.style.height=oSTAGE.wrapper_height+"px";b.style.top="0px";b.style.left=Math.floor(.5*(d-b.clientWidth))+"px";for(b=update_queue.length-1;0<=b;b--)update_queue[b].forget?update_queue.splice(b,1):update_queue[b].doResizeUpdate?update_queue[b].doResizeUpdate():update_queue.splice(b,1)};this.doCheckFullScreen=function(){return document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen||document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||
document.msFullscreenElement};this.doFullScreenOn=function(){if(!oSTAGE.is_fullscreen){var b=document.documentElement;b.requestFullscreen?b.requestFullscreen():b.msRequestFullscreen?b.msRequestFullscreen():b.mozRequestFullScreen?b.mozRequestFullScreen():b.webkitRequestFullscreen&&b.webkitRequestFullscreen();RESIZER.needUpdate=!0}};this.doFullScreenOff=function(){if(oSTAGE.is_fullscreen){var b=document;b.exitFullscreen?b.exitFullscreen():b.cancelFullScreen?b.cancelFullScreen():b.mozCancelFullScreen?
b.mozCancelFullScreen():b.msExitFullscreen?b.msExitFullscreen():b.webkitExitFullscreen&&b.webkitExitFullscreen();RESIZER.needUpdate=!0}}};this.myNameSpace=this.myNameSpace||{};
(function(){function f(){}var a={};f.prototype={initialized:!1,snd_queue:{},snd_counter:0,systemMute:!1,init:function(b){if(0==this.initialized)return this.initialized=!0,this.mute=!1,createjs.Sound.muted=0==this.mute?!1:!0,window.addEventListener("mousedown",__snds.enableSounds),createjs.Sound.initializeDefaultPlugins()},enableSounds:function(){createjs.Sound.activePlugin.context&&"running"!=createjs.Sound.activePlugin.context.state&&createjs.Sound.activePlugin.context.resume();try{window.removeEventListener("mousedown",
__snds.enableSounds)}catch(b){}},nextSound:function(b){if(0<__snds.snd_queue[b].length){var d=__snds.snd_queue[b].shift();__snds.playSound(d.id,b,d.loop,d.volume,d.onComplete,!0)}},stopSound:function(b){a[b]&&(a[b].stop(),delete a[b])},setPause:function(b,d){a[b]&&(a[b].paused=d)},playSound:function(b,d,c,e,h,g){c=void 0===c?0:c;e=void 0===e?1:e;h=void 0===h?function(){}:h;g=void 0===g?!1:g;createjs.Sound.activePlugin.context&&"running"!=createjs.Sound.activePlugin.context.state&&createjs.Sound.activePlugin.context.resume();
0==this.initialized&&this.init();d?a[d]&&a[d].stop():(d="general_"+this.snd_counter,this.snd_counter++,5<this.snd_counter&&(this.snd_counter=0));g||(__snds.snd_queue[d]=[]);g={};g.interrupt=createjs.Sound.INTERRUPT_EARLY;e&&(g.volume=e);c&&(g.loop=c);this.systemMute&&(g.volume=0);"string"!==typeof b&&(b=b[__utils.getRandomInt(0,b.length-1)]);c=createjs.Sound.play(b,g);c.channel=d;c.clip_id=b;c.onComplete=h;c.addEventListener("complete",function(m){m.target.onComplete();__snds.nextSound(m.target.channel)});
return a[d]=c},queueSound:function(b,d,c,e,h){c=void 0===c?0:c;e=void 0===e?1:e;h=void 0===h?function(){}:h;d||(d="general_"+this.snd_counter,this.snd_counter++,5<this.snd_counter&&(this.snd_counter=0));if(__snds.snd_queue[d]){var g={};g.id=b;g.loop=c;g.volume=e;g.channel=d;g.onComplete=h;__snds.snd_queue[d].push(g);b=!0;a[d]?1==__snds.snd_queue[d].length&&"playFinished"==a[d].playState&&(b=!1):b=!1;b||__snds.nextSound(d)}else __snds.playSound(b,d,c,e,h)},getNowPlaying:function(b){return a[b]?a[b].clip_id:
null},setSystemMute:function(b){for(var d in a)b?(a[d].saveVolume=a[d].volume,a[d].volume=0,this.systemMute=!0):(isNaN(a[d].saveVolume)||(a[d].volume=a[d].saveVolume),this.systemMute=!1)},stopAllSounds:function(){for(var b in a)try{a[b].stop()}catch(d){}},toggleMute:function(){0==this.mute?(this.mute=1,createjs.Sound.muted=!0):(this.mute=0,createjs.Sound.muted=!1);return oUSER.is_mute=this.mute},forceMute:function(){createjs.Sound.muted=!0},isMute:function(){return this.mute},unforceMute:function(){0==
this.mute&&(createjs.Sound.muted=!1)},mute:0};myNameSpace.BlitSounds=f})();var oLANG,oLANG_IMAGES,oLANG_FONTS,BlitLanguage=new function(){var f=this,a,b;this.doLoadLanguage=function(d,c,e){trace("doLoadLanguage()");a=d;b=c;switch(a.split(".").pop().toLowerCase()){case "json":f.doLoadLanguageJSON();break;case "xml":f.doLoadLanguageXML()}};this.doLoadLanguageJSON=function(){var d=new XMLHttpRequest;d.open("GET",a,!0);d.setRequestHeader("Content-Type","application/json");d.onreadystatechange=function(){if(4==d.readyState&&200==d.status){var c=JSON.parse(d.responseText);oLANG=
{};oLANG_IMAGES={};oLANG_FONTS={};var e=c.txt;if(e)for(var h=0;h<e.length;h++){var g=e[h];if(g.id){var m={},n;for(n in g)m[n]=g[n];m.value=g.value||"";m.spaced&&(m.value=m.value.split("").join("\u00a0"));oLANG[m.id]=m}}if(e=c.img)for(h=0;h<e.length;h++)if(g=e[h],g.id){m={};for(n in g)m[n]=g[n];m.value=g.value||"";oLANG_IMAGES[m.id]=m}if(c=c.config)for(h=0;h<c.length;h++)if(g=c[h],g.id){m={};for(n in g)m[n]=g[n];m.value=g.value||"";oCONFIG[m.id]=m.value}b()}};d.send(null)};this.doLoadLanguageXML=function(){trace("doLoadLanguageXML()");
var d=new XMLHttpRequest;d.open("GET",a,!0);d.onreadystatechange=function(){if(4==d.readyState&&200==d.status){var c=(d.responseXML||parseXml(d.responseText)).documentElement;oLANG={};oLANG_IMAGES={};oLANG_FONTS={};var e=c.getElementsByTagName("txt");if(e)for(var h=0;h<e.length;h++){var g=e[h],m={};m.id=g.getAttribute("id");for(var n=0;n<g.attributes.length;n++){var k=g.attributes[n];k.specified&&(m[k.name]=k.value)}m.value=g.childNodes[0]?g.childNodes[0].nodeValue:"";oLANG[m.id]=m}if(m=c.getElementsByTagName("img"))for(h=
0;h<m.length;h++)g=m[h],e=g.getAttribute("id"),g=g.childNodes[0].nodeValue,oLANG_IMAGES[e]=g;if(c=c.getElementsByTagName("config"))for(h=0;h<c.length;h++)g=c[h],e=g.getAttribute("id"),g=g.childNodes[0].nodeValue,"true"==g&&(g=!0),"false"==g&&(g=!1),oCONFIG[e]=g;b()}};d.send(null)}};
function FontLoader(){var f=document.body.appendChild(document.createElement("canvas"));f.style.width="100px";f.style.height="100px";f.style.position="absolute";f.style.display="none";var a=new createjs.Stage(f);a.enableMouseOver(0);a.tickChildren=!0;a.tickEnabled=!0;a.needUpdate=!1;a.enableDOMEvents(!1);a.forget=!1;var b=a.addChild(new lib.font_loader);this.doDestroy=function(){a.update();a.removeAllChildren();__utils.doDestroyElement(f)};this.doAddFont=function(d,c){""!=c&&(c+=" ");b.addChild(new createjs.Text("Hello World",
c+"20px "+d,"#ff7700"))};a.update()};
